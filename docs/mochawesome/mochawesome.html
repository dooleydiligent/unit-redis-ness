<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:93,&quot;tests&quot;:318,&quot;passes&quot;:316,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2020-02-02T21:34:40.562Z&quot;,&quot;end&quot;:&quot;2020-02-02T21:34:58.859Z&quot;,&quot;duration&quot;:18297,&quot;testsRegistered&quot;:318,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0.628930817610063,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;04dedda5-bac9-4732-894b-7d6f435db974&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;done();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8eaeb4fa-63fd-4e73-8efa-0c72c102b2c6&quot;,&quot;parentUUID&quot;:&quot;04dedda5-bac9-4732-894b-7d6f435db974&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c7b84f3-911e-458a-9462-aa61a9bf6572&quot;,&quot;parentUUID&quot;:&quot;04dedda5-bac9-4732-894b-7d6f435db974&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;92b10d43-1f59-429c-839b-06cb2c8574b3&quot;,&quot;title&quot;:&quot;dictionary test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/dictionary.test.ts&quot;,&quot;file&quot;:&quot;/test/dictionary.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dictionary = new dictionary_1.Dictionary();\nsinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a9ebf22-720b-4b0e-bc2e-1eeb9b5e0a7b&quot;,&quot;parentUUID&quot;:&quot;92b10d43-1f59-429c-839b-06cb2c8574b3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc5ae091-c43d-4225-b98e-3a0013042bab&quot;,&quot;parentUUID&quot;:&quot;92b10d43-1f59-429c-839b-06cb2c8574b3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7c1f0b6-4a75-4c31-91c7-3ba5ba84521f&quot;,&quot;parentUUID&quot;:&quot;92b10d43-1f59-429c-839b-06cb2c8574b3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should construct&quot;,&quot;fullTitle&quot;:&quot;dictionary test should construct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        chai_1.expect(dictionary.constructor.name).to.equal(&#x27;Dictionary&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bb2d045-17ff-4243-8cd3-d806d17d0af5&quot;,&quot;parentUUID&quot;:&quot;92b10d43-1f59-429c-839b-06cb2c8574b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement basic put/get/remove/size/clear/contains/exists/keys/values functionality&quot;,&quot;fullTitle&quot;:&quot;dictionary test should implement basic put/get/remove/size/clear/contains/exists/keys/values functionality&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dictionary.put(&#x27;item&#x27;, &#x27;one&#x27;);\nchai_1.expect(dictionary.exists(&#x27;item&#x27;)).to.equal(true);\nchai_1.expect(dictionary.exists(&#x27;one&#x27;)).to.equal(false);\nchai_1.expect(dictionary.get(&#x27;item&#x27;)).to.equal(&#x27;one&#x27;);\nchai_1.expect(dictionary.size()).to.equal(1);\nchai_1.expect(dictionary.contains(&#x27;one&#x27;)).to.equal(true);\nchai_1.expect(dictionary.keys().length).to.equal(1);\nchai_1.expect(dictionary.values().length).to.equal(1);\ndictionary.put(&#x27;item&#x27;, &#x27;two&#x27;);\nchai_1.expect(dictionary.get(&#x27;item&#x27;)).to.equal(&#x27;two&#x27;);\ndictionary.put(&#x27;one&#x27;, { embedded: true });\ndictionary.remove(&#x27;three&#x27;);\nchai_1.expect(dictionary.size()).to.equal(2);\nlet foundTwo = false;\nfor (const each of dictionary) {\n    if (!foundTwo) {\n        chai_1.expect(each).to.equal(&#x27;two&#x27;);\n        foundTwo = true;\n    }\n    else {\n        chai_1.expect(each).to.eql({ embedded: true });\n    }\n}\ndictionary.remove(&#x27;item&#x27;);\nchai_1.expect(dictionary.size()).to.equal(1);\ndictionary.clear();\nchai_1.expect(dictionary.size()).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;538a7d9b-03cb-432c-bb98-a172f93c3e5d&quot;,&quot;parentUUID&quot;:&quot;92b10d43-1f59-429c-839b-06cb2c8574b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2bb2d045-17ff-4243-8cd3-d806d17d0af5&quot;,&quot;538a7d9b-03cb-432c-bb98-a172f93c3e5d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;fccc56e4-a3cf-419c-b470-135961cf30dc&quot;,&quot;title&quot;:&quot;logger test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/logger.test.ts&quot;,&quot;file&quot;:&quot;/test/logger.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5e6d017-5148-4736-8662-dbf08809a1b1&quot;,&quot;parentUUID&quot;:&quot;fccc56e4-a3cf-419c-b470-135961cf30dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5019e199-0019-4401-9609-6926d46f7cba&quot;,&quot;parentUUID&quot;:&quot;fccc56e4-a3cf-419c-b470-135961cf30dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de7c21d4-bcdc-4005-b1ee-097c65a3fb01&quot;,&quot;parentUUID&quot;:&quot;fccc56e4-a3cf-419c-b470-135961cf30dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should construct&quot;,&quot;fullTitle&quot;:&quot;logger test should construct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        logger = new logger_1.Logger(module.id);\n        chai_1.expect(logger.constructor.name).to.equal(&#x27;Logger&#x27;);\n        logger.info(`This is an info message`);\n        logger.warn(&#x27;This is a warning message&#x27;);\n        logger.debug(`This is an invisible debug message`);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4551c813-099b-43bb-a913-0dc6b0480764&quot;,&quot;parentUUID&quot;:&quot;fccc56e4-a3cf-419c-b470-135961cf30dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not construct when initialized with an empty string&quot;,&quot;fullTitle&quot;:&quot;logger test should not construct when initialized with an empty string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(() =&gt; {\n    logger = new logger_1.Logger(&#x27;&#x27;);\n}).to.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9000a223-af28-453b-8e10-afe3d4d2a549&quot;,&quot;parentUUID&quot;:&quot;fccc56e4-a3cf-419c-b470-135961cf30dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4551c813-099b-43bb-a913-0dc6b0480764&quot;,&quot;9000a223-af28-453b-8e10-afe3d4d2a549&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;title&quot;:&quot;lua-bit test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/lua/lua-bit.test.ts&quot;,&quot;file&quot;:&quot;/test/lua/lua-bit.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5203db14-bd16-462f-93e7-20f6fbf4bf72&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89b506bb-aa05-42dc-b0ee-cd49dd550f25&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92062340-fdcf-42f4-b8ce-e9760fafb3bc&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbe72962-4f78-4cff-b306-fd4d4b34f827&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should leverage the LUA bit library for bit AND op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit AND op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = bit.band(5, 1) return val &#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18c9f1cf-c59f-45a2-9411-f296cff9957d&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit OR op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit OR op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = bit.bor(5, 1) return val &#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(5);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4da04d36-9e18-4575-930d-20e9cb3f5da1&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit XOR op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit XOR op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = bit.bxor(5, 1) return val &#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(4);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53d6f5a1-eac2-45c8-85ae-97615ba085f4&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit NOT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit NOT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = bit.bnot(5) return val &#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(-6);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aefcf95b-0b35-4587-b11e-4e6ab29eddbc&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit LSHIFT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit LSHIFT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = bit.lshift(5, 1) return val &#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(10);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a9a22f1-77b7-4457-baaf-0d6de25070e5&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit RSHIFT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit RSHIFT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run this test if this is unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = bit.rshift(-5, 1) return val &#x27;, &#x27;0&#x27;]);\n            chai_1.expect(response).to.equal(-3);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fa0638e-1012-4efc-9f99-d9c2e8484b19&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit ARSHIFT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit ARSHIFT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = bit.arshift(5, 1) return val &#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(2);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d6293ab-4733-416e-8952-8f75ad591fad&quot;,&quot;parentUUID&quot;:&quot;5c37ed1f-b16e-49bb-9a1f-2f70dcaf59a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18c9f1cf-c59f-45a2-9411-f296cff9957d&quot;,&quot;4da04d36-9e18-4575-930d-20e9cb3f5da1&quot;,&quot;53d6f5a1-eac2-45c8-85ae-97615ba085f4&quot;,&quot;aefcf95b-0b35-4587-b11e-4e6ab29eddbc&quot;,&quot;4a9a22f1-77b7-4457-baaf-0d6de25070e5&quot;,&quot;4fa0638e-1012-4efc-9f99-d9c2e8484b19&quot;,&quot;0d6293ab-4733-416e-8952-8f75ad591fad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:181,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;title&quot;:&quot;client command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/client-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/client-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3666e40-45aa-4717-9a0c-43260d8b2976&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;680a53cc-4b2a-47a6-b8b8-add44cd4d564&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;180616dd-fd8b-4ba8-80b1-540ccd30cd29&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;349483bd-6ae8-4b4e-a634-ded1abb66b90&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow more than 3 parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should not allow more than 3 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, &#x27;four&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR Unknown subcommand or wrong number of arguments for \\&#x27;one\\&#x27;. Try CLIENT HELP&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa36974a-fcd8-4c9b-8651-673a41da3a2f&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail predictably when an unknown subcommand is passed&quot;,&quot;fullTitle&quot;:&quot;client command test should fail predictably when an unknown subcommand is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;whatever&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;whatever&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3a889c6-770a-4222-b4f3-a49a4628c877&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a NIL name when called with \&quot;GETNAME\&quot; subcommand&quot;,&quot;fullTitle&quot;:&quot;client command test should return a NIL name when called with \&quot;GETNAME\&quot; subcommand&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2842d6f-1cad-4950-907d-a9e4a682d6ba&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail predictably when \&quot;GETNAME\&quot; is called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should fail predictably when \&quot;GETNAME\&quot; is called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;, &#x27;extra&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;getname&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a6128bc-4488-427b-a5ec-cd1f12572866&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with \&quot;OK\&quot; when \&quot;setname\&quot; is called with a valid name&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with \&quot;OK\&quot; when \&quot;setname\&quot; is called with a valid name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;setname&#x27;, &#x27;whatever&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;whatever&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed385bf5-947d-450d-80b9-832c11a82d9e&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should persist the value for \&quot;setname\&quot; across tests&quot;,&quot;fullTitle&quot;:&quot;client command test should persist the value for \&quot;setname\&quot; across tests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;whatever&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04210535-f7c7-429e-a4d6-4075a57696a4&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;setname\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;setname\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;setname&#x27;, &#x27;test&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;setname&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1140e327-62f6-4963-b9dd-bc553d1c4085&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow whitespace in \&quot;setname\&quot; subcommand&quot;,&quot;fullTitle&quot;:&quot;client command test should not allow whitespace in \&quot;setname\&quot; subcommand&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;setname&#x27;, &#x27;te\\nst&#x27;]);\n        chai_1.expect(response).to.equal(`ReplyError: ERR Client names cannot contain spaces, newlines or special characters.`);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1a65779-b615-4a08-a949-bfa1330cfb6b&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the server-assigned client id&quot;,&quot;fullTitle&quot;:&quot;client command test should return the server-assigned client id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;id&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(String(response).length).to.be.greaterThan(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6f7fc0b-78ad-48ec-865b-d0d400302562&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;id\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;id\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;id&#x27;, &#x27;test&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;id&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c15c453-c950-45c6-b0ef-5c76a254d20b&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a bunch of information when client \&quot;list\&quot; subcommand is invoked&quot;,&quot;fullTitle&quot;:&quot;client command test should return a bunch of information when client \&quot;list\&quot; subcommand is invoked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;list&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response.length).to.be.greaterThan(0);\n        chai_1.expect(response).to.match(/ name=whatever /);\n        chai_1.expect(response).to.match(/\\bdb=0\\b/);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a845c07a-51ae-4711-87d2-04f8bd921354&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;list\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;list\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;list&#x27;, &#x27;test&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;571e1abf-2858-4610-9ae7-f9cd4471c08b&quot;,&quot;parentUUID&quot;:&quot;96b18b3d-e10f-4f81-af8c-7b82d668df8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa36974a-fcd8-4c9b-8651-673a41da3a2f&quot;,&quot;c3a889c6-770a-4222-b4f3-a49a4628c877&quot;,&quot;e2842d6f-1cad-4950-907d-a9e4a682d6ba&quot;,&quot;9a6128bc-4488-427b-a5ec-cd1f12572866&quot;,&quot;ed385bf5-947d-450d-80b9-832c11a82d9e&quot;,&quot;04210535-f7c7-429e-a4d6-4075a57696a4&quot;,&quot;1140e327-62f6-4963-b9dd-bc553d1c4085&quot;,&quot;a1a65779-b615-4a08-a949-bfa1330cfb6b&quot;,&quot;b6f7fc0b-78ad-48ec-865b-d0d400302562&quot;,&quot;1c15c453-c950-45c6-b0ef-5c76a254d20b&quot;,&quot;a845c07a-51ae-4711-87d2-04f8bd921354&quot;,&quot;571e1abf-2858-4610-9ae7-f9cd4471c08b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;0a5978eb-3b32-4c8a-a71b-9bc6c95ad3ea&quot;,&quot;title&quot;:&quot;flushall-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/db/flushall-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/db/flushall-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fc20190-c8ab-4fef-a005-f73e4de992cd&quot;,&quot;parentUUID&quot;:&quot;0a5978eb-3b32-4c8a-a71b-9bc6c95ad3ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a391a2d-81f1-4c13-843d-942dbbab353f&quot;,&quot;parentUUID&quot;:&quot;0a5978eb-3b32-4c8a-a71b-9bc6c95ad3ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2457816-34d4-4e68-9d77-0644a825a9c0&quot;,&quot;parentUUID&quot;:&quot;0a5978eb-3b32-4c8a-a71b-9bc6c95ad3ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdd187e3-bc71-4616-a7c6-564c2a5adc5e&quot;,&quot;parentUUID&quot;:&quot;0a5978eb-3b32-4c8a-a71b-9bc6c95ad3ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all keys from all databases&quot;,&quot;fullTitle&quot;:&quot;flushall-command test should remove all keys from all databases&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let db = 0; db &lt; 16; db++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;dbid&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            console.log(`DB: ${db}: dbsize: ${response}`);\n            chai_1.expect(response).to.equal(1);\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        for (let db = 0; db &lt; 16; db++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e74dccfe-78c5-42a8-ac52-9664251876c1&quot;,&quot;parentUUID&quot;:&quot;0a5978eb-3b32-4c8a-a71b-9bc6c95ad3ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e74dccfe-78c5-42a8-ac52-9664251876c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;1d3b5527-3415-49b5-9369-7d08d9efe75c&quot;,&quot;title&quot;:&quot;flushdb-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/db/flushdb-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/db/flushdb-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24569e39-607f-4799-9979-4ff17ed82c8f&quot;,&quot;parentUUID&quot;:&quot;1d3b5527-3415-49b5-9369-7d08d9efe75c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09e3bb59-73e5-42e1-a53a-ec8cb835f92c&quot;,&quot;parentUUID&quot;:&quot;1d3b5527-3415-49b5-9369-7d08d9efe75c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b087b92-3b44-4d93-a4c4-1e8948deee0d&quot;,&quot;parentUUID&quot;:&quot;1d3b5527-3415-49b5-9369-7d08d9efe75c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca7d5b3c-d8a5-488e-83c1-9188ab3b91aa&quot;,&quot;parentUUID&quot;:&quot;1d3b5527-3415-49b5-9369-7d08d9efe75c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all keys from only the currently selected databases&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test should remove all keys from only the currently selected databases&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let db = 0; db &lt; 16; db++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;dbid&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.equal(1);\n        }\n        for (let db = 0; db &lt; 16; db++) {\n            if (db !== 14) {\n                response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n                chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n                response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n                chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n                response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dbid&#x27;]);\n                chai_1.expect(response).to.equal(0);\n                response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n                chai_1.expect(response).to.equal(0);\n            }\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;14&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;dbid&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;14&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec866201-dddc-4f25-9c59-7df1271d65d6&quot;,&quot;parentUUID&quot;:&quot;1d3b5527-3415-49b5-9369-7d08d9efe75c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec866201-dddc-4f25-9c59-7df1271d65d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:119,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;title&quot;:&quot;hget command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/hash/hget-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/hash/hget-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a46177a-7741-4acb-a6c3-2c5bd3c30239&quot;,&quot;parentUUID&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ef4e581-f44a-4ad5-84ce-1f9eddccbf1c&quot;,&quot;parentUUID&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34daaeaf-3355-4b84-a3f8-d4bcbc21e1c7&quot;,&quot;parentUUID&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f115260-b5b1-4baa-936f-777ea0dbaf5d&quot;,&quot;parentUUID&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require exactly 2 parameters&quot;,&quot;fullTitle&quot;:&quot;hget command test should require exactly 2 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;])\n    .then((response1) =&gt; {\n    chai_1.expect(response1).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;hget\\&#x27; command&#x27;);\n    common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;])\n        .then((response2) =&gt; {\n        chai_1.expect(response2).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;hget\\&#x27; command&#x27;);\n        common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;one&#x27;])\n            .then((response3) =&gt; {\n            chai_1.expect(response3).to.equal(null);\n            done();\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc2bf8c1-0c99-45c2-bcaf-f34dce987948&quot;,&quot;parentUUID&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a value after it has be set&quot;,&quot;fullTitle&quot;:&quot;hget command test should get a value after it has be set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;])\n    .then(() =&gt; {\n    common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;one&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(&#x27;two&#x27;);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b3e91d3-6ccd-4243-a3f9-5e27f27b1571&quot;,&quot;parentUUID&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nil string when the key exists but the field does not&quot;,&quot;fullTitle&quot;:&quot;hget command test should return nil string when the key exists but the field does not&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;two&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(null);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05052355-3f09-4af7-afdb-2a9bcd946fd1&quot;,&quot;parentUUID&quot;:&quot;d78d64ba-ca10-49a4-b1c3-a4c659947d10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc2bf8c1-0c99-45c2-bcaf-f34dce987948&quot;,&quot;8b3e91d3-6ccd-4243-a3f9-5e27f27b1571&quot;,&quot;05052355-3f09-4af7-afdb-2a9bcd946fd1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;title&quot;:&quot;hset command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/hash/hset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/hash/hset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(new net.Socket(), [&#x27;flushall&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8943f7e-972b-499a-a95f-d8f788f9e323&quot;,&quot;parentUUID&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0857e595-d731-4ac4-b52e-b058a5801a0a&quot;,&quot;parentUUID&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e49072e1-4c85-435a-b8f0-f05872a8337c&quot;,&quot;parentUUID&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6aaa3fc-d8dc-4da7-aec9-842ed2a2a8bd&quot;,&quot;parentUUID&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require a minimum of 3 parameters&quot;,&quot;fullTitle&quot;:&quot;hset command test should require a minimum of 3 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `KEY${new Date().getTime()}`;\n        chai_1.expect(uniqueKey).not.to.equal(lastId);\n        lastId = uniqueKey;\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for \\&#x27;hset\\&#x27; command/i);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for \\&#x27;hm?set\\&#x27; command/i);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9392987-70b7-4973-83c2-58cc13c59ea5&quot;,&quot;parentUUID&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only accept an odd number of parameters&quot;,&quot;fullTitle&quot;:&quot;hset command test should only accept an odd number of parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `newKey${new Date().getTime()}`;\n        chai_1.expect(uniqueKey).not.to.equal(lastId);\n        lastId = uniqueKey;\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one2&#x27;, &#x27;two&#x27;, &#x27;fail&#x27;]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for hm?set/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19570501-6be6-4316-aa02-44a960881bd4&quot;,&quot;parentUUID&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only report added fields&quot;,&quot;fullTitle&quot;:&quot;hset command test should only report added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `key3${new Date().getTime()}`;\n        chai_1.expect(uniqueKey).not.to.equal(lastId);\n        lastId = uniqueKey;\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;six&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;anothervalue&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, uniqueKey, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;anothervalue&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b42e03da-03f9-42b8-b0bc-be508ed4d41f&quot;,&quot;parentUUID&quot;:&quot;55da12e8-c99d-4047-aee1-3389c7d0650b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9392987-70b7-4973-83c2-58cc13c59ea5&quot;,&quot;19570501-6be6-4316-aa02-44a960881bd4&quot;,&quot;b42e03da-03f9-42b8-b0bc-be508ed4d41f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;title&quot;:&quot;del-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/del-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/del-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0f3d0d0-fef3-4f6d-b349-25b16dcb8679&quot;,&quot;parentUUID&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6324643a-35fb-4068-a830-b5c191a6eb4c&quot;,&quot;parentUUID&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;716de6f0-c90d-4426-9020-b6f6306d991e&quot;,&quot;parentUUID&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b36cba8b-505d-4218-8526-c94a2018e9a3&quot;,&quot;parentUUID&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ZERO when called with no keys present&quot;,&quot;fullTitle&quot;:&quot;del-command test should report ZERO when called with no keys present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;del&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n    chai_1.expect(response).to.equal(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08e26efe-9604-471c-a2fa-9e97618efe93&quot;,&quot;parentUUID&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the number of keys actually removed&quot;,&quot;fullTitle&quot;:&quot;del-command test should report the number of keys actually removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const client = new net.Socket();\ncommon_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key1&#x27;, &#x27;data&#x27;])\n    .then(() =&gt; {\n    common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key2&#x27;, &#x27;data&#x27;])\n        .then(() =&gt; {\n        common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key3&#x27;, &#x27;data&#x27;])\n            .then(() =&gt; {\n            common_test_1.sendCommand(client, [&#x27;del&#x27;, &#x27;key1&#x27;, &#x27;key3&#x27;])\n                .then((response) =&gt; {\n                chai_1.expect(response).to.equal(2);\n                done();\n            });\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;837aa924-c46c-491e-a984-113de55dff8a&quot;,&quot;parentUUID&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have retained key2 from the previous test&quot;,&quot;fullTitle&quot;:&quot;del-command test should have retained key2 from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;del&#x27;, &#x27;key2&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2abe25b4-a734-4d20-a8dd-424d5c63d3f7&quot;,&quot;parentUUID&quot;:&quot;f6c4eb64-3989-4829-a184-7cfe77b5edb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08e26efe-9604-471c-a2fa-9e97618efe93&quot;,&quot;837aa924-c46c-491e-a984-113de55dff8a&quot;,&quot;2abe25b4-a734-4d20-a8dd-424d5c63d3f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;title&quot;:&quot;exists-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/exists-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/exists-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a millisecond TTL to validate exists respects TTL\n    common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;value&#x27;, &#x27;PX&#x27;, &#x27;3&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd9709b6-fe52-42b0-bdb1-91142fcc1ff8&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd1883d9-ae0b-4160-9846-d7f6751dc36a&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a805984-a246-4f02-90a6-087d9fcd6143&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c2ebcc5-c38f-4b85-bcea-e3cad9011f17&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ZERO when none of the specified keys exist&quot;,&quot;fullTitle&quot;:&quot;exists-command test should report ZERO when none of the specified keys exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n    chai_1.expect(response).to.equal(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47cec157-22a1-4c44-abb1-d20bc877e739&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require at least ONE parameter&quot;,&quot;fullTitle&quot;:&quot;exists-command test should require at least ONE parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;exists\\&#x27; command&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7d38f7e-ca24-4bbb-9994-f93d8ccfc408&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report GREATER THAN ZERO when checking for the same existing key multiple times&quot;,&quot;fullTitle&quot;:&quot;exists-command test should report GREATER THAN ZERO when checking for the same existing key multiple times&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;key&#x27;, &#x27;value&#x27;])\n    .then(() =&gt; {\n    common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;, &#x27;key&#x27;, &#x27;key&#x27;, &#x27;unknownkey&#x27;, &#x27;another&#x27;, &#x27;another&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(2);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b64cd7ca-1efd-430a-a60e-8fc7cb3bd2b4&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect the TTL value on a key&quot;,&quot;fullTitle&quot;:&quot;exists-command test should respect the TTL value on a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;, &#x27;ttlkey&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a745d5f4-2650-4e63-8e39-c92b61f27008&quot;,&quot;parentUUID&quot;:&quot;88a657ad-d91e-4040-bdde-f1440257f2d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47cec157-22a1-4c44-abb1-d20bc877e739&quot;,&quot;a7d38f7e-ca24-4bbb-9994-f93d8ccfc408&quot;,&quot;b64cd7ca-1efd-430a-a60e-8fc7cb3bd2b4&quot;,&quot;a745d5f4-2650-4e63-8e39-c92b61f27008&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;title&quot;:&quot;expire-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/expire-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/expire-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bd83852-6601-4bb8-a306-df557304d67c&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d6b96f9-a2c0-4d8e-bc9f-afc96b6ca0a0&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfe184ff-e6e9-4df7-9041-fc0f84b90344&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f8919fb-453a-4fe8-97c2-ed8884c53694&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ZERO when expire called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;expire-command test should report ZERO when expire called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;no-key&#x27;, &#x27;1000&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5897ec6f-52af-471b-b381-258da75e93f8&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require an integer value for the ttl parameter&quot;,&quot;fullTitle&quot;:&quot;expire-command test should require an integer value for the ttl parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;mykey&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;10.2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;ten&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0056b737-a465-45a1-b89c-5f3d1b84dd23&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set the requested ttl on a key&quot;,&quot;fullTitle&quot;:&quot;expire-command test should set the requested ttl on a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;10000&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f015692b-f022-49f4-8502-078edf095ad1&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should expire a key when we set a negative ttl&quot;,&quot;fullTitle&quot;:&quot;expire-command test should expire a key when we set a negative ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Note that this is not consistent with documentation\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dbe2fb4-4346-4003-bf53-a09b5b0657f5&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with ZKEYs (and other key types - as yet untested)&quot;,&quot;fullTitle&quot;:&quot;expire-command test should work with ZKEYs (and other key types - as yet untested)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;, &#x27;member&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n    common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zkey&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(1);\n        common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;])\n            .then((response) =&gt; {\n            chai_1.expect(response).to.equal(1);\n            setTimeout(() =&gt; {\n                common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zkey&#x27;])\n                    .then((response) =&gt; {\n                    chai_1.expect(response).to.equal(0, `Unexpected response ${response} should be ZERO`);\n                    done();\n                });\n            }, 2000);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dce97c1f-22c6-46a5-afc1-869f7bf4e643&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should survive the RENAME operation&quot;,&quot;fullTitle&quot;:&quot;expire-command test should survive the RENAME operation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;rename-test&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;rename-test&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;rename-test&#x27;, &#x27;new-name&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;new-name&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;rename-test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        yield setTimeout(() =&gt; __awaiter(void 0, void 0, void 0, function* () {\n            response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;new-name&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        }), 2000);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc46acdf-c0d0-43f2-84d7-bbc1ff7392db&quot;,&quot;parentUUID&quot;:&quot;de1dcb06-78d7-49a5-ad20-3baf08b86ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5897ec6f-52af-471b-b381-258da75e93f8&quot;,&quot;0056b737-a465-45a1-b89c-5f3d1b84dd23&quot;,&quot;f015692b-f022-49f4-8502-078edf095ad1&quot;,&quot;5dbe2fb4-4346-4003-bf53-a09b5b0657f5&quot;,&quot;dce97c1f-22c6-46a5-afc1-869f7bf4e643&quot;,&quot;cc46acdf-c0d0-43f2-84d7-bbc1ff7392db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2027,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;2c376f54-acb7-43d5-b5f0-24f9353861cd&quot;,&quot;title&quot;:&quot;keys-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/keys-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/keys-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04a2af12-b5a7-4162-8b96-501d5a855364&quot;,&quot;parentUUID&quot;:&quot;2c376f54-acb7-43d5-b5f0-24f9353861cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4744b79b-3d13-4120-a866-282ec0f61c3d&quot;,&quot;parentUUID&quot;:&quot;2c376f54-acb7-43d5-b5f0-24f9353861cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fba9076e-fbe6-4f92-8cc4-3226567cc0c1&quot;,&quot;parentUUID&quot;:&quot;2c376f54-acb7-43d5-b5f0-24f9353861cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1202388-7f46-4220-a262-e6017004347d&quot;,&quot;parentUUID&quot;:&quot;2c376f54-acb7-43d5-b5f0-24f9353861cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve keys by glob patterns&quot;,&quot;fullTitle&quot;:&quot;keys-command test should retrieve keys by glob patterns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mset&#x27;, &#x27;firstname&#x27;, &#x27;Jack&#x27;, &#x27;lastname&#x27;, &#x27;Stuntman&#x27;, &#x27;age&#x27;, &#x27;35&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;keys&#x27;, &#x27;*name*&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;firstname&#x27;, &#x27;lastname&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;keys&#x27;, &#x27;a??&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;age&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;keys&#x27;, &#x27;*&#x27;]);\n        // NOTE: There does not appear to be a guarantee of order\n        chai_1.expect(response.sort()).to.eql([&#x27;age&#x27;, &#x27;firstname&#x27;, &#x27;lastname&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89473ffb-f3f9-4ee1-a372-5cd6032d6824&quot;,&quot;parentUUID&quot;:&quot;2c376f54-acb7-43d5-b5f0-24f9353861cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89473ffb-f3f9-4ee1-a372-5cd6032d6824&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;title&quot;:&quot;move-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/move-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/move-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10f29738-1b9d-4806-bee1-e080fd108774&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8e8bdee-1140-4ea5-9f82-5ba5c19db4c9&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a388809-b227-4450-b60a-c8fde717fd91&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;979400eb-8f1c-4eab-b5fa-9401b5dadcaf&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow target and source db to be the same&quot;,&quot;fullTitle&quot;:&quot;move-command test should not allow target and source db to be the same&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Even if source key does not exist\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR source and destination objects are the same&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d154c87-e5de-485d-9f67-7307489f4909&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also report ZERO when the target key already exists&quot;,&quot;fullTitle&quot;:&quot;move-command test should also report ZERO when the target key already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;database ZERO&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR source and destination objects are the same&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d11a49b4-70af-4031-9403-199abe4d3054&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should move a key from one database to another otherwise&quot;,&quot;fullTitle&quot;:&quot;move-command test should move a key from one database to another otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;14&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;14&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24640f7d-f172-48e9-bed1-2fdc5915b44c&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report error when target database is invalid and key exists&quot;,&quot;fullTitle&quot;:&quot;move-command test should report error when target database is invalid and key exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Database 14 is already selected\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;InvalidDb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR index out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c719286-3c8a-4078-bb8d-6c4364931202&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when the key does not exist in the current db&quot;,&quot;fullTitle&quot;:&quot;move-command test should return 0 when the key does not exist in the current db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, &#x27;nokey&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20730545-5e32-4592-87d8-55a05d0cf281&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when the key exists in both source and target db&quot;,&quot;fullTitle&quot;:&quot;move-command test should return 0 when the key exists in both source and target db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;nokey&#x27;, &#x27;db0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;nokey&#x27;, &#x27;db1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, &#x27;nokey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;db1&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;db0&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57fc0bb3-16b7-434f-b5e6-d97330b73d19&quot;,&quot;parentUUID&quot;:&quot;3999286d-b130-4629-9cca-8133415124dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5d154c87-e5de-485d-9f67-7307489f4909&quot;,&quot;d11a49b4-70af-4031-9403-199abe4d3054&quot;,&quot;24640f7d-f172-48e9-bed1-2fdc5915b44c&quot;,&quot;8c719286-3c8a-4078-bb8d-6c4364931202&quot;,&quot;20730545-5e32-4592-87d8-55a05d0cf281&quot;,&quot;57fc0bb3-16b7-434f-b5e6-d97330b73d19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;title&quot;:&quot;pexpire-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/pexpire-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/pexpire-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24af9ae3-b5a4-42e8-9736-7fad6ebcea99&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b3dd758-fb18-40e2-b73f-ffe13a972192&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75415821-9457-433b-86cd-fc4354a75ef8&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2f7d237-ab68-48cf-a8d2-c7b6ae01984f&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ZERO when expire called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test should report ZERO when expire called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;pexpire&#x27;, &#x27;no-key&#x27;, &#x27;1000&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0488df12-e9da-4e9c-beb6-4885a7b9419e&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require an integer value for the ttl parameter&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test should require an integer value for the ttl parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;mykey&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;pexpire&#x27;, &#x27;mykey&#x27;, &#x27;10.2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;pexpire&#x27;, &#x27;mykey&#x27;, &#x27;ten&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c37c6956-960c-44de-a59a-efa72714f8b3&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set the requested ttl on a key&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test should set the requested ttl on a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;pexpire&#x27;, &#x27;mykey&#x27;, &#x27;10000&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa6367db-d643-4eac-8f2c-5ad920b9a646&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should expire a key when we set a negative ttl&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test should expire a key when we set a negative ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Note that this is not consistent with documentation\n        response = yield common_test_1.sendCommand(client, [&#x27;pexpire&#x27;, &#x27;mykey&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e1d4197-591e-4850-8b77-23351baaf761&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with ZKEYs (and other key types - as yet untested)&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test should work with ZKEYs (and other key types - as yet untested)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;, &#x27;member&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n    common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zkey&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(1);\n        common_test_1.sendCommand(client, [&#x27;pexpire&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;])\n            .then((response) =&gt; {\n            chai_1.expect(response).to.equal(1);\n            setTimeout(() =&gt; {\n                common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zkey&#x27;])\n                    .then((response) =&gt; {\n                    chai_1.expect(response).to.equal(0, `Unexpected response ${response} should be ZERO`);\n                    done();\n                });\n            }, 2000);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a74f3c46-294d-4079-be75-178350a28b56&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should survive the RENAME operation&quot;,&quot;fullTitle&quot;:&quot;pexpire-command test should survive the RENAME operation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;rename-test&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;pexpire&#x27;, &#x27;rename-test&#x27;, &#x27;1000&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;rename-test&#x27;, &#x27;new-name&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;new-name&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;rename-test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        yield setTimeout(() =&gt; __awaiter(void 0, void 0, void 0, function* () {\n            response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;new-name&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        }), 2000);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce8a0d0b-1ced-40c0-adfc-f6e7069be75d&quot;,&quot;parentUUID&quot;:&quot;e47a3e67-9250-426b-826b-1347eb6f91b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0488df12-e9da-4e9c-beb6-4885a7b9419e&quot;,&quot;c37c6956-960c-44de-a59a-efa72714f8b3&quot;,&quot;aa6367db-d643-4eac-8f2c-5ad920b9a646&quot;,&quot;0e1d4197-591e-4850-8b77-23351baaf761&quot;,&quot;a74f3c46-294d-4079-be75-178350a28b56&quot;,&quot;ce8a0d0b-1ced-40c0-adfc-f6e7069be75d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2026,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e0ea01d1-b10d-4503-a4c8-4c336e70353c&quot;,&quot;title&quot;:&quot;randomkey-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/randomkey-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/randomkey-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9864c8e3-5241-4aa2-a839-f2419057305f&quot;,&quot;parentUUID&quot;:&quot;e0ea01d1-b10d-4503-a4c8-4c336e70353c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;011161dd-13e6-4e3f-90f9-b4a241142812&quot;,&quot;parentUUID&quot;:&quot;e0ea01d1-b10d-4503-a4c8-4c336e70353c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7693b3ba-3bab-45a0-bef5-64148b8178de&quot;,&quot;parentUUID&quot;:&quot;e0ea01d1-b10d-4503-a4c8-4c336e70353c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6232341-6c17-4374-9c14-2bc7da76aee5&quot;,&quot;parentUUID&quot;:&quot;e0ea01d1-b10d-4503-a4c8-4c336e70353c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when the database is empty&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test should return NIL when the database is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;randomkey&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92c91e52-81e3-4973-92cd-18f01da8ce37&quot;,&quot;parentUUID&quot;:&quot;e0ea01d1-b10d-4503-a4c8-4c336e70353c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return list, zkey, hash, and string keys without preference&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test should return list, zkey, hash, and string keys without preference&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const results = [];\n        response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, &#x27;hash&#x27;, &#x27;field&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;list&#x27;, &#x27;element&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;string&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        for (let i = 0; i &lt; 15; i++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;randomkey&#x27;]);\n            chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, response]);\n            chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n            if (results.indexOf(response) === -1) {\n                results.push(response);\n            }\n            if (results.length === 4) {\n                break;\n            }\n        }\n        chai_1.expect(results.length).to.be.greaterThan(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54d04f71-fb9d-4841-8794-4801f92833e9&quot;,&quot;parentUUID&quot;:&quot;e0ea01d1-b10d-4503-a4c8-4c336e70353c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92c91e52-81e3-4973-92cd-18f01da8ce37&quot;,&quot;54d04f71-fb9d-4841-8794-4801f92833e9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;title&quot;:&quot;rename-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/rename-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/rename-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58d8d20e-888f-40bc-9f2f-b84f5cb7ba00&quot;,&quot;parentUUID&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;424173c7-5f9d-43e5-a6c4-8e7194a614fc&quot;,&quot;parentUUID&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13ca2bc9-fea7-4833-afd4-5ddf1f806f13&quot;,&quot;parentUUID&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f33d86e5-21f3-4867-a422-2bfff146e857&quot;,&quot;parentUUID&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report an error when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;rename-command test should report an error when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;mykey&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR no such key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13d0a74e-a8a6-4b76-87d4-971f5e526437&quot;,&quot;parentUUID&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should rename a key&quot;,&quot;fullTitle&quot;:&quot;rename-command test should rename a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;mykey&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;mykey&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1510aac3-d24c-494a-9b09-6906655b7ea7&quot;,&quot;parentUUID&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overwrite an existing key without notice&quot;,&quot;fullTitle&quot;:&quot;rename-command test should overwrite an existing key without notice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;myoriginalkey&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;my-otherkey&#x27;, &#x27;myoriginalkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;myoriginalkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4448b060-3763-41b3-a357-ab9c3f97cdf9&quot;,&quot;parentUUID&quot;:&quot;66cf28a5-3b96-4b9e-8952-6a52fbe4b936&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13d0a74e-a8a6-4b76-87d4-971f5e526437&quot;,&quot;1510aac3-d24c-494a-9b09-6906655b7ea7&quot;,&quot;4448b060-3763-41b3-a357-ab9c3f97cdf9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;title&quot;:&quot;renamenx-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/renamenx-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/renamenx-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03854be6-cc47-409a-ae83-c7ded966aeb9&quot;,&quot;parentUUID&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d827d951-3376-49b3-a81c-f83396d86e7d&quot;,&quot;parentUUID&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58332d4e-e9aa-4779-ae48-cd9b91921c50&quot;,&quot;parentUUID&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7871dd77-cc8e-42c0-9979-d10b09bacc48&quot;,&quot;parentUUID&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report an error when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test should report an error when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;renamenx&#x27;, &#x27;mykey&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR no such key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6ee0936-0e64-497f-a50f-be3072b638d5&quot;,&quot;parentUUID&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when attempting renamenx with source = destination&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test should return 0 when attempting renamenx with source = destination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;renamenx&#x27;, &#x27;key&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e55de57-021c-4514-b671-b0928532d7f5&quot;,&quot;parentUUID&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should rename a key when requested&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test should rename a key when requested&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;renamenx&#x27;, &#x27;key&#x27;, &#x27;newkey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;newkey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d07cae51-8385-41cc-bc30-b639f13af55d&quot;,&quot;parentUUID&quot;:&quot;ad836c6b-b73b-4286-bcc8-a6510db8a8e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6ee0936-0e64-497f-a50f-be3072b638d5&quot;,&quot;3e55de57-021c-4514-b671-b0928532d7f5&quot;,&quot;d07cae51-8385-41cc-bc30-b639f13af55d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;title&quot;:&quot;ttl-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/ttl-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/ttl-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a couple - second TTL to validate exists respects TTL\n    common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;value&#x27;, &#x27;EX&#x27;, &#x27;30&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dcd5a72-91ce-4596-bd05-fe55a1332a70&quot;,&quot;parentUUID&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5ad0e4e-62db-44f7-a224-91547eaa0f7c&quot;,&quot;parentUUID&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da9b84e9-f33c-4a67-bc41-08886adc6dd2&quot;,&quot;parentUUID&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a21bd6cd-9779-45c2-ad00-8733a06b5dea&quot;,&quot;parentUUID&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report -2 when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;ttl-command test should report -2 when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:81,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ttl&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(-2);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48cd25a9-2178-4b59-b9f7-4a220f8ceecf&quot;,&quot;parentUUID&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return -1 when the key exists but does not have a ttl&quot;,&quot;fullTitle&quot;:&quot;ttl-command test should return -1 when the key exists but does not have a ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;newkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;ttl&#x27;, &#x27;newkey&#x27;]);\n        chai_1.expect(response).to.equal(-1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;659367ed-0685-4590-b8a2-6ac58e5b647c&quot;,&quot;parentUUID&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the current ttl in seconds when available&quot;,&quot;fullTitle&quot;:&quot;ttl-command test should return the current ttl in seconds when available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ttl&#x27;, &#x27;ttlkey&#x27;]);\n        chai_1.expect(response).to.be.greaterThan(0);\n        chai_1.expect(response).to.be.lessThan(31);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dec2b9c-a46c-4c0a-aa90-2548a9f1e90a&quot;,&quot;parentUUID&quot;:&quot;08df56b3-a700-47dc-9542-7dc1a886a87b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48cd25a9-2178-4b59-b9f7-4a220f8ceecf&quot;,&quot;659367ed-0685-4590-b8a2-6ac58e5b647c&quot;,&quot;7dec2b9c-a46c-4c0a-aa90-2548a9f1e90a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:85,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d373249e-3a87-4291-9f40-91a378f06051&quot;,&quot;title&quot;:&quot;type-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/type-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/type-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78f0719a-92f1-4385-9c15-80e53277e4ec&quot;,&quot;parentUUID&quot;:&quot;d373249e-3a87-4291-9f40-91a378f06051&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c1ee679-dad1-4dd7-a938-de66866e87cd&quot;,&quot;parentUUID&quot;:&quot;d373249e-3a87-4291-9f40-91a378f06051&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;323a495e-f39d-46e5-bbbc-972d80ca2889&quot;,&quot;parentUUID&quot;:&quot;d373249e-3a87-4291-9f40-91a378f06051&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f5f9c1d-3444-470a-b133-c6af3110b2a4&quot;,&quot;parentUUID&quot;:&quot;d373249e-3a87-4291-9f40-91a378f06051&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report the type of key&quot;,&quot;fullTitle&quot;:&quot;type-command test should report the type of key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;string-key&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;string-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;string&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;list-key&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;list-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;list&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;set-key&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;set-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;set&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;zset&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;never&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;none&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84d2a80e-3e93-46db-b831-70fc913e0b98&quot;,&quot;parentUUID&quot;:&quot;d373249e-3a87-4291-9f40-91a378f06051&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84d2a80e-3e93-46db-b831-70fc913e0b98&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;title&quot;:&quot;blpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/blpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/blpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0ea4740-1915-444b-b79a-7e280cae5dcd&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d80729f1-c067-48e9-8455-7a12936f340c&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa007ad1-490d-4803-a4b5-52db29333496&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;731ae450-a5bd-4854-9391-e57ef3ab80a8&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1003,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;no-key&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9081e68c-9132-42a9-ba48-b4e9dcc9a361&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should wait for a list to exist and return the list name and value&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should wait for a list to exist and return the list name and value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4553b02f-9db6-4ca9-b75d-99d988897c05&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the list name and HEAD value&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should return the list name and HEAD value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;no-key2&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;no-key2&#x27;, &#x27;first&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;no-key2&#x27;, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c8b7b49-811c-45dc-9407-38f6a8199333&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support blocking lpop against multiple lists in one call&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should support blocking lpop against multiple lists in one call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;list1&#x27;, &#x27;list2&#x27;, &#x27;list3&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;list2&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;list2&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33418695-4708-42f7-9aac-bd6f44ff212f&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pushd value when it already exists even if a timeout is set&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should return the pushd value when it already exists even if a timeout is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const uniqueKey = `poplpush${new Date().getTime()}`;\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, uniqueKey, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n    common_test_1.sendCommand(client, [&#x27;blpop&#x27;, uniqueKey, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.eql([uniqueKey, &#x27;first&#x27;]);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4a256e7-fb20-4a4e-95e3-4be78bf8f85d&quot;,&quot;parentUUID&quot;:&quot;87f9d66e-7a73-4a8a-bcd6-f8bdf0c781e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9081e68c-9132-42a9-ba48-b4e9dcc9a361&quot;,&quot;4553b02f-9db6-4ca9-b75d-99d988897c05&quot;,&quot;3c8b7b49-811c-45dc-9407-38f6a8199333&quot;,&quot;33418695-4708-42f7-9aac-bd6f44ff212f&quot;,&quot;c4a256e7-fb20-4a4e-95e3-4be78bf8f85d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1027,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;title&quot;:&quot;brpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/brpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/brpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b694b5a6-94b7-4812-a7b1-d7f9c6f45092&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d306b102-8b22-4ad2-a8ce-f89debf55e34&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64303b73-eff4-41ec-9c3e-46f1ffd3b8b7&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;656a455c-018b-41a9-8636-2808e535b9b7&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1008,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;no-key&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7340d1d0-6e32-4d3e-b3db-6e7bd695bcf4&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should wait for a list to exist and return the list name and value&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should wait for a list to exist and return the list name and value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1beb6b6a-83c9-4bbc-8fce-3f84f3424e54&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the list name and TAIL value&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should return the list name and TAIL value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;flushall&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;no-key2&#x27;, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.eql([&#x27;no-key2&#x27;, &#x27;first&#x27;]);\n        done();\n    });\n    common_test_1.sendCommand(new net.Socket(), [&#x27;rpush&#x27;, &#x27;no-key2&#x27;, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(3);\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39e0a207-f31a-4fc5-94e9-be00c39d2f9d&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support blocking rpop against multiple lists in one call&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should support blocking rpop against multiple lists in one call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;list1&#x27;, &#x27;list2&#x27;, &#x27;list3&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;list3&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;list3&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82d77f37-33c7-44fc-a7d8-de00fca116fc&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pushd value when it already exists even if a timeout is set&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should return the pushd value when it already exists even if a timeout is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const uniqueKey = `poprpush${new Date().getTime()}`;\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;rpush&#x27;, uniqueKey, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n    common_test_1.sendCommand(client, [&#x27;brpop&#x27;, uniqueKey, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.eql([uniqueKey, &#x27;first&#x27;]);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b0e4089-bcd4-4083-8abd-0ae4083b8b8a&quot;,&quot;parentUUID&quot;:&quot;aeff1aa0-0ee7-4db4-ac09-1203574f786a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7340d1d0-6e32-4d3e-b3db-6e7bd695bcf4&quot;,&quot;1beb6b6a-83c9-4bbc-8fce-3f84f3424e54&quot;,&quot;39e0a207-f31a-4fc5-94e9-be00c39d2f9d&quot;,&quot;82d77f37-33c7-44fc-a7d8-de00fca116fc&quot;,&quot;0b0e4089-bcd4-4083-8abd-0ae4083b8b8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1023,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;title&quot;:&quot;brpoplpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/brpoplpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/brpoplpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e68227ed-537a-459a-8cdb-117efb096fc8&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        sinon.createSandbox();\n        yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9ffaac4-60b7-4e87-aab0-90b92692d631&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;333af22a-43f1-41f3-a2b9-4871cb0545f3&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cfdcf63-1cd9-40a5-bc01-8e41a9fa4d1c&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when destination does not exist and timeout expires&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test should return NIL when destination does not exist and timeout expires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2003,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;src&#x27;, &#x27;dst&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;447431f6-b40f-4e22-889c-107c3af1fdbf&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the poplpushed value when lpush is called&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test should return the poplpushed value when lpush is called&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;poplpushkey&#x27;, &#x27;poplpopkey&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;value1&#x27;);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;poplpushkey&#x27;, &#x27;value1&#x27;, &#x27;value2&#x27;, &#x27;value3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eaf82b6f-64e5-4554-92d9-1e034d9b3b82&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pushd value when it already exists even if a timeout is set&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test should return the pushd value when it already exists even if a timeout is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const uniqueKey = `poplpush${new Date().getTime()}`;\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, uniqueKey, &#x27;value1&#x27;, &#x27;value2&#x27;, &#x27;value3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n    common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, uniqueKey, &#x27;poplpopkey&#x27;, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(&#x27;value1&#x27;);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08a06781-4951-490b-9bc6-c685cbdf8f5f&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should wait indefinitely (28 days) for a value to be available&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test should wait indefinitely (28 days) for a value to be available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4009,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const startTime = process.hrtime.bigint();\ncommon_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;newpoplpushkey&#x27;, &#x27;newpoplpopkey&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;newvalue1&#x27;);\n    const endTime = process.hrtime.bigint();\n    console.log(`Duration is ${Number(endTime) - Number(startTime)}`);\n    chai_1.expect(Number(endTime - startTime)).to.be.greaterThan(4000000000);\n    done();\n});\nsetTimeout(() =&gt; {\n    common_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;newpoplpushkey&#x27;, &#x27;newvalue1&#x27;, &#x27;newvalue2&#x27;, &#x27;newvalue3&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(3);\n    });\n}, 4000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75a98f0a-3960-4883-9907-717540ba9575&quot;,&quot;parentUUID&quot;:&quot;7ff53bd4-5af4-4dbc-96ee-7796f8c7d70e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;447431f6-b40f-4e22-889c-107c3af1fdbf&quot;,&quot;eaf82b6f-64e5-4554-92d9-1e034d9b3b82&quot;,&quot;08a06781-4951-490b-9bc6-c685cbdf8f5f&quot;,&quot;75a98f0a-3960-4883-9907-717540ba9575&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6018,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;title&quot;:&quot;lindex-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lindex-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lindex-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d3dbec0-4eba-450d-9afd-80cc9912a0f7&quot;,&quot;parentUUID&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8dd37097-0f3a-446c-a710-56bd8c662ffa&quot;,&quot;parentUUID&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;011f0c46-30cf-414f-95b7-5b02b86d9caf&quot;,&quot;parentUUID&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4481e1f2-7ce3-48b9-814a-13b90c69c80c&quot;,&quot;parentUUID&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when lindex called with invalid index on non-existent key&quot;,&quot;fullTitle&quot;:&quot;lindex-command test should report NIL when lindex called with invalid index on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, &#x27;no-key&#x27;, &#x27;negative one thousand&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7c3ad25-de13-49a0-9ae3-c6f88f0cbc19&quot;,&quot;parentUUID&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report ERR when attempting to get lindex of non-list key&quot;,&quot;fullTitle&quot;:&quot;lindex-command test should report ERR when attempting to get lindex of non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, &#x27;lkey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5607a014-fc40-41f3-baa6-78f2d07fc0b7&quot;,&quot;parentUUID&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the correct key at an index&quot;,&quot;fullTitle&quot;:&quot;lindex-command test should return the correct key at an index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `lkey-${new Date().getTime()}`;\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-100&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;a1&#x27;, &#x27;b2&#x27;, &#x27;c3&#x27;]);\n        chai_1.expect(response).to.equal(6);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-6&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-7&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;100&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;803e4528-c94f-49a7-a287-099b973ca007&quot;,&quot;parentUUID&quot;:&quot;4b14aa8e-36d3-4a9d-be09-db615f8edafa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e7c3ad25-de13-49a0-9ae3-c6f88f0cbc19&quot;,&quot;5607a014-fc40-41f3-baa6-78f2d07fc0b7&quot;,&quot;803e4528-c94f-49a7-a287-099b973ca007&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;title&quot;:&quot;llen-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/llen-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/llen-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fb36661-73b4-438d-b1ef-ef5604fe7d91&quot;,&quot;parentUUID&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6590f011-30e4-4e7a-a61e-f6af6fe78979&quot;,&quot;parentUUID&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;115248aa-8d20-47f0-980e-f3f854ef831d&quot;,&quot;parentUUID&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab36056b-0088-43c1-821d-249319e11927&quot;,&quot;parentUUID&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report 0 when llen called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;llen-command test should report 0 when llen called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f88bae4c-a5bb-449d-b289-eac00d29b306&quot;,&quot;parentUUID&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report WRONGTYPE when attempting to get llen of non-list key&quot;,&quot;fullTitle&quot;:&quot;llen-command test should report WRONGTYPE when attempting to get llen of non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;lkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfe3d054-3aec-4b4f-a698-1854232abfbe&quot;,&quot;parentUUID&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the correct list length&quot;,&quot;fullTitle&quot;:&quot;llen-command test should return the correct list length&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `lkey-${new Date().getTime()}`;\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(null);\n        // The list goes away when the last element is popped\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;-6&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;187997b0-0be5-4f80-8fde-3dcfe24e157a&quot;,&quot;parentUUID&quot;:&quot;3a3e1091-fb76-4bd0-b3c1-6810f8b218f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f88bae4c-a5bb-449d-b289-eac00d29b306&quot;,&quot;bfe3d054-3aec-4b4f-a698-1854232abfbe&quot;,&quot;187997b0-0be5-4f80-8fde-3dcfe24e157a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b769f23e-36b3-4dc1-9a89-fc7d84b79d62&quot;,&quot;title&quot;:&quot;lpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7b98e6c-55b0-4320-9e8f-9258ac830525&quot;,&quot;parentUUID&quot;:&quot;b769f23e-36b3-4dc1-9a89-fc7d84b79d62&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;559ab74e-ec22-47ce-869a-02587ce1567f&quot;,&quot;parentUUID&quot;:&quot;b769f23e-36b3-4dc1-9a89-fc7d84b79d62&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5c1103a-e39e-4deb-b8b1-9cc3a1c8474b&quot;,&quot;parentUUID&quot;:&quot;b769f23e-36b3-4dc1-9a89-fc7d84b79d62&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;231e1002-1421-40f8-b8d8-a4bef36b402b&quot;,&quot;parentUUID&quot;:&quot;b769f23e-36b3-4dc1-9a89-fc7d84b79d62&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when lpop called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;lpop-command test should report NIL when lpop called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42cb8787-f34d-4225-8824-985b65e545d4&quot;,&quot;parentUUID&quot;:&quot;b769f23e-36b3-4dc1-9a89-fc7d84b79d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return values from the left side of a list&quot;,&quot;fullTitle&quot;:&quot;lpop-command test should return values from the left side of a list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, testKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;d&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(null);\n        // The list goes away when the last element is removed\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, testKey]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18e03a30-c9b9-412a-9719-d702c6464c43&quot;,&quot;parentUUID&quot;:&quot;b769f23e-36b3-4dc1-9a89-fc7d84b79d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42cb8787-f34d-4225-8824-985b65e545d4&quot;,&quot;18e03a30-c9b9-412a-9719-d702c6464c43&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;title&quot;:&quot;lpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d9d4a3a-e395-49c2-8d69-10438138184c&quot;,&quot;parentUUID&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c78dc568-a55f-46ae-8221-a8cc49cd9df2&quot;,&quot;parentUUID&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9b02315-a8d6-41b3-97e6-39dfb298d434&quot;,&quot;parentUUID&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4236f47b-761a-4cd5-88f5-af9dc52ddf14&quot;,&quot;parentUUID&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ERR when attempting to lpush to a non-list key&quot;,&quot;fullTitle&quot;:&quot;lpush-command test should report ERR when attempting to lpush to a non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;lkey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40c48910-aa83-4748-8ea9-e7053f06992f&quot;,&quot;parentUUID&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a list if it doesn&#x27;t already exist&quot;,&quot;fullTitle&quot;:&quot;lpush-command test should create a list if it doesn&#x27;t already exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, testKey]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, testKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        // The list is now &#x27;c&#x27;, &#x27;b&#x27;, &#x27;a&#x27;\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, testKey]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b66b2d37-2fc0-4c70-a190-0581ba5f387b&quot;,&quot;parentUUID&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the list in a predicatble order&quot;,&quot;fullTitle&quot;:&quot;lpush-command test should have created the list in a predicatble order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, testKey, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, testKey]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8169895-fe37-48a0-b056-b217f01b0ec6&quot;,&quot;parentUUID&quot;:&quot;d09274bc-c601-4c2d-a613-fb7936a21239&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40c48910-aa83-4748-8ea9-e7053f06992f&quot;,&quot;b66b2d37-2fc0-4c70-a190-0581ba5f387b&quot;,&quot;a8169895-fe37-48a0-b056-b217f01b0ec6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;title&quot;:&quot;lrange-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lrange-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lrange-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59bcb21b-d771-478f-a9d7-8652b346dc6e&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62c2e8b4-39aa-4a22-a181-329277d96322&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2883f392-6c23-4696-947c-86596b07af19&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75997ef5-8d8d-4952-a457-c1a29a84dc18&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;return an empty list when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;lrange-command test return an empty list when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d3d2c84-0876-4f3d-9dbc-716cded7f6cf&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report an error when start or stop index are invalid&quot;,&quot;fullTitle&quot;:&quot;lrange-command test should report an error when start or stop index are invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;negative one&#x27;, &#x27;-2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;, &#x27;negative two&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;-1&#x27;, &#x27;-100&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e7dde0a-5f48-445d-bf5f-3db3c2b3bf5d&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return predictable results&quot;,&quot;fullTitle&quot;:&quot;lrange-command test should return predictable results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;newlist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;newlist&#x27;, &#x27;world&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;newlist&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;world&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e965cfa9-3ba6-4664-8545-d4ee93361330&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reproduce the results from the redis documentation&quot;,&quot;fullTitle&quot;:&quot;lrange-command test should reproduce the results from the redis documentation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;doclist&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;doclist&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;doclist&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;0&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;-3&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;-100&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;5&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;849ebdd7-4b7b-42e9-94ee-af84bfe7ca04&quot;,&quot;parentUUID&quot;:&quot;84bd23eb-fd6e-467c-a0de-2599508f4d10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d3d2c84-0876-4f3d-9dbc-716cded7f6cf&quot;,&quot;8e7dde0a-5f48-445d-bf5f-3db3c2b3bf5d&quot;,&quot;e965cfa9-3ba6-4664-8545-d4ee93361330&quot;,&quot;849ebdd7-4b7b-42e9-94ee-af84bfe7ca04&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;title&quot;:&quot;lrem-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lrem-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lrem-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c834c331-6c59-4e3e-8bad-677e162550c7&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fd4b72a-0c5b-47de-874e-68990208f6ec&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7f456db-20fa-4571-b59b-ec1ec9877dac&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04b120a3-b73b-4cc2-8941-9bdf9e501125&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should NOT report 0 when lrem called with invalid non-existent key&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should NOT report 0 when lrem called with invalid non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;no-key&#x27;, &#x27;negative one thousand&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf751afb-69c0-4b26-be86-4e794b9ce95e&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report ERR when lrem called against existing key with invalid count argument&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should report ERR when lrem called against existing key with invalid count argument&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;lrem&#x27;, &#x27;akey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;lrem&#x27;, &#x27;negative one thousand&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;948f8d00-b0d6-42fd-86a1-425d4ab51c13&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report 0 when lrem called with valid arguments and non-existing element&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should report 0 when lrem called with valid arguments and non-existing element&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;lrem&#x27;, &#x27;0&#x27;, &#x27;does not exist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6dfacfe-91e0-495e-b427-1d533c1b7273&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should use negative index counters&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should use negative index counters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;foo&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;-2&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;foo&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6f37539-a91a-423e-a8f0-b7f8261cc8ea&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a ZERO result when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should return a ZERO result when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;otherlist&#x27;, &#x27;1&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45d05152-4081-401e-93ea-8e01db5c6ff0&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove every matchin element when count is 0&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove every matchin element when count is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;foo&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(3);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc51b73a-8e78-4b5c-b414-409bbbc91f90&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove the list when all elements are gone&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove the list when all elements are gone&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;foo&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53b0180e-5308-41c3-9754-1c11a1ee3480&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove only the number of requested elements when count &gt; 0&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove only the number of requested elements when count &gt; 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;calibrate&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;1&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fe67b9e-4d70-4061-858e-7d6f98770c56&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should default to startIndex ZERO when it is less than ZERO&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should default to startIndex ZERO when it is less than ZERO&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let i = 0; i &lt; 10; i++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;newlist&#x27;, `${i}`]);\n            chai_1.expect(response).to.equal(i + 1);\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;newlist&#x27;, &#x27;-100&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;newlist&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;newlist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;892a5cf3-a70f-496b-bcb4-85cf27a718cc&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove the list when start &gt; end or start &gt; llen&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove the list when start &gt; end or start &gt; llen&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;newlist&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;newlist&#x27;, &#x27;10&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;newlist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5faeaba6-0508-4398-9bd4-ee66c34106af&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should properly handle a negative endIndex&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should properly handle a negative endIndex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let i = 0; i &lt; 7; i++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;neglist&#x27;, `${i}`]);\n            chai_1.expect(response).to.equal(i + 1);\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;neglist&#x27;, &#x27;-100&#x27;, &#x27;-3&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;neglist&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5eb7d61f-c4fe-4ee1-99bb-70ca87263cd1&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove the key when abs(endIndex) is &gt; llen&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove the key when abs(endIndex) is &gt; llen&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;neglist&#x27;, &#x27;-100&#x27;, &#x27;-6&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;neglist&#x27;]);\n        chai_1.expect(response).to.eql(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68291332-684f-4f0e-96da-3cafcafd3d61&quot;,&quot;parentUUID&quot;:&quot;18ed79a4-7765-436e-b720-965d68fb313e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bf751afb-69c0-4b26-be86-4e794b9ce95e&quot;,&quot;948f8d00-b0d6-42fd-86a1-425d4ab51c13&quot;,&quot;e6dfacfe-91e0-495e-b427-1d533c1b7273&quot;,&quot;c6f37539-a91a-423e-a8f0-b7f8261cc8ea&quot;,&quot;45d05152-4081-401e-93ea-8e01db5c6ff0&quot;,&quot;bc51b73a-8e78-4b5c-b414-409bbbc91f90&quot;,&quot;53b0180e-5308-41c3-9754-1c11a1ee3480&quot;,&quot;9fe67b9e-4d70-4061-858e-7d6f98770c56&quot;,&quot;892a5cf3-a70f-496b-bcb4-85cf27a718cc&quot;,&quot;5faeaba6-0508-4398-9bd4-ee66c34106af&quot;,&quot;5eb7d61f-c4fe-4ee1-99bb-70ca87263cd1&quot;,&quot;68291332-684f-4f0e-96da-3cafcafd3d61&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;title&quot;:&quot;lset-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5a6fce0-c564-409b-804c-b642a8829511&quot;,&quot;parentUUID&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86663931-b6d4-4548-bdef-e75eb5c91c8a&quot;,&quot;parentUUID&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ae9d716-7a9a-4ab0-98ea-ef693fbf9543&quot;,&quot;parentUUID&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32c0d2fb-5368-4a3d-82ed-3fcbcaeba019&quot;,&quot;parentUUID&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should fail when a key does not exist&quot;,&quot;fullTitle&quot;:&quot;lset-command test should fail when a key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lset&#x27;, &#x27;no-key&#x27;, &#x27;negative one thousand&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR no such key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f85e97d1-2fb2-4785-9c05-9e8aed422d8d&quot;,&quot;parentUUID&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should replace a valid index&quot;,&quot;fullTitle&quot;:&quot;lset-command test should replace a valid index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, testkey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lset&#x27;, testkey, &#x27;-1&#x27;, &#x27;z&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, testkey, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;z&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1373385-ef78-40c9-a105-8a54c28857b3&quot;,&quot;parentUUID&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should recognize invalid indexes&quot;,&quot;fullTitle&quot;:&quot;lset-command test should recognize invalid indexes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lset&#x27;, testkey, &#x27;invalid&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad1cba81-2f43-49a2-8218-49287901358b&quot;,&quot;parentUUID&quot;:&quot;a08f8dc3-8d09-45cf-8f09-36089b4de30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f85e97d1-2fb2-4785-9c05-9e8aed422d8d&quot;,&quot;d1373385-ef78-40c9-a105-8a54c28857b3&quot;,&quot;ad1cba81-2f43-49a2-8218-49287901358b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;title&quot;:&quot;ltrim-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/ltrim-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/ltrim-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b03cb244-d812-4978-b978-121abd007deb&quot;,&quot;parentUUID&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bcf8e24-edbd-4c40-afac-921c4754222e&quot;,&quot;parentUUID&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d598289-4443-4a38-81e1-07dbffb98da4&quot;,&quot;parentUUID&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b5dc507-fc12-47c3-a5bf-53c2ba1b9a67&quot;,&quot;parentUUID&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report OK when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test should report OK when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4121c84e-fbfe-4df3-b788-40009ee318e5&quot;,&quot;parentUUID&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim a list to the requested size or less&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test should trim a list to the requested size or less&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;calibrate&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;mylist&#x27;, &#x27;1&#x27;, &#x27;4&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;mylist&#x27;, &#x27;-2&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;calibrate&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05956028-0c88-451c-9bdd-e053b4799c62&quot;,&quot;parentUUID&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject an invalid start index&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test should reject an invalid start index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;testlist&#x27;, &#x27;wrong&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94faf159-fd55-4f2b-9d90-4f1c383aba96&quot;,&quot;parentUUID&quot;:&quot;acc5de6d-b6f5-4a62-84a7-bbbfa8e395e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4121c84e-fbfe-4df3-b788-40009ee318e5&quot;,&quot;05956028-0c88-451c-9bdd-e053b4799c62&quot;,&quot;94faf159-fd55-4f2b-9d90-4f1c383aba96&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;43c91e7c-b124-4ba3-8dd5-fdef13e7e69c&quot;,&quot;title&quot;:&quot;rpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/rpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/rpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a73a1042-a479-4584-bdd0-098b7a496651&quot;,&quot;parentUUID&quot;:&quot;43c91e7c-b124-4ba3-8dd5-fdef13e7e69c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5b50c2d-0d74-4717-88c5-89cb83994045&quot;,&quot;parentUUID&quot;:&quot;43c91e7c-b124-4ba3-8dd5-fdef13e7e69c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ea649b5-1f47-453a-babe-301b79a40f3c&quot;,&quot;parentUUID&quot;:&quot;43c91e7c-b124-4ba3-8dd5-fdef13e7e69c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81c0f9c9-ea62-48f0-9513-d12ad3375a63&quot;,&quot;parentUUID&quot;:&quot;43c91e7c-b124-4ba3-8dd5-fdef13e7e69c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when rpop called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;rpop-command test should report NIL when rpop called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c66e5be-95e9-4245-929e-096df325de20&quot;,&quot;parentUUID&quot;:&quot;43c91e7c-b124-4ba3-8dd5-fdef13e7e69c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c66e5be-95e9-4245-929e-096df325de20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;title&quot;:&quot;rpoplpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/rpoplpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/rpoplpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4d289ba-9472-47e1-bef0-dd8cabf1051b&quot;,&quot;parentUUID&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09766a05-d82e-4da8-93fb-7abae5f617cf&quot;,&quot;parentUUID&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5badd084-d38f-480f-8002-45f7ac70f0e6&quot;,&quot;parentUUID&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6da91dbf-a225-421e-be9f-b0e2f8099564&quot;,&quot;parentUUID&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when destination does not exist&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test should return NIL when destination does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpoplpush&#x27;, &#x27;src&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e841288-135d-4771-af79-bf1d43c37390&quot;,&quot;parentUUID&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should rotate a list when src and dst are the same&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test should rotate a list when src and dst are the same&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;src&#x27;, &#x27;a&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;src&#x27;, &#x27;b&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;src&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;src&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpoplpush&#x27;, &#x27;src&#x27;, &#x27;src&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;src&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;, &#x27;a&#x27;, &#x27;b&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7b8414b-8e7c-4b56-9a21-6e79041ae1a3&quot;,&quot;parentUUID&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create the target list if it does not exist&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test should create the target list if it does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpoplpush&#x27;, &#x27;src&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;src&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;, &#x27;a&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;dst&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;b&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e25db20d-1612-4bdc-8526-c81606578d7b&quot;,&quot;parentUUID&quot;:&quot;d68d141b-df54-4c85-8bab-9cd6e9107456&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e841288-135d-4771-af79-bf1d43c37390&quot;,&quot;d7b8414b-8e7c-4b56-9a21-6e79041ae1a3&quot;,&quot;e25db20d-1612-4bdc-8526-c81606578d7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;22032df0-9797-4879-9c3c-6de16147e779&quot;,&quot;title&quot;:&quot;rpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/rpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/rpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68549fd6-130c-4d8d-ad7a-927be7d5f7b8&quot;,&quot;parentUUID&quot;:&quot;22032df0-9797-4879-9c3c-6de16147e779&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcd8219c-09d0-48b9-b2a4-f0db67f0e814&quot;,&quot;parentUUID&quot;:&quot;22032df0-9797-4879-9c3c-6de16147e779&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0e808b3-255f-4251-9cfd-16fcb7575c3b&quot;,&quot;parentUUID&quot;:&quot;22032df0-9797-4879-9c3c-6de16147e779&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f725d4fc-afd0-4b70-8058-c7bc203dbe86&quot;,&quot;parentUUID&quot;:&quot;22032df0-9797-4879-9c3c-6de16147e779&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ERR when attempting to rpush to a non-list key&quot;,&quot;fullTitle&quot;:&quot;rpush-command test should report ERR when attempting to rpush to a non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;lkey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c32baf7-987d-4138-a35c-ccbec8b63379&quot;,&quot;parentUUID&quot;:&quot;22032df0-9797-4879-9c3c-6de16147e779&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c32baf7-987d-4138-a35c-ccbec8b63379&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;title&quot;:&quot;multi command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/multi-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/multi-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67c6ad90-4f26-4b7a-ad88-f923cab66f6a&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ff00f53-0719-48a7-9a5d-417e876a212b&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2461a34c-cced-4c24-8b7a-6a77d074c8b4&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4cadb00-7845-4cd9-a794-8fd33c3c245c&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow nested MULTI invocations&quot;,&quot;fullTitle&quot;:&quot;multi command test should not allow nested MULTI invocations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR MULTI calls can not be nested&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4cc18f4-db98-40b4-9da0-1028e565812d&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect the DISCARD command&quot;,&quot;fullTitle&quot;:&quot;multi command test should respect the DISCARD command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;discard&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e53d142f-6f7c-4ac3-8bde-4ab939938990&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow DISCARD without MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should not allow DISCARD without MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;discard&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR DISCARD without MULTI&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e24d391b-bb50-4015-8cc9-1adc14608669&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should continue to validate commands after MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should continue to validate commands after MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;unknown&#x27;, &#x27;command&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR unknown command `unknown`, with args beginning with: `command`, &#x27;, `${response}`);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;880e9474-9f6d-4cee-b0f7-cc778e5a4c37&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should EXECABORT from a previous error&quot;,&quot;fullTitle&quot;:&quot;multi command test should EXECABORT from a previous error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: EXECABORT Transaction discarded because of previous errors.&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6847fe9c-9ca7-4688-9384-afeda41d720e&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should queue a set of commands when there is no intervening error&quot;,&quot;fullTitle&quot;:&quot;multi command test should queue a set of commands when there is no intervening error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.eql([3]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a69bd1bf-9c12-4bcd-875e-011e86269a30&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reset transaction state after executing commands&quot;,&quot;fullTitle&quot;:&quot;multi command test should reset transaction state after executing commands&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;discard&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c9d04fd-12bd-4504-91a9-b524ec5c2eff&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the results of multiple commands in the order provided&quot;,&quot;fullTitle&quot;:&quot;multi command test should return the results of multiple commands in the order provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;test&#x27;, &#x27;dest&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;three&#x27;, &#x27;two&#x27;, &#x27;one&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dest&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b7e8e25-299f-49aa-8f87-7ca2cbc4ef75&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate the behavior of brpoplpush&quot;,&quot;fullTitle&quot;:&quot;multi command test should validate the behavior of brpoplpush&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;three&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;two&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;test&#x27;, &#x27;dest&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;one&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;917312ba-bd96-4f5f-a2d2-bfff3e18d9e8&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when EXEC issued without MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should fail when EXEC issued without MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR EXEC without MULTI&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3be21b6-caac-4c67-890a-257e47608f7c&quot;,&quot;parentUUID&quot;:&quot;94012d47-9681-4361-9fc2-e2e6db652b36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4cc18f4-db98-40b4-9da0-1028e565812d&quot;,&quot;e53d142f-6f7c-4ac3-8bde-4ab939938990&quot;,&quot;e24d391b-bb50-4015-8cc9-1adc14608669&quot;,&quot;880e9474-9f6d-4cee-b0f7-cc778e5a4c37&quot;,&quot;6847fe9c-9ca7-4688-9384-afeda41d720e&quot;,&quot;a69bd1bf-9c12-4bcd-875e-011e86269a30&quot;,&quot;0c9d04fd-12bd-4504-91a9-b524ec5c2eff&quot;,&quot;6b7e8e25-299f-49aa-8f87-7ca2cbc4ef75&quot;,&quot;917312ba-bd96-4f5f-a2d2-bfff3e18d9e8&quot;,&quot;e3be21b6-caac-4c67-890a-257e47608f7c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;title&quot;:&quot;script-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/script-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/script-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38f0b8e6-f7ba-42ef-a8fa-f4a2a3cebcb6&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4a5e9d0-1f10-49ed-89fe-87ac64286856&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;217e0f65-b457-446a-aae8-7945e4cc7f6e&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c447974-8459-4a85-9111-4e3e5b8c6325&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should calcuclate the correct sha1 of a script and store the script&quot;,&quot;fullTitle&quot;:&quot;script-command test should calcuclate the correct sha1 of a script and store the script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;exists&#x27;, sha1]);\n        chai_1.expect(response).to.eql([0]);\n        // validate failure on unparseable script\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;load&#x27;, code]);\n        chai_1.expect(response).to.match(/ReplyError: ERR .*/);\n        // validate success on parseable script\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;load&#x27;, `${code}}`]);\n        chai_1.expect(response).to.equal(sha1);\n        // validate a script is persisted\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;exists&#x27;, sha1]);\n        chai_1.expect(response).to.eql([1]);\n        // validate response to unknown sub command\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;test&#x27;, sha1]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR Unknown subcommand or wrong number of arguments for \\&#x27;test\\&#x27;. Try SCRIPT HELP.&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2545561d-cf65-4b41-8a33-8c9c7d21db57&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should evaluate a loaded lua script using evalsha&quot;,&quot;fullTitle&quot;:&quot;script-command test should evaluate a loaded lua script using evalsha&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Validate that NOSCRIPT is triggered\n        response = yield common_test_1.sendCommand(client, [&#x27;evalsha&#x27;, `${sha1}xx`, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: NOSCRIPT No matching script. Please use EVAL.&#x27;);\n        // Validate that param 1 cannot be negative\n        response = yield common_test_1.sendCommand(client, [&#x27;evalsha&#x27;, sha1, &#x27;-2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR Number of keys can\\&#x27;t be negative&#x27;);\n        // Validate that param 1 cannot be text\n        response = yield common_test_1.sendCommand(client, [&#x27;evalsha&#x27;, sha1, &#x27;two&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ec8765e-6dec-4dd2-81af-2a0cdb22b901&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should execute a simple script&quot;,&quot;fullTitle&quot;:&quot;script-command test should execute a simple script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Validate that a simple script can be processed\n        response = yield common_test_1.sendCommand(client, [&#x27;EVAL&#x27;, &#x27;local val=\&quot;Hello Compose\&quot; return val&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;Hello Compose&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3ceb1c4-c46d-47ab-aa6e-fee94172c1fc&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create and process the ARGV table&quot;,&quot;fullTitle&quot;:&quot;script-command test should create and process the ARGV table&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return ARGV[2]&#x27;, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.eql(&#x27;second&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f43910a-58f5-4b56-83c6-87314986de18&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create and process the KEYS table&quot;,&quot;fullTitle&quot;:&quot;script-command test should create and process the KEYS table&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return KEYS[1]&#x27;, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;key1&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;347b62a5-6947-47d0-a3dd-0612bd4c93ad&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a NUMBER when required&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a NUMBER when required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return 123&#x27;, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(123);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8386162-758e-4eb1-b402-905dba90c48d&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return NIL when there is no return value&quot;,&quot;fullTitle&quot;:&quot;script-command test should return NIL when there is no return value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;print \&quot;Hello World\&quot;&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73dfeea9-f6f3-4786-a463-8da72f761456&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a TABLE when required&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a TABLE when required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [`eval`, `return ARGV`, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9747d6ce-103b-447d-a90a-da44266a7d0e&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return items in order&quot;,&quot;fullTitle&quot;:&quot;script-command test should return items in order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return {true, \&quot;test\&quot;, false, 10, 10.2}&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([1, &#x27;test&#x27;, null, 10, 10]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffe0f00e-838c-42be-8286-51252fed96a6&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return integer and nil for true and false, respectively&quot;,&quot;fullTitle&quot;:&quot;script-command test should return integer and nil for true and false, respectively&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return { true, false, false}&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([1, null, null]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee1b7ac0-2194-4036-bcc3-8edbdc6b23ca&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to execute a representative BULL script&quot;,&quot;fullTitle&quot;:&quot;script-command test should be able to execute a representative BULL script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        const luaScriptPath = path.join(__dirname, &#x27;../../resources/bull.lua&#x27;);\n        console.log(`trying to load ${luaScriptPath}`);\n        const luaScript = fs.readFileSync(luaScriptPath, &#x27;utf8&#x27;);\n        const args = [&#x27;6&#x27;, &#x27;bull:some_queue:wait&#x27;, &#x27;bull:some_queue:paused&#x27;, &#x27;bull:some_queue:meta-paused&#x27;, &#x27;bull:some_queue:id&#x27;, &#x27;bull:some_queue:delayed&#x27;, &#x27;bull:some_queue:priority&#x27;, &#x27;bull:some_queue:&#x27;, &#x27;&#x27;, &#x27;S1234_last_first&#x27;, &#x27;{\&quot;trackid\&quot;:\&quot;9405503699300066833313\&quot;,\&quot;filingKey\&quot;:\&quot;S1234_last_first\&quot;,\&quot;name\&quot;:\&quot;S1234_last_first\&quot;,\&quot;message\&quot;:\&quot;Waiting to start\&quot;}&#x27;, &#x27;{\&quot;delay\&quot;:15,\&quot;attempts\&quot;:1,\&quot;timestamp\&quot;:1579142712160}&#x27;, &#x27;1579142712160&#x27;, &#x27;15&#x27;, &#x27;1579142712175&#x27;, &#x27;0&#x27;, &#x27;LPUSH&#x27;, &#x27;9f187ecc-d502-4287-9f23-9978e6c2d67e&#x27;];\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, luaScript, ...args]);\n        chai_1.expect(response).to.equal(&#x27;1&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;keys&#x27;, &#x27;*&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;bull:some_queue:1&#x27;, &#x27;bull:some_queue:delayed&#x27;, &#x27;bull:some_queue:id&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;bull:some_queue:delayed&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;zset&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;bull:some_queue:id&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;string&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;bull:some_queue:1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;hash&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;bull:some_queue:id&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;1&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;645b8e39-d1c2-48f6-89aa-bce23650d8d1&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when we attempt to EVAL an invalid script&quot;,&quot;fullTitle&quot;:&quot;script-command test should fail when we attempt to EVAL an invalid script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;-- Invalid\\r\\nscript&#x27;]);\n        // Validated against redis\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;eval\\&#x27; command&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;468e58db-018a-4a1e-9d5c-d07e53b1d697&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to return a NULL value from a lua script&quot;,&quot;fullTitle&quot;:&quot;script-command test should be able to return a NULL value from a lua script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;local val = nil return val&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4e48e83-58d0-4f62-9754-b8e6374a7f93&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return table values after the first NIL is encountered and return integers not floats&quot;,&quot;fullTitle&quot;:&quot;script-command test should not return table values after the first NIL is encountered and return integers not floats&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28800f52-ddc3-4c75-9178-95b2973509fb&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a table with embedded calls to redis&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a table with embedded calls to redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, embeddedkey, &#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;hgetall&#x27;, embeddedkey]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, `local j = redis.call(\&quot;HGETALL\&quot;, \&quot;${embeddedkey}\&quot;) return { j, \&quot;SAMPLE\&quot; }`, &#x27;0&#x27;]);\n        // Validated with redis\n        chai_1.expect(response).to.eql([&#x27;SAMPLE&#x27;, [&#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7eb63b60-d1b4-412c-85f7-9b78a056be93&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support the unpack lua command&quot;,&quot;fullTitle&quot;:&quot;script-command test should support the unpack lua command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, embeddedkey, &#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, `return { unpack(redis.call(\&quot;hgetall\&quot;, \&quot;${embeddedkey}\&quot;)) }`, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb5a471f-90e2-45f0-8bef-f9af140cad55&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert values properly&quot;,&quot;fullTitle&quot;:&quot;script-command test should convert values properly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, \&quot;return {1,2,{3,&#x27;Hello World!&#x27;}}\&quot;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([1, 2, [3, &#x27;Hello World!&#x27;]]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9768309d-618e-432e-9971-8ea67ad19844&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return embedded tables from embedded calls&quot;,&quot;fullTitle&quot;:&quot;script-command test should return embedded tables from embedded calls&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, \&quot;return {1,2,{3,bit.bxor(5,3)}}\&quot;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([1, 2, [3, 6]]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e191bef-9e9e-4cc5-acf9-011ffa0c3fcd&quot;,&quot;parentUUID&quot;:&quot;d36627b0-6328-4c4b-9b95-1f95e46dc72d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2545561d-cf65-4b41-8a33-8c9c7d21db57&quot;,&quot;3ec8765e-6dec-4dd2-81af-2a0cdb22b901&quot;,&quot;c3ceb1c4-c46d-47ab-aa6e-fee94172c1fc&quot;,&quot;1f43910a-58f5-4b56-83c6-87314986de18&quot;,&quot;347b62a5-6947-47d0-a3dd-0612bd4c93ad&quot;,&quot;d8386162-758e-4eb1-b402-905dba90c48d&quot;,&quot;73dfeea9-f6f3-4786-a463-8da72f761456&quot;,&quot;9747d6ce-103b-447d-a90a-da44266a7d0e&quot;,&quot;ffe0f00e-838c-42be-8286-51252fed96a6&quot;,&quot;ee1b7ac0-2194-4036-bcc3-8edbdc6b23ca&quot;,&quot;645b8e39-d1c2-48f6-89aa-bce23650d8d1&quot;,&quot;468e58db-018a-4a1e-9d5c-d07e53b1d697&quot;,&quot;a4e48e83-58d0-4f62-9754-b8e6374a7f93&quot;,&quot;7eb63b60-d1b4-412c-85f7-9b78a056be93&quot;,&quot;fb5a471f-90e2-45f0-8bef-f9af140cad55&quot;,&quot;9768309d-618e-432e-9971-8ea67ad19844&quot;,&quot;9e191bef-9e9e-4cc5-acf9-011ffa0c3fcd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;28800f52-ddc3-4c75-9178-95b2973509fb&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:212,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;title&quot;:&quot;publish/subscribe test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/pubsub-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/pubsub-server.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed36b015-c48c-4d9f-a5be-7d6af14355cf&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ecdcbc0-0c25-4e4a-9607-a8049b939502&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6ef5fba-1527-4c8f-b812-c508b4814e4b&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58836fea-66bf-48ab-975b-d117be47e44b&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ZERO when a message is published to a channel without subscribers&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should return ZERO when a message is published to a channel without subscribers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;publish&#x27;, &#x27;channel&#x27;, &#x27;Hollow world!&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9523268e-68c0-4d49-be09-f2ae77a8e193&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should unsubscribe from a channel that it is not subscribed to&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should unsubscribe from a channel that it is not subscribed to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Sound&#x27;s weird, but this is observed behavior\n        response = yield common_test_1.sendCommand(client, [&#x27;unsubscribe&#x27;, &#x27;some channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;unsubscribe&#x27;, &#x27;some channel&#x27;, 0]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f4a73ef-155c-4eaa-aba7-9e9f8f9b57f2&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should subscribe to an arbitrary channel&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should subscribe to an arbitrary channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;subscribe&#x27;, &#x27;arbitrary channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;subscribe&#x27;, &#x27;arbitrary channel&#x27;, 1]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41d48227-f86f-4727-b953-a1f13fd74602&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the number of currently subscribed channels&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should report the number of currently subscribed channels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;subscribe&#x27;, &#x27;another channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;subscribe&#x27;, &#x27;another channel&#x27;, 2]);\n        response = yield common_test_1.sendCommand(client, [&#x27;unsubscribe&#x27;, &#x27;another channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;unsubscribe&#x27;, &#x27;another channel&#x27;, 1]);\n        response = yield common_test_1.sendCommand(client, [&#x27;unsubscribe&#x27;, &#x27;arbitrary channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;unsubscribe&#x27;, &#x27;arbitrary channel&#x27;, 0]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8637a8fa-5120-405b-96a5-3832844d9f5f&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should receive separate subscribe responses and then notifications on subscribed channels&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should receive separate subscribe responses and then notifications on subscribed channels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1506,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let counter = 0;\nconst newClient1 = new net.Socket();\nnewClient1.on(&#x27;data&#x27;, (data) =&gt; {\n    // console.log(`Counter is ${counter}`);\n    // console.log(`\\n***Listener ${counter} received ${data.toString(&#x27;utf8&#x27;)}\\n`);\n    switch (counter) {\n        case 0:\n            chai_1.expect(data.toString(&#x27;utf8&#x27;)).to.equal(`*3\\r\\n$9\\r\\nsubscribe\\r\\n$3\\r\\none\\r\\n:1\\r\\n*3\\r\\n$9\\r\\nsubscribe\\r\\n$3\\r\\ntwo\\r\\n:2\\r\\n*3\\r\\n$9\\r\\nsubscribe\\r\\n$5\\r\\nthree\\r\\n:3\\r\\n`);\n            break;\n        case 1:\n            chai_1.expect(data.toString(&#x27;utf8&#x27;)).to.equal(`*3\\r\\n$7\\r\\nmessage\\r\\n$3\\r\\ntwo\\r\\n$12\\r\\nmessage to 2\\r\\n`);\n            done();\n            break;\n    }\n    counter++;\n});\ncommon_test_1.sendCommand(newClient1, [&#x27;subscribe&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;])\n    .then((rsp) =&gt; {\n    //        console.log(`RESPONSE ${JSON.stringify(rsp)}`);\n    // Responses are sent in separate messages\n    chai_1.expect(rsp).to.eql([&#x27;subscribe&#x27;, &#x27;one&#x27;, 1]);\n    const anotherClient = new net.Socket();\n    // wait a tick so that the published message is received separately\n    setTimeout(() =&gt; {\n        common_test_1.sendCommand(anotherClient, [&#x27;publish&#x27;, &#x27;two&#x27;, &#x27;message to 2&#x27;])\n            .then((rsp) =&gt; {\n            chai_1.expect(rsp).to.equal(1);\n        });\n    }, 1500);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57e8a151-f3be-422e-8beb-d5ed23020296&quot;,&quot;parentUUID&quot;:&quot;4eb968a1-7659-43ad-aa93-caa479a53820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9523268e-68c0-4d49-be09-f2ae77a8e193&quot;,&quot;0f4a73ef-155c-4eaa-aba7-9e9f8f9b57f2&quot;,&quot;41d48227-f86f-4727-b953-a1f13fd74602&quot;,&quot;8637a8fa-5120-405b-96a5-3832844d9f5f&quot;,&quot;57e8a151-f3be-422e-8beb-d5ed23020296&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1512,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;36e337ae-aa20-4edc-853c-26dc719122f7&quot;,&quot;title&quot;:&quot;resp-server test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/resp-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/resp-server.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;760e3ac5-1142-411e-a20d-cf49bf8a0ee1&quot;,&quot;parentUUID&quot;:&quot;36e337ae-aa20-4edc-853c-26dc719122f7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03c61967-0c9e-42c5-85d5-d5659a3919ba&quot;,&quot;parentUUID&quot;:&quot;36e337ae-aa20-4edc-853c-26dc719122f7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bd7aa217-03ed-4041-a5a9-af21beb30a7d&quot;,&quot;title&quot;:&quot;server start and stop tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/resp-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/resp-server.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should instantiate&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should instantiate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            respServer = new resp_server_1.RespServer();\n            chai_1.expect(respServer.constructor.name).to.equal(&#x27;RespServer&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77dc7324-0c90-45ce-afd0-bd1ea50657b6&quot;,&quot;parentUUID&quot;:&quot;bd7aa217-03ed-4041-a5a9-af21beb30a7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit \&quot;ready\&quot; on startup&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should emit \&quot;ready\&quot; on startup&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f84d3d7-e81a-4d1f-8fd2-d9a3fbaf4a3f&quot;,&quot;parentUUID&quot;:&quot;bd7aa217-03ed-4041-a5a9-af21beb30a7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit \&quot;closed\&quot; on shutdown&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should emit \&quot;closed\&quot; on shutdown&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer.on(&#x27;closed&#x27;, () =&gt; {\n    done();\n});\nrespServer.stop();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c58c3df-52e9-4da0-a466-1ac983f18be6&quot;,&quot;parentUUID&quot;:&quot;bd7aa217-03ed-4041-a5a9-af21beb30a7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should accept connections on default ${env.REDIS_HOST}:${env.REDIS_PORT}&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should accept connections on default ${env.REDIS_HOST}:${env.REDIS_PORT}&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    const client = new net.Socket();\n    client.on(&#x27;ready&#x27;, (data) =&gt; {\n        respServer.on(&#x27;closed&#x27;, () =&gt; {\n            done();\n        });\n        respServer.stop();\n    });\n    client.on(&#x27;connect&#x27;, (data) =&gt; {\n    });\n    client.on(&#x27;error&#x27;, (err) =&gt; {\n        assert_1.fail(`Unexpected error during connection`, err.stack);\n    });\n    client.connect(Number(process.env.REDIS_PORT || 6379), process.env.REDIS_HOST || &#x27;localhost&#x27;, () =&gt; {\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4daa09c9-48fc-4711-a12e-9223ee1d3a2e&quot;,&quot;parentUUID&quot;:&quot;bd7aa217-03ed-4041-a5a9-af21beb30a7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77dc7324-0c90-45ce-afd0-bd1ea50657b6&quot;,&quot;7f84d3d7-e81a-4d1f-8fd2-d9a3fbaf4a3f&quot;,&quot;3c58c3df-52e9-4da0-a466-1ac983f18be6&quot;,&quot;4daa09c9-48fc-4711-a12e-9223ee1d3a2e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;title&quot;:&quot;other server tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/resp-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/resp-server.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    client = new net.Socket();\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d5ea7c3-3756-4ece-b67b-3c2627159909&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            yield respServer.stop();\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1546961e-8a90-4005-9502-8fd772442da7&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should respond properly to the \&quot;ping\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond properly to the \&quot;ping\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;ping&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;PONG&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;396f2b9e-5d0f-4341-8aa6-0336fadac00d&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond properly to the \&quot;echo\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond properly to the \&quot;echo\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;echo&#x27;, &#x27;test&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;test&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e38f27c-0aee-43d3-b27c-7db4085079d0&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with \&quot;ERR\&quot; when echo command has no parameters&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond with \&quot;ERR\&quot; when echo command has no parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            // Note that &#x27;ReplyError:&#x27; is supplied by the redis parser, NOT by the code under test\n            const response = yield common_test_1.sendCommand(client, [&#x27;echo&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;echo\\&#x27; command&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5aefb9a2-4326-4d1e-9a7d-fb17ebbedf02&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with \&quot;ERR\&quot; when echo command has two or more parameters&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond with \&quot;ERR\&quot; when echo command has two or more parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;echo&#x27;, &#x27;one&#x27;, &#x27;two&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;echo\\&#x27; command&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6222fa00-8038-4920-ad75-9558bd9eb975&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond to the \&quot;time\&quot; command with an array of two strings&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond to the \&quot;time\&quot; command with an array of two strings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Note: we use hrtime which should already do what we need so we don&#x27;t validate\ncommon_test_1.sendCommand(client, [&#x27;time&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.be.an(&#x27;array&#x27;);\n    chai_1.expect(response.length).to.equal(2);\n    chai_1.expect(parseInt(response[0], 10)).to.be.greaterThan(0);\n    chai_1.expect(parseInt(response[1], 10)).to.be.greaterThan(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01de6827-bae6-4892-9253-b42612c913e3&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with nulCommand when the command is not known&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond with nulCommand when the command is not known&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;felix&#x27;, &#x27;the&#x27;, &#x27;cat&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.match(/^ReplyError: ERR unknown command.*/);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c255fd5-1981-448e-8b2c-f63d4abbb57e&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement the info command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should implement the info command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield common_test_1.sendCommand(client, [&#x27;info&#x27;]);\n            chai_1.expect(response).to.match(/^# server\\r\\nredis_version:.*/im);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b614a77-2b8e-4962-82c2-528ecfcd4ca3&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement the SET command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should implement the SET command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;SET&#x27;, &#x27;this&#x27;, &#x27;that&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    common_test_1.sendCommand(client, [&#x27;GET&#x27;, &#x27;this&#x27;])\n        .then((getresponse) =&gt; {\n        chai_1.expect(getresponse).to.equal(&#x27;that&#x27;);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;080bfbbe-0551-46b9-af67-04d1dcbed91e&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nil string when GET is invoked with unknown parameters&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should return nil string when GET is invoked with unknown parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;GET&#x27;, &#x27; &#x27;])\n    .then((getresponse) =&gt; {\n    chai_1.expect(getresponse).to.equal(null);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb92b696-4c5c-4db5-8e51-5ab93811017b&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement the info command with a known parameter&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should implement the info command with a known parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;info&#x27;, &#x27;memory&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.match(/^# memory.*/mi);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27db0107-48d5-4680-806e-2a0cb4c01845&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not respond when info is called with an unknown paramter&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should not respond when info is called with an unknown paramter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield common_test_1.sendCommand(client, [&#x27;info&#x27;, &#x27;juicy&#x27;]);\n            // Don&#x27;t know how to send an empty - non-null string response yet\n            chai_1.expect(String(response).trim()).to.equal(&#x27;&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab1f05a2-2671-4910-81ab-67f3a261668c&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the number of keys in the current database&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should report the number of keys in the current database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n            chai_1.expect(response).to.be.greaterThan(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7a7d4ce-41a0-4925-94ef-9764e194c266&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support the \&quot;select\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should support the \&quot;select\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;12&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02c94993-656c-418d-9dfa-1e03f59893b8&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow us to select an invalid database&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should not allow us to select an invalid database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;one&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR invalid DB index&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;-12&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR DB index is out of range&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;22&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR DB index is out of range&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70abe540-d72b-4365-940c-748cb1b1292d&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond properly to the \&quot;quit\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond properly to the \&quot;quit\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Note however that the server does not disconnect us.  That is the client&#x27;s job\ncommon_test_1.sendCommand(client, [&#x27;quit&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74e7f57a-5963-41a5-8f46-8d33f3025529&quot;,&quot;parentUUID&quot;:&quot;4314d55f-2c11-4f62-ab9e-8102edeab938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;396f2b9e-5d0f-4341-8aa6-0336fadac00d&quot;,&quot;4e38f27c-0aee-43d3-b27c-7db4085079d0&quot;,&quot;5aefb9a2-4326-4d1e-9a7d-fb17ebbedf02&quot;,&quot;6222fa00-8038-4920-ad75-9558bd9eb975&quot;,&quot;01de6827-bae6-4892-9253-b42612c913e3&quot;,&quot;9c255fd5-1981-448e-8b2c-f63d4abbb57e&quot;,&quot;1b614a77-2b8e-4962-82c2-528ecfcd4ca3&quot;,&quot;080bfbbe-0551-46b9-af67-04d1dcbed91e&quot;,&quot;fb92b696-4c5c-4db5-8e51-5ab93811017b&quot;,&quot;27db0107-48d5-4680-806e-2a0cb4c01845&quot;,&quot;ab1f05a2-2671-4910-81ab-67f3a261668c&quot;,&quot;f7a7d4ce-41a0-4925-94ef-9764e194c266&quot;,&quot;02c94993-656c-418d-9dfa-1e03f59893b8&quot;,&quot;70abe540-d72b-4365-940c-748cb1b1292d&quot;,&quot;74e7f57a-5963-41a5-8f46-8d33f3025529&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;title&quot;:&quot;sdiff-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sdiff-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sdiff-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34c59cd2-20e6-4865-ba89-a2a71a6def41&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;657ac71c-71a0-4b91-84fb-6da4409c5c51&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd988f56-a319-42cf-ab00-692a023fe262&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80c728b3-3312-434c-a4dd-e565cecb9532&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return EMPTY ARRAY when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should return EMPTY ARRAY when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebfd360d-1dd9-44ee-add6-d32ee752190d&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return all members of source set when the destination set does not exist&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should return all members of source set when the destination set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;key1&#x27;, &#x27;empty&#x27;]);\n        // REDIS does not guarantee order of the set\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5b98cfa-2f30-47d7-8a18-0e003d25d127&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a proper DIFF of one or more sets&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should return a proper DIFF of one or more sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key3&#x27;, &#x27;a&#x27;, &#x27;c&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;b&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0b65f53-a048-4647-8669-e6cca0ee35da&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore non-list keys&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should ignore non-list keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;list&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;b&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08e32d9e-3e8c-4792-b296-56ec34e7e45d&quot;,&quot;parentUUID&quot;:&quot;52052cb8-5d77-4d89-9ea1-c2261b21c921&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ebfd360d-1dd9-44ee-add6-d32ee752190d&quot;,&quot;e5b98cfa-2f30-47d7-8a18-0e003d25d127&quot;,&quot;e0b65f53-a048-4647-8669-e6cca0ee35da&quot;,&quot;08e32d9e-3e8c-4792-b296-56ec34e7e45d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;title&quot;:&quot;set commands test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/set-commands.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/set-commands.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c3cabd6-09ac-487b-a52d-18d51e17ce8a&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c8c62c1-4c63-4343-8eb3-f6f2b59e9d07&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14d3f578-de00-4e72-b442-4a9fd101bab6&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6187356-2bf0-4d92-a0e0-2099e1fb47b5&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ZERO when certain commands are applied against key that doesn&#x27;t exist&quot;,&quot;fullTitle&quot;:&quot;set commands test should return ZERO when certain commands are applied against key that doesn&#x27;t exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;scard&#x27;, &#x27;doesnotexist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;doesnotexist&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e83d2295-82a0-4fd2-8f56-dc0c3cc755fe&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an appropriate error when a \&quot;set\&quot; command is applied to a non-set key&quot;,&quot;fullTitle&quot;:&quot;set commands test should throw an appropriate error when a \&quot;set\&quot; command is applied to a non-set key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;wrongtype&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;wrongtype&#x27;, &#x27;set&#x27;]);\n        chai_1.expect(response).to.equal(WRONG_TYPE);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;503bbaad-9b9b-4534-a3db-7b22094499d8&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a new key when sadd is called correctly&quot;,&quot;fullTitle&quot;:&quot;set commands test should create a new key when sadd is called correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;skey&#x27;, &#x27;untest&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;skey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2f602fa-bd1f-482a-8889-35d33b4c9e55&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only report the number of added keys&quot;,&quot;fullTitle&quot;:&quot;set commands test should only report the number of added keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;skey&#x27;, &#x27;untest&#x27;, &#x27;test2&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;skey&#x27;]);\n        chai_1.expect(response).to.be.an(&#x27;array&#x27;);\n        // Keys are returned in reverse order? - No.\n        // smembers can return a list in any order\n        chai_1.expect(response.length).to.equal(2);\n        chai_1.expect(response.indexOf(&#x27;test2&#x27;)).to.be.greaterThan(-1);\n        chai_1.expect(response.indexOf(&#x27;untest&#x27;)).to.be.greaterThan(-1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4134c365-9e06-4457-8688-d5f6f9327bdb&quot;,&quot;parentUUID&quot;:&quot;952bc77d-406a-4d17-8110-e05b6bf72b52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;45124d5a-cba9-4e56-9b9f-b35139dbb37b&quot;,&quot;title&quot;:&quot;smove, sismember, and scard tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/set-commands.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/set-commands.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should do nothing when smove is called with a source key that does not exist&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should do nothing when smove is called with a source key that does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;smove&#x27;, &#x27;fromskey&#x27;, &#x27;toskey&#x27;, &#x27;nothing&#x27;]);\n            chai_1.expect(response).to.equal(0);\n            response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;fromskey&#x27;, &#x27;toskey&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;963312a5-4efb-4520-b95c-8587dcfe6cbc&quot;,&quot;parentUUID&quot;:&quot;45124d5a-cba9-4e56-9b9f-b35139dbb37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should move a key from one set to another (and create the target if necessary)&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should move a key from one set to another (and create the target if necessary)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.equal(0);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.eql([]);\n            response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, uniqueKey, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(3);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, uniqueKey]);\n            // key order is undefined in redis\n            chai_1.expect(response.length).to.equal(3);\n            chai_1.expect(response.indexOf(&#x27;key3&#x27;)).to.be.greaterThan(-1);\n            chai_1.expect(response.indexOf(&#x27;key2&#x27;)).to.be.greaterThan(-1);\n            chai_1.expect(response.indexOf(&#x27;key1&#x27;)).to.be.greaterThan(-1);\n            response = yield common_test_1.sendCommand(client, [&#x27;smove&#x27;, uniqueKey, &#x27;tonewskey&#x27;, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;tonewskey&#x27;, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, uniqueKey]);\n            // key order, again\n            chai_1.expect(response.length).to.equal(2);\n            chai_1.expect(response.indexOf(&#x27;key3&#x27;)).to.be.greaterThan(-1);\n            chai_1.expect(response.indexOf(&#x27;key1&#x27;)).to.be.greaterThan(-1);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.eql([&#x27;key2&#x27;]);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d76474d9-b6b1-46d2-b69d-c559d1626f67&quot;,&quot;parentUUID&quot;:&quot;45124d5a-cba9-4e56-9b9f-b35139dbb37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report cardinality of a set&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should report cardinality of a set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;scard&#x27;, uniqueKey]);\n            chai_1.expect(response).to.equal(2);\n            response = yield common_test_1.sendCommand(client, [&#x27;scard&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.equal(1);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b74d3383-02a1-423e-8372-a8e1bce9acb3&quot;,&quot;parentUUID&quot;:&quot;45124d5a-cba9-4e56-9b9f-b35139dbb37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report ismember true/false&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should report ismember true/false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;tonewskey&#x27;, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;tonewskey&#x27;, &#x27;key1&#x27;]);\n            chai_1.expect(response).to.equal(0);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, uniqueKey, &#x27;key1&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, uniqueKey, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, uniqueKey, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e776243-d947-44ec-80d5-2dbf62f9eb77&quot;,&quot;parentUUID&quot;:&quot;45124d5a-cba9-4e56-9b9f-b35139dbb37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only remove the source element if the destination element already exists&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should only remove the source element if the destination element already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const newkey = `move-unique-${new Date().getTime()}`;\n            const newToKey = `move-new-to-key`;\n            let response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, newkey, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(3);\n            response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, newToKey, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(3);\n            response = yield common_test_1.sendCommand(client, [&#x27;smove&#x27;, newkey, newToKey, &#x27;key2&#x27;]);\n            // Inconsistent with redis documentation?\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, newkey, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86d2a9e0-2eb9-4fc4-be83-0f86df38ee4e&quot;,&quot;parentUUID&quot;:&quot;45124d5a-cba9-4e56-9b9f-b35139dbb37b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;963312a5-4efb-4520-b95c-8587dcfe6cbc&quot;,&quot;d76474d9-b6b1-46d2-b69d-c559d1626f67&quot;,&quot;b74d3383-02a1-423e-8372-a8e1bce9acb3&quot;,&quot;6e776243-d947-44ec-80d5-2dbf62f9eb77&quot;,&quot;86d2a9e0-2eb9-4fc4-be83-0f86df38ee4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;e83d2295-82a0-4fd2-8f56-dc0c3cc755fe&quot;,&quot;503bbaad-9b9b-4534-a3db-7b22094499d8&quot;,&quot;c2f602fa-bd1f-482a-8889-35d33b4c9e55&quot;,&quot;4134c365-9e06-4457-8688-d5f6f9327bdb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;title&quot;:&quot;sinter-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sinter-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sinter-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c07a875d-9603-45b4-a2bb-59148d4fea40&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc25a27-35d9-4fcc-876b-ef5c26f8fc77&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f283b6bb-290e-4ffe-9a97-d0b419457847&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fef60584-81c2-4143-8ac8-49a8f94d33fe&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return EMPTY SET when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should return EMPTY SET when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b564ac7c-0208-4251-a32f-1975e0db25f5&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return EMPTY SET when any other set does not exist&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should return EMPTY SET when any other set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;empty&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89594e6e-ea8c-457b-9941-363f69d7dd5b&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when one of the keys is not a set&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should fail when one of the keys is not a set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;skey1&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;skey1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4e3ccad-ef75-43f8-9d47-86d581561ca9&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the intersection of one or more sets&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should return the intersection of one or more sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key3&#x27;, &#x27;a&#x27;, &#x27;c&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;a&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key2&#x27;, &#x27;key1&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.length).to.equal(2);\n        // Redis does not guarantee the order of a set\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;c&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;075d31f1-5c80-44c1-9e0b-d1f584c6b1c9&quot;,&quot;parentUUID&quot;:&quot;2d4d5903-3515-4edf-b8d7-a97fa6bf57be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b564ac7c-0208-4251-a32f-1975e0db25f5&quot;,&quot;89594e6e-ea8c-457b-9941-363f69d7dd5b&quot;,&quot;f4e3ccad-ef75-43f8-9d47-86d581561ca9&quot;,&quot;075d31f1-5c80-44c1-9e0b-d1f584c6b1c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;title&quot;:&quot;sinterstore-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sinterstore-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sinterstore-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3ad0142-4442-47f9-8e30-6328aade3f82&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01bcf680-d746-4407-a758-424363f740af&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83977bc2-8dd7-4464-b507-9714cd2ab56e&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85e74113-7dbd-4a0d-a2ae-dde1c5a8ebd3&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require a minimum of two parameters&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should require a minimum of two parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.match(/ERR wrong number of arguments for \\&#x27;sinterstore\\&#x27; command/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42ef1387-db02-4722-8c8c-fa51b3b96f21&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return ZERO when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should return ZERO when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;dest&#x27;, &#x27;src&#x27;]);\n        chai_1.expect(response).to.eql(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8975dcd4-790b-4b18-824b-efd284fddf2e&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overwrite the destination and return the number of keys copied&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should overwrite the destination and return the number of keys copied&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key3&#x27;, &#x27;some text value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;key3&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;343d9756-a6d5-4497-bcae-fffa0eff74b1&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when one of the keys is not a set&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should fail when one of the keys is not a set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;key1&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;skey1&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;key1&#x27;, &#x27;skey1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8782fd8-e9b1-4216-9087-d48b76228f1e&quot;,&quot;parentUUID&quot;:&quot;2c5b697e-a633-4006-a94c-a8cc1e9822b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42ef1387-db02-4722-8c8c-fa51b3b96f21&quot;,&quot;8975dcd4-790b-4b18-824b-efd284fddf2e&quot;,&quot;343d9756-a6d5-4497-bcae-fffa0eff74b1&quot;,&quot;e8782fd8-e9b1-4216-9087-d48b76228f1e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;title&quot;:&quot;srem-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/srem-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/srem-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85d40317-ebe4-46ac-981e-5332336696ef&quot;,&quot;parentUUID&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80a402da-504a-42e7-b70a-47286b3d0c4f&quot;,&quot;parentUUID&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc5038ec-6632-434e-bbb2-d2375a567448&quot;,&quot;parentUUID&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3271e0c5-9e99-4e09-ade2-5e16bcb09ed4&quot;,&quot;parentUUID&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 0 when the set does not exist&quot;,&quot;fullTitle&quot;:&quot;srem-command test should return 0 when the set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;srem&#x27;, &#x27;set&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72049f92-de04-49af-9aaf-1b6f1884f5bc&quot;,&quot;parentUUID&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return only the number of existing keys that are removed&quot;,&quot;fullTitle&quot;:&quot;srem-command test should return only the number of existing keys that are removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;set&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;, &#x27;key4&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;srem&#x27;, &#x27;set&#x27;, &#x27;key2&#x27;, &#x27;not&#x27;, &#x27;here&#x27;, &#x27;today&#x27;, &#x27;key4&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;set&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;key1&#x27;, &#x27;key3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b890a039-6b92-43c2-b890-35b73354f555&quot;,&quot;parentUUID&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove an empty set when all members are removed&quot;,&quot;fullTitle&quot;:&quot;srem-command test should remove an empty set when all members are removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;srem&#x27;, &#x27;set&#x27;, &#x27;key1&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;set&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a524fdb7-38b7-4a2d-b81a-475230607116&quot;,&quot;parentUUID&quot;:&quot;0c5337a2-6cb7-4ec2-8422-f256abfa1d1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72049f92-de04-49af-9aaf-1b6f1884f5bc&quot;,&quot;b890a039-6b92-43c2-b890-35b73354f555&quot;,&quot;a524fdb7-38b7-4a2d-b81a-475230607116&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;title&quot;:&quot;sunion-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sunion-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sunion-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cadb6c1f-fd52-4ff2-b77f-51d736f14c12&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5adf1bb6-b402-44e9-a5ea-71828543f736&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b92ed8ab-5362-4890-972d-2f21fafb8a08&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d72bde6e-59e6-4cff-841a-7b67f7b736a6&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return EMPTY SET when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should return EMPTY SET when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8c3c239-b3ac-4d76-8775-b47216bc4e77&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the union of a single set&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should return the union of a single set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;key1&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;795849cd-2953-4f5f-a0f0-b87d16684389&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when sunion requested againt non-set keys&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should fail when sunion requested againt non-set keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;string-key&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;key1&#x27;, &#x27;string-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76ac493b-2b9f-4704-8a05-c5334657d85f&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the union of multiple sets&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should return the union of multiple sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key3&#x27;, &#x27;a&#x27;, &#x27;c&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ba5bb22-0dbf-47a3-a3fb-61159c51e0ee&quot;,&quot;parentUUID&quot;:&quot;5e83ff5c-c24d-4284-aade-020b4c8c5cd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8c3c239-b3ac-4d76-8775-b47216bc4e77&quot;,&quot;795849cd-2953-4f5f-a0f0-b87d16684389&quot;,&quot;76ac493b-2b9f-4704-8a05-c5334657d85f&quot;,&quot;0ba5bb22-0dbf-47a3-a3fb-61159c51e0ee&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;title&quot;:&quot;sunionstore-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sunionstore-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sunionstore-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd38988c-d6a8-4c54-8eae-382d52779a37&quot;,&quot;parentUUID&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d015017-2364-4e35-8c9b-60590f9529c8&quot;,&quot;parentUUID&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b7508a5-261c-46e6-96a8-a7165e92cfe0&quot;,&quot;parentUUID&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58cadb27-c8b4-48be-8085-f4d7625069a0&quot;,&quot;parentUUID&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require a minimum of two parameters&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test should require a minimum of two parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sunionstore&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.match(/ERR wrong number of arguments for \\&#x27;sunionstore\\&#x27; command/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b28d2612-926c-46a0-ab44-b61f2ca8429f&quot;,&quot;parentUUID&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return ZERO when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test should return ZERO when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sunionstore&#x27;, &#x27;dest&#x27;, &#x27;src&#x27;]);\n        chai_1.expect(response).to.eql(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0e1125e-f5c1-48ff-8a4f-6d0f67f930e2&quot;,&quot;parentUUID&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overwrite the destination and return the number of keys copied&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test should overwrite the destination and return the number of keys copied&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key3&#x27;, &#x27;some text value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunionstore&#x27;, &#x27;key3&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;]);\n        chai_1.expect(response).to.equal(5);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4aa485f-75b6-4db3-8aec-a59d63fce0ac&quot;,&quot;parentUUID&quot;:&quot;723aa41a-b390-4f8c-b0d6-65da7a0ca12f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b28d2612-926c-46a0-ab44-b61f2ca8429f&quot;,&quot;b0e1125e-f5c1-48ff-8a4f-6d0f67f930e2&quot;,&quot;d4aa485f-75b6-4db3-8aec-a59d63fce0ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;47da12cc-304d-417e-911c-547421bee146&quot;,&quot;title&quot;:&quot;z-command tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/z-commands.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/z-commands.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:148,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;033a2330-00ff-4933-b233-164e2dbe9737&quot;,&quot;parentUUID&quot;:&quot;47da12cc-304d-417e-911c-547421bee146&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;643aa4f3-21a7-4189-8ad7-ed3543612372&quot;,&quot;parentUUID&quot;:&quot;47da12cc-304d-417e-911c-547421bee146&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48a925af-4fb0-407c-a5af-a118e2295a8b&quot;,&quot;parentUUID&quot;:&quot;47da12cc-304d-417e-911c-547421bee146&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83d7fd0c-6c7c-431a-9d67-730cd8d786ee&quot;,&quot;parentUUID&quot;:&quot;47da12cc-304d-417e-911c-547421bee146&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;z-command tests should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueZkey = `key${new Date().getTime()}`;\n        let response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;testkey&#x27;, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER)]);\n        chai_1.expect(response).to.eql([]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;testkey&#x27;, &#x27;14&#x27;, &#x27;__proto__&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;8&#x27;, &#x27;5a600e16&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;9&#x27;, &#x27;5a600e17&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;10&#x27;, &#x27;5a600e18&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcard&#x27;, uniqueZkey]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;5a600e16&#x27;, &#x27;8&#x27;,\n            &#x27;5a600e17&#x27;, &#x27;9&#x27;,\n            &#x27;5a600e18&#x27;, &#x27;10&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;12&#x27;, &#x27;5a600e17&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcount&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER)]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER)]);\n        chai_1.expect(response.length).to.equal(3);\n        chai_1.expect(response).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;5a600e16&#x27;, &#x27;8&#x27;, &#x27;5a600e18&#x27;, &#x27;10&#x27;, &#x27;5a600e17&#x27;, &#x27;12&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, uniqueZkey]);\n        chai_1.expect(response).to.equal(&#x27;zset&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcount&#x27;, uniqueZkey, &#x27;-Infinity&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcount&#x27;, uniqueZkey, &#x27;Negative One&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR min or max is not a float&#x27;);\n        // report syntax error\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;with Scores&#x27;]);\n        chai_1.expect(response).to.eql(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(&#x27;Number.MIN_SAFE_INTEGER&#x27;), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        // Remove members without removing keys\n        response = yield common_test_1.sendCommand(client, [&#x27;zrem&#x27;, uniqueZkey, &#x27;does not exist&#x27;, &#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        // Unexpectedly, redis removes the key when the last element is removed\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueZkey]);\n        console.log(`searched for ${uniqueZkey}`);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dccd903-df2c-4d8b-bed7-8cad4fc09157&quot;,&quot;parentUUID&quot;:&quot;47da12cc-304d-417e-911c-547421bee146&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;z-command tests should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueZkey = `incrkey${new Date().getTime()}`;\n        let response;\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;1&#x27;, &#x27;first&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;2&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;3&#x27;, &#x27;third&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;4&#x27;, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, &#x27;2&#x27;, &#x27;first&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;3&#x27;);\n        // Validate zscore\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;first&#x27;]);\n        // expect(response).to.equal(&#x27;3&#x27;);\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;second&#x27;]);\n        // expect(response).to.equal(&#x27;2&#x27;);\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;third&#x27;]);\n        // expect(response).to.equal(&#x27;3&#x27;);\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;fourth&#x27;]);\n        // expect(response).to.equal(&#x27;4&#x27;);\n        //\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;first&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;third&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        // expect(response).to.match(/^ReplyError: ERR unknown command.*/);\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, &#x27;-20&#x27;, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;-16&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, `-${Number.MIN_SAFE_INTEGER + 1}.${Number.MAX_SAFE_INTEGER}`, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not a valid float&#x27;);\n        // Should create a key if it doesn&#x27;t exist\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, &#x27;-20&#x27;, &#x27;fifth&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;-20&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;fifth&#x27;, &#x27;-20&#x27;, &#x27;fourth&#x27;, &#x27;-16&#x27;, &#x27;second&#x27;, &#x27;2&#x27;, &#x27;first&#x27;, &#x27;3&#x27;, &#x27;third&#x27;, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb97aa74-4adb-4a2c-83ed-3320a336772f&quot;,&quot;parentUUID&quot;:&quot;47da12cc-304d-417e-911c-547421bee146&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9dccd903-df2c-4d8b-bed7-8cad4fc09157&quot;,&quot;eb97aa74-4adb-4a2c-83ed-3320a336772f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;title&quot;:&quot;zadd command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zadd-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zadd-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95a1bb8e-9c91-4f20-93b6-a1de48f81d6a&quot;,&quot;parentUUID&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a20b898-0ca2-495d-876a-1e6d7ac63877&quot;,&quot;parentUUID&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5ef1658-ab6a-4129-a5c4-afb83030772f&quot;,&quot;parentUUID&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac9d6911-9f6a-4d57-adab-1648fe27d4b3&quot;,&quot;parentUUID&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require at least 3 parameters&quot;,&quot;fullTitle&quot;:&quot;zadd command test should require at least 3 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;zadd\\&#x27; command&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;zadd\\&#x27; command&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;zadd\\&#x27; command&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee4174f3-6bbb-41f2-9c8d-20d50014ed60&quot;,&quot;parentUUID&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject even parameter counts&quot;,&quot;fullTitle&quot;:&quot;zadd command test should reject even parameter counts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;, &#x27;456&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;, &#x27;456&#x27;, &#x27;another&#x27;, &#x27;765&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;, &#x27;456&#x27;, &#x27;another&#x27;, &#x27;765&#x27;, &#x27;test&#x27;]);\n        // The \&quot;something\&quot; key should already exist so we only count 2 new fields\n        chai_1.expect(response).to.equal(2);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e17214e-abe1-4198-b632-398ad5a59f25&quot;,&quot;parentUUID&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject an attempt to store non-floatish rankings&quot;,&quot;fullTitle&quot;:&quot;zadd command test should reject an attempt to store non-floatish rankings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;__data__&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not a valid float&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23681662-fdde-405b-8c71-eefc39b5c79d&quot;,&quot;parentUUID&quot;:&quot;db6308b5-8280-4353-9924-e55e41bfe8ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee4174f3-6bbb-41f2-9c8d-20d50014ed60&quot;,&quot;9e17214e-abe1-4198-b632-398ad5a59f25&quot;,&quot;23681662-fdde-405b-8c71-eefc39b5c79d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b5b1f9ba-070e-4e6c-a9e8-8faa9637cf71&quot;,&quot;title&quot;:&quot;zrange-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zrange-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zrange-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f63741b7-e61e-4487-aa84-b196a0666a79&quot;,&quot;parentUUID&quot;:&quot;b5b1f9ba-070e-4e6c-a9e8-8faa9637cf71&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d75d6217-43b9-4768-b098-6cc4fe9cb6e9&quot;,&quot;parentUUID&quot;:&quot;b5b1f9ba-070e-4e6c-a9e8-8faa9637cf71&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b44e9313-be48-4150-a0da-8700d8d216ff&quot;,&quot;parentUUID&quot;:&quot;b5b1f9ba-070e-4e6c-a9e8-8faa9637cf71&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbf4aa1b-a534-41ad-bf5b-03a69f356c44&quot;,&quot;parentUUID&quot;:&quot;b5b1f9ba-070e-4e6c-a9e8-8faa9637cf71&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should reproduce the redis documentation examples&quot;,&quot;fullTitle&quot;:&quot;zrange-command test should reproduce the redis documentation examples&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;3&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;-2&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;two&#x27;, &#x27;three&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;686406bb-00c1-49e6-ac61-7e14dd04992c&quot;,&quot;parentUUID&quot;:&quot;b5b1f9ba-070e-4e6c-a9e8-8faa9637cf71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also reproduce the second documented example&quot;,&quot;fullTitle&quot;:&quot;zrange-command test should also reproduce the second documented example&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;withscores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;960415d2-41e4-4de3-9c21-60acd4b96e7e&quot;,&quot;parentUUID&quot;:&quot;b5b1f9ba-070e-4e6c-a9e8-8faa9637cf71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;686406bb-00c1-49e6-ac61-7e14dd04992c&quot;,&quot;960415d2-41e4-4de3-9c21-60acd4b96e7e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;title&quot;:&quot;zrangebyscore-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zrangebyscore-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zrangebyscore-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae1e28b8-1e4c-41ee-995c-6f64b70264ec&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6d7c01f-2598-440a-8d9d-a732b5e9c7f4&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01aec5e5-ee46-4d72-a5d7-5b0b0f167f45&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48cc10e7-3efa-4370-ba1a-38a0c9b3bd55&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should reproduce the redis documentation examples&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test should reproduce the redis documentation examples&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;myzset&#x27;, &#x27;1&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;myzset&#x27;, &#x27;2&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;myzset&#x27;, &#x27;3&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;+inf&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;ZRANGEBYSCORE&#x27;, &#x27;myzset&#x27;, &#x27;1&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;ZRANGEBYSCORE&#x27;, &#x27;myzset&#x27;, &#x27;(1&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;two&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;ZRANGEBYSCORE&#x27;, &#x27;myzset&#x27;, &#x27;(1&#x27;, &#x27;(2&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e904912d-a3e4-4ad7-aec6-43d2bf623956&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should supply +Infinity for +inf as min parameter&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test should supply +Infinity for +inf as min parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;+inf&#x27;, &#x27;+inf&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;906a40eb-9676-4738-a27c-a9c9ef764349&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should supply -Infinity for -inf as max parameter&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test should supply -Infinity for -inf as max parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;-inf&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2cdf8d3-6e2d-45d7-b6cd-2f2818004e19&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should recognize invalid min parameter&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test should recognize invalid min parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // NOTE: &#x27;inf&#x27; is NOT invalid to redis\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;inx&#x27;, &#x27;+inf&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR min or max is not a float&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;434d5815-fd1e-4d79-afa3-728fa8535d45&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should recognize invalid max parameter&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test should recognize invalid max parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // NOTE: &#x27;inf&#x27; is NOT invalid to redis\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;int&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR min or max is not a float&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;131be96f-969c-46ab-91b8-d4e6c563eddd&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should recognize the WITHSCORES option&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test should recognize the WITHSCORES option&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;+inf&#x27;, &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f141e368-6181-4497-99f6-2567d3ed6b36&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should error when an invalid limit option is specified&quot;,&quot;fullTitle&quot;:&quot;zrangebyscore-command test should error when an invalid limit option is specified&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;+inf&#x27;, &#x27;limit&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;+inf&#x27;, &#x27;lizmit&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;+inf&#x27;, &#x27;limit&#x27;, &#x27;x&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrangebyscore&#x27;, &#x27;myzset&#x27;, &#x27;-inf&#x27;, &#x27;+inf&#x27;, &#x27;limit&#x27;, &#x27;0&#x27;, &#x27;x&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcb6ae76-8deb-4bf3-adfd-a6c908b480be&quot;,&quot;parentUUID&quot;:&quot;309e5586-1265-4cfe-bb81-ecf8e0caa727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e904912d-a3e4-4ad7-aec6-43d2bf623956&quot;,&quot;906a40eb-9676-4738-a27c-a9c9ef764349&quot;,&quot;e2cdf8d3-6e2d-45d7-b6cd-2f2818004e19&quot;,&quot;434d5815-fd1e-4d79-afa3-728fa8535d45&quot;,&quot;131be96f-969c-46ab-91b8-d4e6c563eddd&quot;,&quot;f141e368-6181-4497-99f6-2567d3ed6b36&quot;,&quot;bcb6ae76-8deb-4bf3-adfd-a6c908b480be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;71cc8937-542d-49dc-bd81-41bc5c9af823&quot;,&quot;title&quot;:&quot;zrank-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zrank-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zrank-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73983d74-e1cc-45ee-b06f-13a56493fdf3&quot;,&quot;parentUUID&quot;:&quot;71cc8937-542d-49dc-bd81-41bc5c9af823&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66587733-a4b2-45f4-92db-2fdecc51168c&quot;,&quot;parentUUID&quot;:&quot;71cc8937-542d-49dc-bd81-41bc5c9af823&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eab45020-3c3f-4674-b0f2-f6f8bfaa754d&quot;,&quot;parentUUID&quot;:&quot;71cc8937-542d-49dc-bd81-41bc5c9af823&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c528dcc-7113-4c4f-a390-5866662628d7&quot;,&quot;parentUUID&quot;:&quot;71cc8937-542d-49dc-bd81-41bc5c9af823&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when the ZSET does not exist&quot;,&quot;fullTitle&quot;:&quot;zrank-command test should return NIL when the ZSET does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, &#x27;zset&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ee3d781-94ab-43d6-9118-3c51cc8c9104&quot;,&quot;parentUUID&quot;:&quot;71cc8937-542d-49dc-bd81-41bc5c9af823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return NIL when the ZSET exists but the key does not&quot;,&quot;fullTitle&quot;:&quot;zrank-command test should return NIL when the ZSET exists but the key does not&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;23.3&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, &#x27;zset&#x27;, &#x27;membre&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zset&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f22a0335-5a35-490e-b2a4-c049d4b0ef9c&quot;,&quot;parentUUID&quot;:&quot;71cc8937-542d-49dc-bd81-41bc5c9af823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ee3d781-94ab-43d6-9118-3c51cc8c9104&quot;,&quot;f22a0335-5a35-490e-b2a4-c049d4b0ef9c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;3da57037-c67a-411a-99fd-649fcb54b1e7&quot;,&quot;title&quot;:&quot;zrem-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zrem-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zrem-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b882917-fc11-4cde-9f90-aca9d68408d8&quot;,&quot;parentUUID&quot;:&quot;3da57037-c67a-411a-99fd-649fcb54b1e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82562a28-f989-44c0-805d-85bbf3a2ad28&quot;,&quot;parentUUID&quot;:&quot;3da57037-c67a-411a-99fd-649fcb54b1e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44bad7a3-0075-4a32-85d8-68c60362d9c9&quot;,&quot;parentUUID&quot;:&quot;3da57037-c67a-411a-99fd-649fcb54b1e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dc9cb37-76f3-43a5-b32f-bdad96fcb7ec&quot;,&quot;parentUUID&quot;:&quot;3da57037-c67a-411a-99fd-649fcb54b1e7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a key from a sorted set&quot;,&quot;fullTitle&quot;:&quot;zrem-command test should remove a key from a sorted set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;3&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrem&#x27;, &#x27;zset&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;, &#x27;withscores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;1&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;271850ef-809f-4322-8beb-7d466006172d&quot;,&quot;parentUUID&quot;:&quot;3da57037-c67a-411a-99fd-649fcb54b1e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;271850ef-809f-4322-8beb-7d466006172d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;c67b5755-4109-42a0-83a7-3c9f33f9e7b1&quot;,&quot;title&quot;:&quot;zscore-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zscore-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zscore-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zscore-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8f2d2f2-ddd0-426c-bffb-9a323a929d0d&quot;,&quot;parentUUID&quot;:&quot;c67b5755-4109-42a0-83a7-3c9f33f9e7b1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zscore-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7cb55f0-0e6f-4737-b26d-def47b5f591a&quot;,&quot;parentUUID&quot;:&quot;c67b5755-4109-42a0-83a7-3c9f33f9e7b1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zscore-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcb7481a-4bb8-42c9-bd6c-fc3c21215175&quot;,&quot;parentUUID&quot;:&quot;c67b5755-4109-42a0-83a7-3c9f33f9e7b1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zscore-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b570af98-8b0d-49ce-bec9-b87ed932c7ce&quot;,&quot;parentUUID&quot;:&quot;c67b5755-4109-42a0-83a7-3c9f33f9e7b1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the score of a zset member&quot;,&quot;fullTitle&quot;:&quot;zscore-command test should return the score of a zset member&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;10&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zscore&#x27;, &#x27;zset&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;10&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0dc91a9-9cf8-4463-94d8-889d9168fd81&quot;,&quot;parentUUID&quot;:&quot;c67b5755-4109-42a0-83a7-3c9f33f9e7b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null when the key or member does not exist&quot;,&quot;fullTitle&quot;:&quot;zscore-command test should return null when the key or member does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zscore&#x27;, &#x27;dontexist&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;zscore&#x27;, &#x27;zset&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb66fd7f-a873-41a7-b126-be1c0be4218c&quot;,&quot;parentUUID&quot;:&quot;c67b5755-4109-42a0-83a7-3c9f33f9e7b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e0dc91a9-9cf8-4463-94d8-889d9168fd81&quot;,&quot;fb66fd7f-a873-41a7-b126-be1c0be4218c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7122f5e7-c342-4184-a64f-ce16bcb25d95&quot;,&quot;title&quot;:&quot;getset-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/getset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/getset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0324708b-c7f3-431f-875e-8b25f1e19445&quot;,&quot;parentUUID&quot;:&quot;7122f5e7-c342-4184-a64f-ce16bcb25d95&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;796fbaf6-d67d-41af-a05c-22d43dca7b2f&quot;,&quot;parentUUID&quot;:&quot;7122f5e7-c342-4184-a64f-ce16bcb25d95&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;371ef21a-a21d-4974-80a7-2575807f7162&quot;,&quot;parentUUID&quot;:&quot;7122f5e7-c342-4184-a64f-ce16bcb25d95&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ace82ec-6175-4262-a0a5-acf9aeda216b&quot;,&quot;parentUUID&quot;:&quot;7122f5e7-c342-4184-a64f-ce16bcb25d95&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when the original key does not exist&quot;,&quot;fullTitle&quot;:&quot;getset-command test should report NIL when the original key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;getset&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a549e2b1-ba60-4351-b392-1dab5fdaec6c&quot;,&quot;parentUUID&quot;:&quot;7122f5e7-c342-4184-a64f-ce16bcb25d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the previous value of the key&quot;,&quot;fullTitle&quot;:&quot;getset-command test should report the previous value of the key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;getset&#x27;, uniqueKey, &#x27;ninety nine&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;0&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;getset&#x27;, uniqueKey, &#x27;nothing&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ninety nine&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff91000c-79d7-4e16-8e08-1c6b0579d29d&quot;,&quot;parentUUID&quot;:&quot;7122f5e7-c342-4184-a64f-ce16bcb25d95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a549e2b1-ba60-4351-b392-1dab5fdaec6c&quot;,&quot;ff91000c-79d7-4e16-8e08-1c6b0579d29d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;title&quot;:&quot;incr/decr command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/incr-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/incr-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a millisecond TTL to validate incr respects TTL\n    common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;, &#x27;3&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6802cf7-712f-4927-bb7d-9d0b6bedc9e6&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6b89154-95bd-424f-be80-59278a28466d&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69dd941d-8d71-4cba-b3a1-36568c9604ff&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;429658e3-c9dd-44b6-8f53-398d81b5862d&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ONE when incr called against unknown key&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should report ONE when incr called against unknown key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, &#x27;incr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5a034bc-7c22-4fe6-a94b-d9fa9d0f6ec6&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;get&#x27;, &#x27;incr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;1&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f1b75df-341a-44cb-8ff8-be7289ab3faa&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;incr-key&#x27;, &#x27;9007199254740990&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, &#x27;incr-key&#x27;]);\n            chai_1.expect(response).to.equal(Number.MAX_SAFE_INTEGER);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, &#x27;incr-key&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6f8c9f6-a6b0-4b72-9c36-bf344538917b&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report -1 when decr called against unknown key&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should report -1 when decr called against unknown key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;decr&#x27;, &#x27;decr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(-1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c66272a-af7d-4d60-8c12-478b6ce3a052&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;get&#x27;, &#x27;decr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;-1&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;849ff9b9-b14f-4d88-b0e7-dd9ce6d46bbe&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;decr-key&#x27;, &#x27;-9007199254740990&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;decr&#x27;, &#x27;decr-key&#x27;]);\n            chai_1.expect(response).to.equal(Number.MIN_SAFE_INTEGER);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;decr&#x27;, &#x27;decr-key&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ccfa2d5-67b5-4aa4-b826-cf6a6c66c5e4&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect TTL&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should respect TTL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;get&#x27;, &#x27;ttlkey&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6345cf81-6777-4e9f-93ef-3a84004412e7&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to increment a HASH value&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should fail to increment a HASH value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `test-incr-${new Date().getTime()}`;\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b777a368-7344-4a67-8ef6-45b08fca51d3&quot;,&quot;parentUUID&quot;:&quot;1f842b13-5b01-45b5-ba12-65550308e093&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5a034bc-7c22-4fe6-a94b-d9fa9d0f6ec6&quot;,&quot;3f1b75df-341a-44cb-8ff8-be7289ab3faa&quot;,&quot;a6f8c9f6-a6b0-4b72-9c36-bf344538917b&quot;,&quot;2c66272a-af7d-4d60-8c12-478b6ce3a052&quot;,&quot;849ff9b9-b14f-4d88-b0e7-dd9ce6d46bbe&quot;,&quot;0ccfa2d5-67b5-4aa4-b826-cf6a6c66c5e4&quot;,&quot;6345cf81-6777-4e9f-93ef-3a84004412e7&quot;,&quot;b777a368-7344-4a67-8ef6-45b08fca51d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;title&quot;:&quot;incrby/decrby command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/incrby-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/incrby-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a millisecond TTL to validate incrby respects TTL\n    common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;, &#x27;3&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9b6845b-8ade-4ca7-8406-2e4ae1d5cfdc&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fbd844c-f6f4-4826-9449-a6ea65f05540&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0c08131-772e-42e3-947c-973f919a5d60&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;258e578c-ab0d-45fd-ba07-e28c8a0d72eb&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report the INCREMENT when incrby called against non-existing key&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should report the INCREMENT when incrby called against non-existing key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;incr-key&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        // This is how redis behaves\n        chai_1.expect(response).to.equal(10);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1c88026-81dd-4fcf-a638-9e0d1e746651&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;incr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;10&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e1e3a14-8199-47e0-b4f2-dd4770d78b16&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;incr-key&#x27;, &#x27;9007199254740981&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;incr-key&#x27;, &#x27;10&#x27;]);\n            chai_1.expect(response).to.equal(Number.MAX_SAFE_INTEGER);\n            response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;incr-key&#x27;, &#x27;110&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45ae12db-7a2e-402e-b7cd-9fff985d73f4&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the NEGATIVE increment when decrby called against unknown key&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should report the NEGATIVE increment when decrby called against unknown key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;decrby&#x27;, &#x27;decr-key&#x27;, &#x27;12&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(-12);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9ede633-a159-4877-b3c8-0593356164a2&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support negative increment and positive decrement&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should support negative increment and positive decrement&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;negincr&#x27;, &#x27;-12&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(-12);\n        response = yield common_test_1.sendCommand(client, [&#x27;decrby&#x27;, &#x27;negincr&#x27;, &#x27;-24&#x27;]);\n        chai_1.expect(response).to.equal(12);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbf8e49a-be6e-448f-a195-3201ae3bf15e&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;decr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;-12&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;900ebde3-1014-4dff-8107-2e52579bae9e&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;decr-key&#x27;, &#x27;-9007199254740981&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;decrby&#x27;, &#x27;decr-key&#x27;, &#x27;10&#x27;]);\n            chai_1.expect(response).to.equal(Number.MIN_SAFE_INTEGER);\n            // This does not seem to be exact\n            // response = await sendCommand(client, [&#x27;decrby&#x27;, &#x27;decr-key&#x27;, String(Number.MAX_SAFE_INTEGER)]);\n            // expect(response).to.equal(&#x27;ReplyError: Error: increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c35ece0-c426-4458-a2bf-5cc320bcf641&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect TTL&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should respect TTL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;ttlkey&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4fd4130-2eda-423c-b358-a15298a899bc&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to increment a HASH value&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should fail to increment a HASH value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `test-incr-${new Date().getTime()}`;\n        let response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, uniqueKey, &#x27;12&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f3c535f-acd6-4678-9500-1ecbb74e0fa9&quot;,&quot;parentUUID&quot;:&quot;a8e4bc1a-f5d5-4676-8956-82fb0c750cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1c88026-81dd-4fcf-a638-9e0d1e746651&quot;,&quot;2e1e3a14-8199-47e0-b4f2-dd4770d78b16&quot;,&quot;45ae12db-7a2e-402e-b7cd-9fff985d73f4&quot;,&quot;f9ede633-a159-4877-b3c8-0593356164a2&quot;,&quot;fbf8e49a-be6e-448f-a195-3201ae3bf15e&quot;,&quot;900ebde3-1014-4dff-8107-2e52579bae9e&quot;,&quot;3c35ece0-c426-4458-a2bf-5cc320bcf641&quot;,&quot;e4fd4130-2eda-423c-b358-a15298a899bc&quot;,&quot;8f3c535f-acd6-4678-9500-1ecbb74e0fa9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;title&quot;:&quot;mget-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/mget-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/mget-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67914eed-48fc-4771-ad45-73c48aebdb25&quot;,&quot;parentUUID&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64e0858f-78d6-4c65-b906-1862570b687a&quot;,&quot;parentUUID&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38d2c29b-9a53-46dd-afd4-1dc976c1a466&quot;,&quot;parentUUID&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f3d32f0-313c-4e67-88fd-eff29f700288&quot;,&quot;parentUUID&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;mget-command test should return NIL when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mget&#x27;, &#x27;zset&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.eql([null, null]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;108476ef-8c6d-4641-baad-7240c2ffe2c7&quot;,&quot;parentUUID&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return multiple values for string keys as requested&quot;,&quot;fullTitle&quot;:&quot;mget-command test should return multiple values for string keys as requested&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mset&#x27;, &#x27;key1&#x27;, &#x27;1&#x27;, &#x27;key2&#x27;, &#x27;2&#x27;, &#x27;key3&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;mget&#x27;, &#x27;key2&#x27;, &#x27;key1&#x27;, &#x27;noneya&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;2&#x27;, &#x27;1&#x27;, null, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cbf4c75-bb47-4c15-a50c-075a3f1e6014&quot;,&quot;parentUUID&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return NIL for ZSET, LIST, and HASH types as well&quot;,&quot;fullTitle&quot;:&quot;mget-command test should return NIL for ZSET, LIST, and HASH types as well&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;list&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, &#x27;hash&#x27;, &#x27;field&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;mget&#x27;, &#x27;key2&#x27;, &#x27;key1&#x27;, &#x27;list&#x27;, &#x27;key3&#x27;, &#x27;hash&#x27;, &#x27;zset&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;2&#x27;, &#x27;1&#x27;, null, &#x27;3&#x27;, null, null]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22e0a36b-8c6a-4231-8721-4a4a5ae46b33&quot;,&quot;parentUUID&quot;:&quot;7b4bf5c3-c3c4-4415-aa25-c3f789139a10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;108476ef-8c6d-4641-baad-7240c2ffe2c7&quot;,&quot;1cbf4c75-bb47-4c15-a50c-075a3f1e6014&quot;,&quot;22e0a36b-8c6a-4231-8721-4a4a5ae46b33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b083eeed-38ef-46d6-bd81-908bc42617ff&quot;,&quot;title&quot;:&quot;mset-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/mset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/mset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34b97a4a-1ce5-4327-bd75-9431919a6a82&quot;,&quot;parentUUID&quot;:&quot;b083eeed-38ef-46d6-bd81-908bc42617ff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23a6bad9-7b3c-4e88-ad39-c304d15dd01d&quot;,&quot;parentUUID&quot;:&quot;b083eeed-38ef-46d6-bd81-908bc42617ff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c97524dc-4278-45af-8659-761ed60bf037&quot;,&quot;parentUUID&quot;:&quot;b083eeed-38ef-46d6-bd81-908bc42617ff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8efff56f-a438-495d-ba5b-027c486c9ffa&quot;,&quot;parentUUID&quot;:&quot;b083eeed-38ef-46d6-bd81-908bc42617ff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create multiple keys at once&quot;,&quot;fullTitle&quot;:&quot;mset-command test should create multiple keys at once&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mset&#x27;, &#x27;key1&#x27;, &#x27;Hello&#x27;, &#x27;key2&#x27;, &#x27;world&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;key1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;Hello&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;key2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;world&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2732cc89-1d8b-44db-b720-e574accdd8d4&quot;,&quot;parentUUID&quot;:&quot;b083eeed-38ef-46d6-bd81-908bc42617ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only accept an even number of parameters&quot;,&quot;fullTitle&quot;:&quot;mset-command test should only accept an even number of parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;msEt&#x27;, &#x27;wrong&#x27;, &#x27;number&#x27;, &#x27;of&#x27;]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for MSET/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;577a3ef9-47ce-414b-8c1e-dc8ab9b7ec9a&quot;,&quot;parentUUID&quot;:&quot;b083eeed-38ef-46d6-bd81-908bc42617ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2732cc89-1d8b-44db-b720-e574accdd8d4&quot;,&quot;577a3ef9-47ce-414b-8c1e-dc8ab9b7ec9a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;title&quot;:&quot;set-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/set-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/set-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aac8eba0-32d0-438d-8527-8edcf36704b4&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fff521b9-6adb-485b-b297-75aa64c6ca7b&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba2dccab-5f94-4e61-b464-8c7fd1ef0efb&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56ab9884-fc32-4961-a368-68a85520d607&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow us to set a several second ttl&quot;,&quot;fullTitle&quot;:&quot;set-command test should allow us to set a several second ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // During local testing there are 8 milliseconds from put to get\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;TTLtest&#x27;, &#x27;key&#x27;, &#x27;EX&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2b632cd-a69f-4bb5-8ba9-4e154466247f&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke NX after XX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke NX after XX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;XX&#x27;, &#x27;NX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79636343-fde3-49f4-8613-b285f1923b24&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke XX after NX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke XX after NX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;NX&#x27;, &#x27;XX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6c302b0-77c0-455b-ac89-78cffb3f516b&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nil when SET invoked with XX on a key that doesn&#x27;t exist&quot;,&quot;fullTitle&quot;:&quot;set-command test should return nil when SET invoked with XX on a key that doesn&#x27;t exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `TEST${new Date().getTime()}`;\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;key&#x27;, &#x27;XX&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be6b95ab-2013-495b-9c6e-a5f5f47bf7f4&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return OK when SET invoked with XX on a key that DOES exist&quot;,&quot;fullTitle&quot;:&quot;set-command test should return OK when SET invoked with XX on a key that DOES exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `TEST${new Date().getTime()}`;\n        // set the key with NX first to validate that functionality\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;key&#x27;, &#x27;NX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;new value&#x27;, &#x27;XX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        // Now validate that the key is what we said last\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;new value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bc3b91d-0da6-4923-b811-9793e3de57a1&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke EX and PX simultaneously&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke EX and PX simultaneously&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Note: Our behavior is different from redis.  This error is &#x27;wrong number of args&#x27;\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;EX&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.match(/^ReplyError: ERR syntax error/);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4660e52-4c95-4f55-b2db-95a7c7e5803e&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow us to set a millisecond ttl&quot;,&quot;fullTitle&quot;:&quot;set-command test should allow us to set a millisecond ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // During local teseting there are 8 milliseconds from put to get\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;MILLItest&#x27;, &#x27;key&#x27;, &#x27;PX&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb6fb260-0cf6-499c-8a6b-d5d98b231eb9&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should prove that the one second TTL has expired&quot;,&quot;fullTitle&quot;:&quot;set-command test should prove that the one second TTL has expired&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1003,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(() =&gt; {\n    common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;TTLtest&#x27;])\n        .then((responseGet) =&gt; {\n        chai_1.expect(responseGet).to.equal(null);\n        done();\n    });\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6ffa0b2-bc05-463f-b487-ccd22d4bc0c1&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept unknown parameters&quot;,&quot;fullTitle&quot;:&quot;set-command test should not accept unknown parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;Q&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75ebdcf1-f8fe-47c4-a7dd-80cd12e8d7fb&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke PX after EX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke PX after EX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;EX&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1a20c10-e68a-40d1-afff-2619b7948d14&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke EX after PX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke EX after PX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;PX&#x27;, &#x27;100&#x27;, &#x27;EX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1cccb81-c10e-466d-8b0a-b0147a6fdd6c&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a TTL less than 1ms&quot;,&quot;fullTitle&quot;:&quot;set-command test should not allow a TTL less than 1ms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;MILLItest&#x27;, &#x27;key&#x27;, &#x27;PX&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR invalid expire time in set&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;595a1e0d-1b84-4d8d-8101-6cdf6844f66e&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should prove that the millisecond TTL has expired&quot;,&quot;fullTitle&quot;:&quot;set-command test should prove that the millisecond TTL has expired&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(() =&gt; {\n    common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;MILLItest&#x27;])\n        .then((responseGet) =&gt; {\n        chai_1.expect(responseGet).to.equal(null);\n        done();\n    });\n}, 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6f91263-7ad5-423f-827f-b8e808f94b6e&quot;,&quot;parentUUID&quot;:&quot;3e46c6a4-1eb0-4b94-bc09-d6c7b34135ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b2b632cd-a69f-4bb5-8ba9-4e154466247f&quot;,&quot;79636343-fde3-49f4-8613-b285f1923b24&quot;,&quot;f6c302b0-77c0-455b-ac89-78cffb3f516b&quot;,&quot;be6b95ab-2013-495b-9c6e-a5f5f47bf7f4&quot;,&quot;5bc3b91d-0da6-4923-b811-9793e3de57a1&quot;,&quot;a4660e52-4c95-4f55-b2db-95a7c7e5803e&quot;,&quot;fb6fb260-0cf6-499c-8a6b-d5d98b231eb9&quot;,&quot;b6ffa0b2-bc05-463f-b487-ccd22d4bc0c1&quot;,&quot;75ebdcf1-f8fe-47c4-a7dd-80cd12e8d7fb&quot;,&quot;c1a20c10-e68a-40d1-afff-2619b7948d14&quot;,&quot;b1cccb81-c10e-466d-8b0a-b0147a6fdd6c&quot;,&quot;595a1e0d-1b84-4d8d-8101-6cdf6844f66e&quot;,&quot;d6f91263-7ad5-423f-827f-b8e808f94b6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1031,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;832adddb-ce91-4fa5-a117-a8c3e2f9d45e&quot;,&quot;title&quot;:&quot;setnx-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/setnx-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/setnx-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c56c5f01-d89b-4ae8-858b-6285a6a5ef0a&quot;,&quot;parentUUID&quot;:&quot;832adddb-ce91-4fa5-a117-a8c3e2f9d45e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c11e95e-ea1c-4a07-a003-40fc2d3f917c&quot;,&quot;parentUUID&quot;:&quot;832adddb-ce91-4fa5-a117-a8c3e2f9d45e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e35562a-593d-455a-9e13-6b5af3104036&quot;,&quot;parentUUID&quot;:&quot;832adddb-ce91-4fa5-a117-a8c3e2f9d45e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b14de82d-8e85-4308-bf72-8258a829bb34&quot;,&quot;parentUUID&quot;:&quot;832adddb-ce91-4fa5-a117-a8c3e2f9d45e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 1 when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;setnx-command test should return 1 when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;setnx&#x27;, &#x27;test&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2343917e-4812-40fd-98fe-028234ad2050&quot;,&quot;parentUUID&quot;:&quot;832adddb-ce91-4fa5-a117-a8c3e2f9d45e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when the key already exists&quot;,&quot;fullTitle&quot;:&quot;setnx-command test should return 0 when the key already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;setnx&#x27;, &#x27;test&#x27;, &#x27;other&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bd8ab7f-d6d5-447b-b68a-ca807b628cfe&quot;,&quot;parentUUID&quot;:&quot;832adddb-ce91-4fa5-a117-a8c3e2f9d45e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2343917e-4812-40fd-98fe-028234ad2050&quot;,&quot;5bd8ab7f-d6d5-447b-b68a-ca807b628cfe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a6c8e8d7-930f-4027-9f7f-2a5c49bc7638&quot;,&quot;title&quot;:&quot;data-type test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/data-type.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/data-type.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7b40f69-4d46-46a8-9c3f-df280fa8e63b&quot;,&quot;parentUUID&quot;:&quot;a6c8e8d7-930f-4027-9f7f-2a5c49bc7638&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b205a01f-eec1-4627-a18b-89f340923dc5&quot;,&quot;parentUUID&quot;:&quot;a6c8e8d7-930f-4027-9f7f-2a5c49bc7638&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85986c8a-1287-481b-8f7c-c6c8d08e2a2d&quot;,&quot;parentUUID&quot;:&quot;a6c8e8d7-930f-4027-9f7f-2a5c49bc7638&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should enumerate data-types&quot;,&quot;fullTitle&quot;:&quot;data-type test should enumerate data-types&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        chai_1.expect(data_type_1.DataType.NONE).to.equal(&#x27;none&#x27;);\n        chai_1.expect(data_type_1.DataType.STRING).to.equal(&#x27;string&#x27;);\n        chai_1.expect(data_type_1.DataType.LIST).to.equal(&#x27;list&#x27;);\n        chai_1.expect(data_type_1.DataType.SET).to.equal(&#x27;set&#x27;);\n        chai_1.expect(data_type_1.DataType.ZSET).to.equal(&#x27;zset&#x27;);\n        chai_1.expect(data_type_1.DataType.HASH).to.equal(&#x27;hash&#x27;);\n        chai_1.expect(Object.keys(data_type_1.DataType).length).to.equal(6);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47646d04-a719-4c90-a5d4-dff5e591276b&quot;,&quot;parentUUID&quot;:&quot;a6c8e8d7-930f-4027-9f7f-2a5c49bc7638&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47646d04-a719-4c90-a5d4-dff5e591276b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;title&quot;:&quot;sorted-set test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();\nss = new sorted_set_1.SortedSet();\nz = new Z();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bd0839a-62eb-468e-a8c8-5526e76ced3a&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;720acd5b-73f2-4c64-8e09-72fb14b8da40&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b614d120-38cd-4b1d-ad94-cdcc5c2875f2&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should instantiate&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should instantiate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        chai_1.expect(z.constructor.name).to.equal(&#x27;Z&#x27;);\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(ss.constructor.name).to.equal(&#x27;SortedSet&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7e728c2-1f63-477b-8249-160dd11a0a43&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add, get, and delete an entry&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should add, get, and delete an entry&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, 1);\n        chai_1.expect(added).to.equal(null);\n        added = ss.add(&#x27;test&#x27;, 1);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(z.keys().length).to.equal(1);\n        chai_1.expect(ss.keys().length).to.equal(1);\n        let item = z.get(&#x27;test&#x27;);\n        chai_1.expect(item.constructor.name).to.equal(&#x27;Number&#x27;);\n        item = ss.get(&#x27;test&#x27;);\n        chai_1.expect(item.constructor.name).to.equal(&#x27;Number&#x27;);\n        z.del(&#x27;test&#x27;);\n        chai_1.expect(z.keys().length).to.equal(0);\n        ss.del(&#x27;test&#x27;);\n        chai_1.expect(ss.keys().length).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a9cc5bc-d1e1-441b-8b9c-c9ebda4f01ef&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw when attempting to add __proto__ key&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should throw when attempting to add __proto__ key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(() =&gt; {\n            z.add(&#x27;__proto__&#x27;, 0);\n        }).to.throw();\n        // expect(() =&gt; {\n        //   ss.add(&#x27;__proto__&#x27;, 0)\n        // }).to.throw();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f30dd35f-5da0-4beb-8df0-5ddc45efefb7&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not add an undefined or null score&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should not add an undefined or null score&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, null);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(z.keys().length).to.equal(0);\n        added = z.add(&#x27;test&#x27;, undefined);\n        chai_1.expect(z.keys().length).to.equal(0);\n        // Typescript prevents adding null\n        // added = ss.add(&#x27;test&#x27;, null);\n        // expect(added).to.equal(null);\n        // expect(ss.keys().length).to.equal(0);\n        // added = ss.add(&#x27;test&#x27;, undefined);\n        // expect(z.keys().length).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b144ef57-0359-4b34-843e-807b223b7a1a&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not duplicate key/value pairs&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should not duplicate key/value pairs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null); // This is weird\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = z.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(123); // and weirder\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = ss.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null); // This is weird\n        chai_1.expect(ss.keys().length).to.equal(1);\n        added = ss.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(123); // and weirder\n        chai_1.expect(ss.keys().length).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71318e3f-188a-4699-a148-2ee77638b310&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the old rank when replacing a key&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should return the old rank when replacing a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = z.add(&#x27;test&#x27;, 321);\n        chai_1.expect(added).to.equal(123);\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = z.get(&#x27;test&#x27;);\n        chai_1.expect(added).to.equal(321);\n        added = ss.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(ss.keys().length).to.equal(1);\n        added = ss.add(&#x27;test&#x27;, 321);\n        chai_1.expect(added).to.equal(123);\n        chai_1.expect(ss.keys().length).to.equal(1);\n        added = ss.get(&#x27;test&#x27;);\n        chai_1.expect(added).to.equal(321);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dcd5dbb-0617-4153-b308-ca2753b831b1&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a value when adding at least 32 values (I think - it is difficult to tell)&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should return a value when adding at least 32 values (I think - it is difficult to tell)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40112fd6-32ec-460a-a094-baabee9c9908&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(z.add(&#x27;Terminator&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(z.add(&#x27;District 9&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(z.add(&#x27;Ex Machina&#x27;, 0.7)).to.equal(null); // =&gt; null\n        chai_1.expect(z.add(&#x27;Ex Machina&#x27;, 7.7)).to.equal(0.7); // =&gt; 0.7\n        // alias\n        chai_1.expect(z.set(&#x27;The Matrix&#x27;, 8.7)).to.equal(null); // =&gt; null\n        // average O(1)\n        chai_1.expect(z.has(&#x27;Terminator&#x27;)).to.equal(true); // =&gt; true\n        chai_1.expect(z.has(&#x27;Blade Runner&#x27;)).to.equal(false); // =&gt; false\n        // average O(1)\n        chai_1.expect(z.score(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        chai_1.expect(z.score(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(z.get(&#x27;The Matrix&#x27;)).to.equal(8.7); // =&gt; 8.7\n        // average O(log(N))\n        chai_1.expect(z.rem(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        // average O(1)\n        chai_1.expect(z.rem(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(z.del(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M is the number of elements between min and max\n        // This is not working as expected\n        chai_1.expect(z.rangeByScore(7, 8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        chai_1.expect(z.rangeByScore(8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]); // [8.0-)\n        // =&gt; [&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]\n        chai_1.expect(z.rangeByScore(8, null, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]\n        // average O(log(N)+log(M)) where M as in rangeByScore\n        // Again - not as expected\n        chai_1.expect(z.count(7, 8)).to.equal(2); // =&gt; 3\n        // average O(log(N))\n        // Not working as expected\n        chai_1.expect(z.rank(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; 0\n        // Not working as expected\n        chai_1.expect(z.rank(&#x27;Terminator&#x27;)).to.equal(1); // =&gt; 2\n        chai_1.expect(z.rank(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M as in range\n        // Not working as expected\n        chai_1.expect(z.range(0, 2)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Not working as expected\n        chai_1.expect(z.range(0, 2, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8], [&#x27;Terminator&#x27;, 8], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;Ex Machina&#x27;, 7.7],\n        //     [&#x27;District 9&#x27;, 8],\n        //     [&#x27;Terminator&#x27;, 8]]\n        chai_1.expect(z.range(-1)).to.eql([&#x27;The Matrix&#x27;]); // =&gt; [&#x27;The Matrix&#x27;]\n        // almost alias\n        // Not working as expected\n        chai_1.expect(z.slice(0, 3)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Set cardinality (number of elements)\n        // average O(1)\n        // Not working as expected\n        chai_1.expect(z.card()).to.equal(3); // =&gt; 4\n        // alias\n        // Not working as expected\n        chai_1.expect(z.length).to.equal(3); // =&gt; 4\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;672000f1-b7bd-4c5e-8af7-23c128403b4f&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;the rewrite should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;fullTitle&quot;:&quot;sorted-set test the rewrite should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(ss.add(&#x27;Terminator&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(ss.add(&#x27;District 9&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(ss.add(&#x27;Ex Machina&#x27;, 0.7)).to.equal(null); // =&gt; null\n        chai_1.expect(ss.add(&#x27;Ex Machina&#x27;, 7.7)).to.equal(0.7); // =&gt; 0.7\n        // alias\n        chai_1.expect(ss.set(&#x27;The Matrix&#x27;, 8.7)).to.equal(null); // =&gt; null\n        // average O(1)\n        chai_1.expect(ss.has(&#x27;Terminator&#x27;)).to.equal(true); // =&gt; true\n        chai_1.expect(ss.has(&#x27;Blade Runner&#x27;)).to.equal(false); // =&gt; false\n        // average O(1)\n        chai_1.expect(ss.score(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        chai_1.expect(ss.score(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(ss.get(&#x27;The Matrix&#x27;)).to.equal(8.7); // =&gt; 8.7\n        // average O(log(N))\n        chai_1.expect(ss.rem(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        // average O(1)\n        chai_1.expect(ss.rem(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(ss.del(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M is the number of elements between min and max\n        // This is not working as expected\n        chai_1.expect(ss.rangeByScore(7, 8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        chai_1.expect(ss.rangeByScore(8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]); // [8.0-)\n        // =&gt; [&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]\n        chai_1.expect(ss.rangeByScore(8, null, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]\n        // average O(log(N)+log(M)) where M as in rangeByScore\n        // Again - not as expected\n        chai_1.expect(ss.count(7, 8)).to.equal(2); // =&gt; 3\n        // average O(log(N))\n        // Not working as expected\n        chai_1.expect(ss.rank(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; 0\n        // Not working as expected\n        chai_1.expect(ss.rank(&#x27;Terminator&#x27;)).to.equal(1); // =&gt; 2\n        chai_1.expect(ss.rank(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M as in range\n        // Not working as expected\n        chai_1.expect(ss.range(0, 2)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Not working as expected\n        chai_1.expect(ss.range(0, 2, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8], [&#x27;Terminator&#x27;, 8], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;Ex Machina&#x27;, 7.7],\n        //     [&#x27;District 9&#x27;, 8],\n        //     [&#x27;Terminator&#x27;, 8]]\n        chai_1.expect(ss.range(-1)).to.eql([&#x27;The Matrix&#x27;]); // =&gt; [&#x27;The Matrix&#x27;]\n        // almost alias\n        // Not working as expected\n        chai_1.expect(ss.slice(0, 3)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Set cardinality (number of elements)\n        // average O(1)\n        // Not working as expected\n        chai_1.expect(ss.card()).to.equal(3); // =&gt; 4\n        // alias\n        // Not working as expected\n        chai_1.expect(ss.length).to.equal(3); // =&gt; 4\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;900b548f-6b3b-42bc-93b2-a051b612efaf&quot;,&quot;parentUUID&quot;:&quot;89d4cbf7-f1e1-4eec-837a-064f6f893c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;20e584ca-6967-4eef-8e4b-3ad36bedea5e&quot;,&quot;title&quot;:&quot;skip map&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);\nchai_1.expect(z.range()).to.eql([]);\nchai_1.expect(z.rangeByScore()).to.eql([]);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;__proto__&#x27;, 14);\n}).to.throw();\nz.add(&#x27;5a600e16&#x27;, 8);\nz.add(&#x27;5a600e17&#x27;, 9);\nchai_1.expect(z.add(&#x27;5a600e18&#x27;, 10)).to.equal(null);\nchai_1.expect(z.add(&#x27;5a600e17&#x27;, 12)).to.equal(9);\nchai_1.expect(z).to.have.length(3);\nchai_1.expect(z.toArray()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(z.toArray()).to.eql(z.range(0, -1));\nchai_1.expect(z.toArray()).to.eql(z.rangeByScore());\nchai_1.expect(z.has(&#x27;5a600e16&#x27;)).to.be.ok;\nchai_1.expect(z.has(&#x27;5a600e17&#x27;)).to.be.ok;\nchai_1.expect(z.has(&#x27;5a600e18&#x27;)).to.be.ok;\nchai_1.expect(z.has(&#x27;5a600e19&#x27;)).to.not.be.ok;\nchai_1.expect(z.score(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(z.score(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(z.score(&#x27;5a600e18&#x27;)).to.equal(10);\nchai_1.expect(z.score(&#x27;5a600e19&#x27;)).to.equal(null);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(z).to.have.length(2);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(null);\nchai_1.expect(z).to.have.length(2);\nchai_1.expect(z.has(&#x27;5a600e16&#x27;)).to.not.be.ok;\nchai_1.expect(z.toArray()).to.eql([&#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(z.toArray({ withScores: true }))\n    .to.eql(z.range(0, -1, { withScores: true }));\nchai_1.expect(z.toArray()).to.eql(z.rangeByScore());\nz.add(&#x27;5a600e16&#x27;, 10);\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nchai_1.expect(z).to.have.length(9);\n// no change, so should be O(1)\nz.add(&#x27;5a600e17&#x27;, 12);\nchai_1.expect(z.rank(&#x27;5a600e17&#x27;)).to.equal(4);\nchai_1.expect(z).to.have.length(9);\nchai_1.expect(z.toArray()).to.eql([\n    &#x27;5a600e16&#x27;,\n    &#x27;5a600e11&#x27;,\n    &#x27;5a600e18&#x27;,\n    &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;,\n    &#x27;5a600e14&#x27;,\n    &#x27;5a600e10&#x27;,\n    &#x27;5a600e12&#x27;,\n    &#x27;5a600e15&#x27;,\n]);\nchai_1.expect(z.toArray()).to.eql(z.range(0, -1));\nchai_1.expect(z.toArray()).to.eql(z.rangeByScore());\nchai_1.expect(z.rangeByScore(14, 16, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;754d4bc6-41b5-4295-aa96-bbf096a2752c&quot;,&quot;parentUUID&quot;:&quot;20e584ca-6967-4eef-8e4b-3ad36bedea5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5204e910-b588-4ead-a579-00b94b091a7f&quot;,&quot;title&quot;:&quot;#add&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should implicitly delete&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #add should implicitly delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.add(&#x27;5a600e14&#x27;, null)).to.equal(14);\nchai_1.expect(z.add(&#x27;5a600e19&#x27;, null)).to.equal(null);\nchai_1.expect(z).to.have.length(8);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7aec0d7-a07f-4f2e-b1c9-02fff3f95ec9&quot;,&quot;parentUUID&quot;:&quot;5204e910-b588-4ead-a579-00b94b091a7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d7aec0d7-a07f-4f2e-b1c9-02fff3f95ec9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;71c35160-36c9-4721-9664-7cf128b9719e&quot;,&quot;title&quot;:&quot;#empty&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #empty should remove all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nz.empty();\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f5083b9-8c99-4ca5-b71b-3ea0b9d2634c&quot;,&quot;parentUUID&quot;:&quot;71c35160-36c9-4721-9664-7cf128b9719e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f5083b9-8c99-4ca5-b71b-3ea0b9d2634c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;2916ae87-7a40-4ed2-ba05-3cd674131cbf&quot;,&quot;title&quot;:&quot;#incrBy(increment, key)&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #incrBy(increment, key) should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.add(&#x27;second&#x27;, 2);\nz.add(&#x27;third&#x27;, 3);\nz.add(&#x27;fourth&#x27;, 4);\nchai_1.expect(z.incrBy(2, &#x27;first&#x27;)).to.equal(3);\nchai_1.expect(z.rank(&#x27;first&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58d2a1c8-a52e-4364-9881-fa61ca41a2ac&quot;,&quot;parentUUID&quot;:&quot;2916ae87-7a40-4ed2-ba05-3cd674131cbf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create if not found&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #incrBy(increment, key) should create if not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.incrBy(2, &#x27;second&#x27;);\nchai_1.expect(z.card()).to.equal(2);\nchai_1.expect(z.rank(&#x27;second&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38a2bfe3-b40c-4da6-8aee-a339e174943d&quot;,&quot;parentUUID&quot;:&quot;2916ae87-7a40-4ed2-ba05-3cd674131cbf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;58d2a1c8-a52e-4364-9881-fa61ca41a2ac&quot;,&quot;38a2bfe3-b40c-4da6-8aee-a339e174943d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;5529e6f5-d7b4-4391-9190-9292d042c243&quot;,&quot;title&quot;:&quot;#keys&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the keys&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #keys should return the keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.keys()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e11&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e14&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e12&#x27;, &#x27;5a600e15&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;641c1458-6e8b-4565-964d-c4e8a6f1614d&quot;,&quot;parentUUID&quot;:&quot;5529e6f5-d7b4-4391-9190-9292d042c243&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;641c1458-6e8b-4565-964d-c4e8a6f1614d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;c5bd54fc-63fc-427c-b4be-9f32ac4ddada&quot;,&quot;title&quot;:&quot;#rangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rangeByScore should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rangeByScore(14, null, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);\nchai_1.expect(z.rangeByScore(null, 10, { withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n]);\nchai_1.expect(z.rangeByScore(-Infinity, Infinity)).to.eql(z.toArray());\nchai_1.expect(z.rangeByScore(null, null)).to.eql(z.toArray());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5e819a9-f637-41d3-91cf-e2cd90d4d340&quot;,&quot;parentUUID&quot;:&quot;c5bd54fc-63fc-427c-b4be-9f32ac4ddada&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5e819a9-f637-41d3-91cf-e2cd90d4d340&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;c5197318-2e65-41b0-9bb3-625eff7d0e36&quot;,&quot;title&quot;:&quot;#count&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should count elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #count should count elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nchai_1.expect(z.count()).to.equal(0);\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nz.add(&#x27;5a600e19&#x27;, 14);\nz.add(&#x27;5a600f00&#x27;, 30.0);\nz.add(&#x27;5a600f01&#x27;, 30.5);\nz.add(&#x27;5a600f02&#x27;, 31.0);\nz.add(&#x27;5a600f03&#x27;, 31.5);\nz.add(&#x27;5a600f04&#x27;, 32.0);\nz.add(&#x27;5a600f05&#x27;, 32.0);\nz.add(&#x27;5a600f06&#x27;, 32.0);\nchai_1.expect(z.count()).to.eql(z.rangeByScore().length);\nchai_1.expect(z.count(8)).to.eql(z.rangeByScore(8).length);\nchai_1.expect(z.count(3, 7)).to.eql(z.rangeByScore(3, 7).length);\nchai_1.expect(z.count(5, 14)).to.eql(z.rangeByScore(5, 14).length);\nchai_1.expect(z.count(5, 5)).to.eql(z.rangeByScore(5, 5).length);\nchai_1.expect(z.count(5, 0)).to.eql(z.rangeByScore(5, 0).length);\nchai_1.expect(z.count(30, 32)).to.eql(z.rangeByScore(30, 32).length);\nchai_1.expect(z.count(40)).to.eql(z.rangeByScore(40).length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14b7d69e-3d5e-4241-8228-f2df24321e60&quot;,&quot;parentUUID&quot;:&quot;c5197318-2e65-41b0-9bb3-625eff7d0e36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14b7d69e-3d5e-4241-8228-f2df24321e60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;fe9855ea-38b2-4a59-b20f-cc8f0db3e478&quot;,&quot;title&quot;:&quot;#range&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #range should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.add(&#x27;second&#x27;, 2);\nz.add(&#x27;third&#x27;, 3);\nz.add(&#x27;fourth&#x27;, 4);\nvar array = [&#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;, &#x27;fourth&#x27;];\nchai_1.expect(z.range()).to.eql(array);\nchai_1.expect(z.range(2)).to.eql(array.slice(2));\nchai_1.expect(z.range(8)).to.eql(array.slice(8));\nchai_1.expect(z.range(0, 2)).to.eql(array.slice(0, 3));\nchai_1.expect(z.range(-1)).to.eql([&#x27;fourth&#x27;]);\nchai_1.expect(z.range(-4)).to.eql(array);\nchai_1.expect(z.range(-4, -2)).to.eql(array.slice(0, 3));\nchai_1.expect(z.range(-4, z.length + 1000))\n    .to.eql(array.slice(-4, z.length + 1000));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11d0692c-a29a-4284-8f90-785e6949ca12&quot;,&quot;parentUUID&quot;:&quot;fe9855ea-38b2-4a59-b20f-cc8f0db3e478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support withScores&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #range should support withScores&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.add(&#x27;second&#x27;, 2);\nchai_1.expect(z.range(0, 0, { withScores: true }))\n    .to.eql([[&#x27;first&#x27;, 1]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36ddb130-ed18-4100-b1ca-a7e271b07ab0&quot;,&quot;parentUUID&quot;:&quot;fe9855ea-38b2-4a59-b20f-cc8f0db3e478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11d0692c-a29a-4284-8f90-785e6949ca12&quot;,&quot;36ddb130-ed18-4100-b1ca-a7e271b07ab0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;350a2566-c8e1-4949-b59a-ee9acc075296&quot;,&quot;title&quot;:&quot;#intersect&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should intersect two sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect two sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var a = new Z(), b = new Z();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nchai_1.expect(Z.intersect(a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e1b&#x27;]);\nchai_1.expect(Z.intersect(b, a)).to.eql([&#x27;5a600e1b&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e17&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb466cd7-e9b3-4526-afeb-b30ba761f30d&quot;,&quot;parentUUID&quot;:&quot;350a2566-c8e1-4949-b59a-ee9acc075296&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect three sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect three sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var a = new Z(), b = new Z(), c = new Z();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nchai_1.expect(Z.intersect(c, a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\nchai_1.expect(Z.intersect(c, a, b)).to.eql(c.intersect(a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb526ffe-4f14-4637-90d5-808deaa5f3b0&quot;,&quot;parentUUID&quot;:&quot;350a2566-c8e1-4949-b59a-ee9acc075296&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect four sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect four sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var a = new Z();\nvar b = new Z();\nvar c = new Z();\nvar d = new Z();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nd.add(&#x27;5a600e1c&#x27;, 400);\nd.add(&#x27;5a600e17&#x27;, 500);\nd.add(&#x27;5a600e1f&#x27;, 600);\nd.add(&#x27;5a600e20&#x27;, 700);\nchai_1.expect(Z.intersect(d, c, a, b)).to.eql([&#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\nchai_1.expect(Z.intersect(d, c, a, b)).to.eql(d.intersect(c, a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d877a45-e425-446e-a31f-c8c44ee4af39&quot;,&quot;parentUUID&quot;:&quot;350a2566-c8e1-4949-b59a-ee9acc075296&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb466cd7-e9b3-4526-afeb-b30ba761f30d&quot;,&quot;fb526ffe-4f14-4637-90d5-808deaa5f3b0&quot;,&quot;3d877a45-e425-446e-a31f-c8c44ee4af39&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;623e961a-b4d2-4a51-933b-4f0e2e32c94d&quot;,&quot;title&quot;:&quot;#rank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the correct rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rank should get the correct rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rank(&#x27;5a600e12&#x27;)).to.equal(7);\nchai_1.expect(z.rank(&#x27;5a600e13&#x27;)).to.equal(3);\nchai_1.expect(z.rank(&#x27;5a600e16&#x27;)).to.equal(0);\nchai_1.expect(z.rank(&#x27;5a600e15&#x27;)).to.equal(8);\nchai_1.expect(z.rank(&#x27;not in set&#x27;)).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;141ee61e-50b9-464b-90c7-a27c88f6e7ce&quot;,&quot;parentUUID&quot;:&quot;623e961a-b4d2-4a51-933b-4f0e2e32c94d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;141ee61e-50b9-464b-90c7-a27c88f6e7ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a8f592d1-b35b-4cbf-a084-d49d3b48c8b9&quot;,&quot;title&quot;:&quot;#rem&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete special elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rem should delete special elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(z).to.have.length(8);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(z).to.have.length(7);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf8d9d51-91ef-4438-9c4c-5f49f92abb2b&quot;,&quot;parentUUID&quot;:&quot;a8f592d1-b35b-4cbf-a084-d49d3b48c8b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete many elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rem should delete many elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rem(&#x27;5a600e11&#x27;)).to.equal(6);\nchai_1.expect(z.rem(&#x27;5a600e13&#x27;)).to.equal(11);\nchai_1.expect(z.rem(&#x27;5a600e14&#x27;)).to.equal(14);\nchai_1.expect(z.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(z.rem(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(z.length).to.equal(3);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fadecf2-4864-420d-ba1e-afabefafc222&quot;,&quot;parentUUID&quot;:&quot;a8f592d1-b35b-4cbf-a084-d49d3b48c8b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf8d9d51-91ef-4438-9c4c-5f49f92abb2b&quot;,&quot;8fadecf2-4864-420d-ba1e-afabefafc222&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e88a8741-b42c-4137-828e-3e303cc0bd3a&quot;,&quot;title&quot;:&quot;#remRangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a range of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByScore should strip out a range of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByScore(4, 14)).to.equal(5);\nchai_1.expect(z).to.have.length(4);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e353b4c-0c39-46fc-80e9-4db84bb9667f&quot;,&quot;parentUUID&quot;:&quot;e88a8741-b42c-4137-828e-3e303cc0bd3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all the elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByScore should strip out all the elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByScore(3, 19)).to.equal(9);\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f498bdc9-a909-4512-ba46-432c6a271f6c&quot;,&quot;parentUUID&quot;:&quot;e88a8741-b42c-4137-828e-3e303cc0bd3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e353b4c-0c39-46fc-80e9-4db84bb9667f&quot;,&quot;f498bdc9-a909-4512-ba46-432c6a271f6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;f797f109-49ef-42f4-a32a-b2a4ebeb5a18&quot;,&quot;title&quot;:&quot;#remRangeByRank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a slice of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByRank should strip out a slice of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByRank(1, 6)).to.equal(5);\nchai_1.expect(z).to.have.length(4);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0528f005-d27d-4606-828b-65c3d13752a1&quot;,&quot;parentUUID&quot;:&quot;f797f109-49ef-42f4-a32a-b2a4ebeb5a18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByRank should strip out all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByRank(0, 9)).to.equal(9);\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d4c12cd-b171-4185-bd54-0f0964cbf8cf&quot;,&quot;parentUUID&quot;:&quot;f797f109-49ef-42f4-a32a-b2a4ebeb5a18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0528f005-d27d-4606-828b-65c3d13752a1&quot;,&quot;8d4c12cd-b171-4185-bd54-0f0964cbf8cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;664fe883-a1c7-4df6-aa87-bf3847147c1d&quot;,&quot;title&quot;:&quot;#values&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the values&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #values should return the values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, -1);\nz.add(&#x27;third&#x27;, 5);\nz.add(&#x27;second&#x27;, 3);\nchai_1.expect(z.values()).to.eql([-1, 3, 5]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b31fb202-bca1-4a61-9b74-260fc4a0c3d2&quot;,&quot;parentUUID&quot;:&quot;664fe883-a1c7-4df6-aa87-bf3847147c1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b31fb202-bca1-4a61-9b74-260fc4a0c3d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b96d1733-bb92-4929-9041-be05260b00a8&quot;,&quot;title&quot;:&quot;unique&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should ensure values are unique&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map unique should ensure values are unique&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z({ unique: true });\nassert.equal(z.keys().length, 0, &#x27;Expected an empty SortedSet&#x27;);\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600e19&#x27;, 11);\n}).to.throw(/unique/);\n// quick exit test\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600dff&#x27;, z._head.next[z._level - 1].next.value);\n}).to.throw(/unique/);\n// this test ensures the key &lt; key check doesn&#x27;t come into play\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600dff&#x27;, 11);\n}).to.throw(/unique/);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600e18&#x27;, 10);\n}).to.not.throw();\nchai_1.expect(z).to.have.length(9);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f21f59be-1c59-4762-8b29-96f590134294&quot;,&quot;parentUUID&quot;:&quot;b96d1733-bb92-4929-9041-be05260b00a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert keys if constraint broken during update&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map unique should revert keys if constraint broken during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z({ unique: true });\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600e13&#x27;, 14);\n}).to.throw(/unique/);\nchai_1.expect(z).to.have.length(9);\nchai_1.expect(z.score(&#x27;5a600e13&#x27;)).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a76f7d9-4a3b-4a62-b6ef-79acfc240577&quot;,&quot;parentUUID&quot;:&quot;b96d1733-bb92-4929-9041-be05260b00a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f21f59be-1c59-4762-8b29-96f590134294&quot;,&quot;6a76f7d9-4a3b-4a62-b6ef-79acfc240577&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;754d4bc6-41b5-4295-aa96-bbf096a2752c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;eaedc88b-cb73-497b-92f3-f417609239f5&quot;,&quot;title&quot;:&quot;skip map rewrite&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);\nchai_1.expect(ss.range()).to.eql([]);\nchai_1.expect(ss.rangeByScore()).to.eql([]);\n// expect(() =&gt; {\n//   ss.add(&#x27;__proto__&#x27;, 14);\n// }).to.throw();\nss.add(&#x27;5a600e16&#x27;, 8);\nss.add(&#x27;5a600e17&#x27;, 9);\nchai_1.expect(ss.add(&#x27;5a600e18&#x27;, 10)).to.equal(null);\nchai_1.expect(ss.add(&#x27;5a600e17&#x27;, 12)).to.equal(9);\nchai_1.expect(ss).to.have.length(3);\nchai_1.expect(ss.toArray()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(ss.toArray()).to.eql(ss.range(0, -1));\nchai_1.expect(ss.toArray()).to.eql(ss.rangeByScore());\nchai_1.expect(ss.has(&#x27;5a600e16&#x27;)).to.be.ok;\nchai_1.expect(ss.has(&#x27;5a600e17&#x27;)).to.be.ok;\nchai_1.expect(ss.has(&#x27;5a600e18&#x27;)).to.be.ok;\nchai_1.expect(ss.has(&#x27;5a600e19&#x27;)).to.not.be.ok;\nchai_1.expect(ss.score(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(ss.score(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(ss.score(&#x27;5a600e18&#x27;)).to.equal(10);\nchai_1.expect(ss.score(&#x27;5a600e19&#x27;)).to.equal(null);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(ss).to.have.length(2);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(null);\nchai_1.expect(ss).to.have.length(2);\nchai_1.expect(ss.has(&#x27;5a600e16&#x27;)).to.not.be.ok;\nchai_1.expect(ss.toArray()).to.eql([&#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(ss.toArray({ withScores: true }))\n    .to.eql(ss.range(0, -1, { withScores: true }));\nchai_1.expect(ss.toArray()).to.eql(ss.rangeByScore());\nss.add(&#x27;5a600e16&#x27;, 10);\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nchai_1.expect(ss).to.have.length(9);\n// no change, so should be O(1)\nss.add(&#x27;5a600e17&#x27;, 12);\nchai_1.expect(ss.rank(&#x27;5a600e17&#x27;)).to.equal(4);\nchai_1.expect(ss).to.have.length(9);\nchai_1.expect(ss.toArray()).to.eql([\n    &#x27;5a600e16&#x27;,\n    &#x27;5a600e11&#x27;,\n    &#x27;5a600e18&#x27;,\n    &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;,\n    &#x27;5a600e14&#x27;,\n    &#x27;5a600e10&#x27;,\n    &#x27;5a600e12&#x27;,\n    &#x27;5a600e15&#x27;,\n]);\nchai_1.expect(ss.toArray()).to.eql(ss.range(0, -1));\nchai_1.expect(ss.toArray()).to.eql(ss.rangeByScore());\nchai_1.expect(ss.rangeByScore(14, 16, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaa5906c-8b44-464c-ace9-09f8f7cfa215&quot;,&quot;parentUUID&quot;:&quot;eaedc88b-cb73-497b-92f3-f417609239f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a1db85db-1ed4-4b20-8d3e-a8009c4618c5&quot;,&quot;title&quot;:&quot;#add&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should implicitly delete&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #add should implicitly delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.add(&#x27;5a600e14&#x27;, null)).to.equal(14);\nchai_1.expect(ss.add(&#x27;5a600e19&#x27;, null)).to.equal(null);\nchai_1.expect(ss).to.have.length(8);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b65a42da-afe0-48cd-9784-c865dc7e7639&quot;,&quot;parentUUID&quot;:&quot;a1db85db-1ed4-4b20-8d3e-a8009c4618c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b65a42da-afe0-48cd-9784-c865dc7e7639&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;40651984-3144-4822-8d86-6d4fe6826eb8&quot;,&quot;title&quot;:&quot;#empty&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #empty should remove all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nss.empty();\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;906904af-efd2-43a8-babf-0d3cea894d5f&quot;,&quot;parentUUID&quot;:&quot;40651984-3144-4822-8d86-6d4fe6826eb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;906904af-efd2-43a8-babf-0d3cea894d5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e5b9eb64-ae46-411e-8af1-9d4e31d0534c&quot;,&quot;title&quot;:&quot;#incrBy(increment, key)&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #incrBy(increment, key) should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.add(&#x27;second&#x27;, 2);\nss.add(&#x27;third&#x27;, 3);\nss.add(&#x27;fourth&#x27;, 4);\nchai_1.expect(ss.incrBy(2, &#x27;first&#x27;)).to.equal(3);\nchai_1.expect(ss.rank(&#x27;first&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;328fe32a-0cee-4b93-8bd6-167a7f8930c5&quot;,&quot;parentUUID&quot;:&quot;e5b9eb64-ae46-411e-8af1-9d4e31d0534c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create if not found&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #incrBy(increment, key) should create if not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.incrBy(2, &#x27;second&#x27;);\nchai_1.expect(ss.card()).to.equal(2);\nchai_1.expect(ss.rank(&#x27;second&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52e63783-b2a9-4dd4-bc85-783c2b6984f2&quot;,&quot;parentUUID&quot;:&quot;e5b9eb64-ae46-411e-8af1-9d4e31d0534c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;328fe32a-0cee-4b93-8bd6-167a7f8930c5&quot;,&quot;52e63783-b2a9-4dd4-bc85-783c2b6984f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e6ee846f-6edf-489d-82db-eb93e81aeee7&quot;,&quot;title&quot;:&quot;#keys&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the keys&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #keys should return the keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.keys()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e11&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e14&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e12&#x27;, &#x27;5a600e15&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24db777a-28c5-4447-aa0f-50fe7c5c07f1&quot;,&quot;parentUUID&quot;:&quot;e6ee846f-6edf-489d-82db-eb93e81aeee7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24db777a-28c5-4447-aa0f-50fe7c5c07f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6745fa7d-9310-451d-9e4c-a945a45d9f9d&quot;,&quot;title&quot;:&quot;#rangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rangeByScore should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rangeByScore(14, null, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);\nchai_1.expect(ss.rangeByScore(null, 10, { withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n]);\nchai_1.expect(ss.rangeByScore(-Infinity, Infinity)).to.eql(ss.toArray());\nchai_1.expect(ss.rangeByScore(null, null)).to.eql(ss.toArray());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed8b13e2-b32a-41fa-82aa-e29f6115f5cf&quot;,&quot;parentUUID&quot;:&quot;6745fa7d-9310-451d-9e4c-a945a45d9f9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed8b13e2-b32a-41fa-82aa-e29f6115f5cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e614ddeb-c842-4dee-9a35-0668cb9de30d&quot;,&quot;title&quot;:&quot;#count&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should count elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #count should count elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nchai_1.expect(ss.count()).to.equal(0);\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nss.add(&#x27;5a600e19&#x27;, 14);\nss.add(&#x27;5a600f00&#x27;, 30.0);\nss.add(&#x27;5a600f01&#x27;, 30.5);\nss.add(&#x27;5a600f02&#x27;, 31.0);\nss.add(&#x27;5a600f03&#x27;, 31.5);\nss.add(&#x27;5a600f04&#x27;, 32.0);\nss.add(&#x27;5a600f05&#x27;, 32.0);\nss.add(&#x27;5a600f06&#x27;, 32.0);\nchai_1.expect(ss.count()).to.eql(ss.rangeByScore().length);\nchai_1.expect(ss.count(8)).to.eql(ss.rangeByScore(8).length);\nchai_1.expect(ss.count(3, 7)).to.eql(ss.rangeByScore(3, 7).length);\nchai_1.expect(ss.count(5, 14)).to.eql(ss.rangeByScore(5, 14).length);\nchai_1.expect(ss.count(5, 5)).to.eql(ss.rangeByScore(5, 5).length);\nchai_1.expect(ss.count(5, 0)).to.eql(ss.rangeByScore(5, 0).length);\nchai_1.expect(ss.count(30, 32)).to.eql(ss.rangeByScore(30, 32).length);\nchai_1.expect(ss.count(40)).to.eql(ss.rangeByScore(40).length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;941391c6-2bca-469a-957d-632f7b6e1555&quot;,&quot;parentUUID&quot;:&quot;e614ddeb-c842-4dee-9a35-0668cb9de30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;941391c6-2bca-469a-957d-632f7b6e1555&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;2fa1c2af-6b68-464e-92c7-ad8186974c34&quot;,&quot;title&quot;:&quot;#range&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #range should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.add(&#x27;second&#x27;, 2);\nss.add(&#x27;third&#x27;, 3);\nss.add(&#x27;fourth&#x27;, 4);\nlet array = [&#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;, &#x27;fourth&#x27;];\nchai_1.expect(ss.range()).to.eql(array);\nchai_1.expect(ss.range(2)).to.eql(array.slice(2));\nchai_1.expect(ss.range(8)).to.eql(array.slice(8));\nchai_1.expect(ss.range(0, 2)).to.eql(array.slice(0, 3));\nchai_1.expect(ss.range(-1)).to.eql([&#x27;fourth&#x27;]);\nchai_1.expect(ss.range(-4)).to.eql(array);\nchai_1.expect(ss.range(-4, -2)).to.eql(array.slice(0, 3));\nchai_1.expect(ss.range(-4, ss.length + 1000))\n    .to.eql(array.slice(-4, ss.length + 1000));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f2df821-b5e2-4603-a036-025e6f02aa93&quot;,&quot;parentUUID&quot;:&quot;2fa1c2af-6b68-464e-92c7-ad8186974c34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support withScores&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #range should support withScores&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.add(&#x27;second&#x27;, 2);\nchai_1.expect(ss.range(0, 0, { withScores: true }))\n    .to.eql([[&#x27;first&#x27;, 1]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0af7824-3419-421e-aa72-8f8432cdc20b&quot;,&quot;parentUUID&quot;:&quot;2fa1c2af-6b68-464e-92c7-ad8186974c34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f2df821-b5e2-4603-a036-025e6f02aa93&quot;,&quot;a0af7824-3419-421e-aa72-8f8432cdc20b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e63caa81-18c0-44a9-a9d8-b51b77206627&quot;,&quot;title&quot;:&quot;#intersect&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should intersect two sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect two sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let a = new sorted_set_1.SortedSet(), b = new sorted_set_1.SortedSet();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nchai_1.expect(sorted_set_1.SortedSet.intersect(a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e1b&#x27;]);\nchai_1.expect(sorted_set_1.SortedSet.intersect(b, a)).to.eql([&#x27;5a600e1b&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e17&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1192875-0667-4167-9aca-6c0cbce5542a&quot;,&quot;parentUUID&quot;:&quot;e63caa81-18c0-44a9-a9d8-b51b77206627&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect three sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect three sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let a = new sorted_set_1.SortedSet(), b = new sorted_set_1.SortedSet(), c = new sorted_set_1.SortedSet();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nchai_1.expect(sorted_set_1.SortedSet.intersect(c, a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\n// expect(SortedSet.intersect(c, a, b)).to.eql(c.intersect(a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;884777f8-315b-4fc9-bd24-64cfff253e92&quot;,&quot;parentUUID&quot;:&quot;e63caa81-18c0-44a9-a9d8-b51b77206627&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect four sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect four sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let a = new sorted_set_1.SortedSet();\nlet b = new sorted_set_1.SortedSet();\nlet c = new sorted_set_1.SortedSet();\nlet d = new sorted_set_1.SortedSet();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nd.add(&#x27;5a600e1c&#x27;, 400);\nd.add(&#x27;5a600e17&#x27;, 500);\nd.add(&#x27;5a600e1f&#x27;, 600);\nd.add(&#x27;5a600e20&#x27;, 700);\nchai_1.expect(sorted_set_1.SortedSet.intersect(d, c, a, b)).to.eql([&#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\n// expect(SortedSet.intersect(d, c, a, b)).to.eql(d.intersect(c, a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b4eb49d-f15a-4ac7-9bca-a1938ec42cc0&quot;,&quot;parentUUID&quot;:&quot;e63caa81-18c0-44a9-a9d8-b51b77206627&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1192875-0667-4167-9aca-6c0cbce5542a&quot;,&quot;884777f8-315b-4fc9-bd24-64cfff253e92&quot;,&quot;7b4eb49d-f15a-4ac7-9bca-a1938ec42cc0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;c4efef35-180e-4da5-9d9c-7c59c168d1c5&quot;,&quot;title&quot;:&quot;#rank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the correct rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rank should get the correct rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rank(&#x27;5a600e12&#x27;)).to.equal(7);\nchai_1.expect(ss.rank(&#x27;5a600e13&#x27;)).to.equal(3);\nchai_1.expect(ss.rank(&#x27;5a600e16&#x27;)).to.equal(0);\nchai_1.expect(ss.rank(&#x27;5a600e15&#x27;)).to.equal(8);\nchai_1.expect(ss.rank(&#x27;not in set&#x27;)).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34126e6e-d2a5-4f27-bb52-fa3a99ca7a08&quot;,&quot;parentUUID&quot;:&quot;c4efef35-180e-4da5-9d9c-7c59c168d1c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34126e6e-d2a5-4f27-bb52-fa3a99ca7a08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;4af8e0b4-a438-45c8-b1b4-e066e9ba8655&quot;,&quot;title&quot;:&quot;#rem&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete special elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rem should delete special elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(ss).to.have.length(8);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(ss).to.have.length(7);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c282387-91fa-4ac2-98ad-b9adbdc8c0c8&quot;,&quot;parentUUID&quot;:&quot;4af8e0b4-a438-45c8-b1b4-e066e9ba8655&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete many elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rem should delete many elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rem(&#x27;5a600e11&#x27;)).to.equal(6);\nchai_1.expect(ss.rem(&#x27;5a600e13&#x27;)).to.equal(11);\nchai_1.expect(ss.rem(&#x27;5a600e14&#x27;)).to.equal(14);\nchai_1.expect(ss.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(ss.rem(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(ss.length).to.equal(3);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0769308-5b6d-4343-97a5-a04fea606f4d&quot;,&quot;parentUUID&quot;:&quot;4af8e0b4-a438-45c8-b1b4-e066e9ba8655&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c282387-91fa-4ac2-98ad-b9adbdc8c0c8&quot;,&quot;f0769308-5b6d-4343-97a5-a04fea606f4d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ab3a62e2-eb13-4edc-b4c3-e6459922aff5&quot;,&quot;title&quot;:&quot;#remRangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a range of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByScore should strip out a range of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByScore(4, 14)).to.equal(5);\nchai_1.expect(ss).to.have.length(4);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89a29bee-45d9-4b4e-9a51-072b4b0c13c9&quot;,&quot;parentUUID&quot;:&quot;ab3a62e2-eb13-4edc-b4c3-e6459922aff5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all the elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByScore should strip out all the elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByScore(3, 19)).to.equal(9);\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84747b1c-f09d-4b66-b522-7c06d7c30e73&quot;,&quot;parentUUID&quot;:&quot;ab3a62e2-eb13-4edc-b4c3-e6459922aff5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89a29bee-45d9-4b4e-9a51-072b4b0c13c9&quot;,&quot;84747b1c-f09d-4b66-b522-7c06d7c30e73&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;68c29d2f-8328-4a79-b4c8-9a91ae7762a2&quot;,&quot;title&quot;:&quot;#remRangeByRank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a slice of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByRank should strip out a slice of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByRank(1, 6)).to.equal(5);\nchai_1.expect(ss).to.have.length(4);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;686217cb-792d-4e17-81ea-300b3ef678ae&quot;,&quot;parentUUID&quot;:&quot;68c29d2f-8328-4a79-b4c8-9a91ae7762a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByRank should strip out all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByRank(0, 9)).to.equal(9);\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e38edb5b-f2b5-4ce5-aad0-7b89a801ef45&quot;,&quot;parentUUID&quot;:&quot;68c29d2f-8328-4a79-b4c8-9a91ae7762a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;686217cb-792d-4e17-81ea-300b3ef678ae&quot;,&quot;e38edb5b-f2b5-4ce5-aad0-7b89a801ef45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;59890c65-ccb9-47f7-a633-2338fdc7a1cc&quot;,&quot;title&quot;:&quot;#values&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the values&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #values should return the values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, -1);\nss.add(&#x27;third&#x27;, 5);\nss.add(&#x27;second&#x27;, 3);\nchai_1.expect(ss.values()).to.eql([-1, 3, 5]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8891b81-340c-40d9-a049-f60d64acfe69&quot;,&quot;parentUUID&quot;:&quot;59890c65-ccb9-47f7-a633-2338fdc7a1cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a8891b81-340c-40d9-a049-f60d64acfe69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;f155a8c0-e05d-47a7-822b-b77a42d46947&quot;,&quot;title&quot;:&quot;unique rewrite&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should ensure values are unique&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite unique rewrite should ensure values are unique&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = { unique: true };\nlet ss = new sorted_set_1.SortedSet(options);\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600e19&#x27;, 11);\n}).to.throw(/unique/);\n// quick exit test\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600dff&#x27;, ss._head.next[ss._level - 1].next.value);\n}).to.throw(/unique/);\n// this test ensures the key &lt; key check doesn&#x27;t come into play\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600dff&#x27;, 11);\n}).to.throw(/unique/);\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600e18&#x27;, 10);\n}).to.not.throw();\nchai_1.expect(ss).to.have.length(9);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea48d911-57fb-4305-9198-c03f4a253768&quot;,&quot;parentUUID&quot;:&quot;f155a8c0-e05d-47a7-822b-b77a42d46947&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert keys if constraint broken during update&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite unique rewrite should revert keys if constraint broken during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet({ unique: true });\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600e13&#x27;, 14);\n}).to.throw(/unique/);\nchai_1.expect(ss).to.have.length(9);\nchai_1.expect(ss.score(&#x27;5a600e13&#x27;)).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3022a1f8-d78b-41e6-a661-9e2c1cf4034e&quot;,&quot;parentUUID&quot;:&quot;f155a8c0-e05d-47a7-822b-b77a42d46947&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ea48d911-57fb-4305-9198-c03f4a253768&quot;,&quot;3022a1f8-d78b-41e6-a661-9e2c1cf4034e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;aaa5906c-8b44-464c-ace9-09f8f7cfa215&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;b7e728c2-1f63-477b-8249-160dd11a0a43&quot;,&quot;2a9cc5bc-d1e1-441b-8b9c-c9ebda4f01ef&quot;,&quot;f30dd35f-5da0-4beb-8df0-5ddc45efefb7&quot;,&quot;b144ef57-0359-4b34-843e-807b223b7a1a&quot;,&quot;71318e3f-188a-4699-a148-2ee77638b310&quot;,&quot;2dcd5dbb-0617-4153-b308-ca2753b831b1&quot;,&quot;672000f1-b7bd-4c5e-8af7-23c128403b4f&quot;,&quot;900b548f-6b3b-42bc-93b2-a051b612efaf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;40112fd6-32ec-460a-a094-baabee9c9908&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:5000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;6.2.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;docs/mochawesome&quot;},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;docs/mochawesome&quot;,&quot;reportTitle&quot;:&quot;redis&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;docs/mochawesome/assets&quot;,&quot;jsonFile&quot;:&quot;/home/lane/git/redis/docs/mochawesome/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/lane/git/redis/docs/mochawesome/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>