<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:38,&quot;tests&quot;:107,&quot;passes&quot;:104,&quot;pending&quot;:3,&quot;failures&quot;:0,&quot;start&quot;:&quot;2023-12-10T17:01:32.203Z&quot;,&quot;end&quot;:&quot;2023-12-10T17:01:32.662Z&quot;,&quot;duration&quot;:459,&quot;testsRegistered&quot;:107,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:2.803738317757009,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;791ea602-8a81-4b40-97fe-ba1c28f3326a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;done();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;747523e9-a5a5-43a9-bdd9-1f4d486c9ca8&quot;,&quot;parentUUID&quot;:&quot;791ea602-8a81-4b40-97fe-ba1c28f3326a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84c4706a-e102-425d-bc99-52157ea9b20c&quot;,&quot;parentUUID&quot;:&quot;791ea602-8a81-4b40-97fe-ba1c28f3326a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;title&quot;:&quot;client command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/client-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/client-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;before all\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(\&quot;ready\&quot;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70e63736-04bf-43b2-8fce-102cb2e4b35e&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;before each\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;907004c6-a0bb-478b-a65f-2dca0c1c33a7&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;after all\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39017a8d-a1fe-49bf-87b6-f9fb1606b15b&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;after each\&quot; hook in \&quot;client command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;752a775c-9dcc-4285-bd65-876c5211a6f5&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow more than 3 parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should not allow more than 3 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;one\&quot;,\n            \&quot;two\&quot;,\n            \&quot;three\&quot;,\n            \&quot;four\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR Unknown subcommand or wrong number of arguments for &#x27;one&#x27;. Try CLIENT HELP\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43475a42-692f-47af-99fa-e06370d09020&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail predictably when an unknown subcommand is passed&quot;,&quot;fullTitle&quot;:&quot;client command test should fail predictably when an unknown subcommand is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;whatever\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(util.format(DEFAULT_ERROR, \&quot;whatever\&quot;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31f2dc8c-ce3b-4392-bfaf-f1785c8842f2&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a NIL name when called with \&quot;GETNAME\&quot; subcommand&quot;,&quot;fullTitle&quot;:&quot;client command test should return a NIL name when called with \&quot;GETNAME\&quot; subcommand&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;getname\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80a24d7b-df7d-4030-9b9c-020fa369524a&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail predictably when \&quot;GETNAME\&quot; is called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should fail predictably when \&quot;GETNAME\&quot; is called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;getname\&quot;,\n            \&quot;extra\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(util.format(DEFAULT_ERROR, \&quot;getname\&quot;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a51fef2e-85ae-4de8-a8e4-71d122c1fab1&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with \&quot;OK\&quot; when \&quot;setname\&quot; is called with a valid name&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with \&quot;OK\&quot; when \&quot;setname\&quot; is called with a valid name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;setname\&quot;,\n            \&quot;whatever\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;getname\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;whatever\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f266d3fc-5c50-4855-bd8b-308545b1c326&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should persist the value for \&quot;setname\&quot; across tests&quot;,&quot;fullTitle&quot;:&quot;client command test should persist the value for \&quot;setname\&quot; across tests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;getname\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;whatever\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e350ade-4307-4d3e-8ef0-788648153d11&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;setname\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;setname\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;setname\&quot;,\n            \&quot;test\&quot;,\n            \&quot;two\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(util.format(DEFAULT_ERROR, \&quot;setname\&quot;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;410b3822-aa15-43df-a078-13c4115526f7&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow whitespace in \&quot;setname\&quot; subcommand&quot;,&quot;fullTitle&quot;:&quot;client command test should not allow whitespace in \&quot;setname\&quot; subcommand&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;setname\&quot;,\n            \&quot;te\\nst\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR Client names cannot contain spaces, newlines or special characters.\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0848f918-69ea-4899-aafa-25d2cc767d89&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the server-assigned client id&quot;,&quot;fullTitle&quot;:&quot;client command test should return the server-assigned client id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;id\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.be.a(\&quot;number\&quot;);\n        (0, chai_1.expect)(String(response).length).to.be.greaterThan(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5780456-ed59-45c9-8f2a-0365898fc90b&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;id\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;id\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;id\&quot;,\n            \&quot;test\&quot;,\n            \&quot;two\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(util.format(DEFAULT_ERROR, \&quot;id\&quot;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fce902e2-a54e-48ac-8b01-7e5c52c757e9&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a bunch of information when client \&quot;list\&quot; subcommand is invoked&quot;,&quot;fullTitle&quot;:&quot;client command test should return a bunch of information when client \&quot;list\&quot; subcommand is invoked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;list\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.be.a(\&quot;string\&quot;);\n        (0, chai_1.expect)(response.length).to.be.greaterThan(0);\n        (0, chai_1.expect)(response).to.match(/ name=whatever /);\n        (0, chai_1.expect)(response).to.match(/\\bdb=0\\b/);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54e359a5-7cd3-4e90-bbb9-f0a849ca8ac6&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;list\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;list\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;client\&quot;,\n            \&quot;list\&quot;,\n            \&quot;test\&quot;,\n            \&quot;two\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR syntax error\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8934a57-4cde-47b1-9c76-dae00feadc99&quot;,&quot;parentUUID&quot;:&quot;36161cff-e603-4579-ab13-dbb3494b6029&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43475a42-692f-47af-99fa-e06370d09020&quot;,&quot;31f2dc8c-ce3b-4392-bfaf-f1785c8842f2&quot;,&quot;80a24d7b-df7d-4030-9b9c-020fa369524a&quot;,&quot;a51fef2e-85ae-4de8-a8e4-71d122c1fab1&quot;,&quot;f266d3fc-5c50-4855-bd8b-308545b1c326&quot;,&quot;1e350ade-4307-4d3e-8ef0-788648153d11&quot;,&quot;410b3822-aa15-43df-a078-13c4115526f7&quot;,&quot;0848f918-69ea-4899-aafa-25d2cc767d89&quot;,&quot;c5780456-ed59-45c9-8f2a-0365898fc90b&quot;,&quot;fce902e2-a54e-48ac-8b01-7e5c52c757e9&quot;,&quot;54e359a5-7cd3-4e90-bbb9-f0a849ca8ac6&quot;,&quot;d8934a57-4cde-47b1-9c76-dae00feadc99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:46,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;title&quot;:&quot;multi command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/multi-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/multi-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;before all\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(\&quot;ready\&quot;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c92ac261-54c5-4cac-b166-e88478d8024d&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;before each\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40aeb74a-f1ef-4d50-bb78-89fc61b73cff&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;after all\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a97754e7-d8eb-4805-a22c-0b74d735a060&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;after each\&quot; hook in \&quot;multi command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd3a7215-0e07-4411-9d82-2f82e606b7d9&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow nested MULTI invocations&quot;,&quot;fullTitle&quot;:&quot;multi command test should not allow nested MULTI invocations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;multi\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;multi\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR MULTI calls can not be nested\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;577973a7-5222-4d1c-bebd-dfe6c1f76476&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect the DISCARD command&quot;,&quot;fullTitle&quot;:&quot;multi command test should respect the DISCARD command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;discard\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b70e89f-6f2d-4885-b380-d095ca723254&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow DISCARD without MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should not allow DISCARD without MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;discard\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR DISCARD without MULTI\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7e43b26-6cae-42a7-a413-48c8bd187f75&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should continue to validate commands after MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should continue to validate commands after MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;multi\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;unknown\&quot;,\n            \&quot;command\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR unknown command `unknown`, with args beginning with: `command`, \&quot;, `${response}`);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;lpush\&quot;,\n            \&quot;test\&quot;,\n            \&quot;one\&quot;,\n            \&quot;two\&quot;,\n            \&quot;three\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;QUEUED\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3b59f8f-ce61-40ba-96f8-fd387f741d13&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should EXECABORT from a previous error&quot;,&quot;fullTitle&quot;:&quot;multi command test should EXECABORT from a previous error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;exec\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: EXECABORT Transaction discarded because of previous errors.\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0574b492-b682-47e5-bc6c-159d38fc05ff&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should queue a set of commands when there is no intervening error&quot;,&quot;fullTitle&quot;:&quot;multi command test should queue a set of commands when there is no intervening error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;multi\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;lpush\&quot;,\n            \&quot;test\&quot;,\n            \&quot;one\&quot;,\n            \&quot;two\&quot;,\n            \&quot;three\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;QUEUED\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;exec\&quot;]);\n        (0, chai_1.expect)(response).to.eql([3]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2290281-08c2-42af-a820-ecb7443a4719&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reset transaction state after executing commands&quot;,&quot;fullTitle&quot;:&quot;multi command test should reset transaction state after executing commands&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;multi\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;discard\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dfbe896-17a2-462b-95dd-14d4c202c6c3&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the results of multiple commands in the order provided&quot;,&quot;fullTitle&quot;:&quot;multi command test should return the results of multiple commands in the order provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;multi\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;lpop\&quot;,\n            \&quot;test\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;QUEUED\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;lpop\&quot;,\n            \&quot;test\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;QUEUED\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;brpoplpush\&quot;,\n            \&quot;test\&quot;,\n            \&quot;dest\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;QUEUED\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;exec\&quot;]);\n        (0, chai_1.expect)(response).to.eql([\n            \&quot;three\&quot;,\n            \&quot;two\&quot;,\n            \&quot;one\&quot;\n        ]);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;exists\&quot;,\n            \&quot;test\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(0);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;exists\&quot;,\n            \&quot;dest\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28bfcc38-3885-4475-bdcc-c078cdc8df98&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate the behavior of brpoplpush&quot;,&quot;fullTitle&quot;:&quot;multi command test should validate the behavior of brpoplpush&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;flushall\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;lpush\&quot;,\n            \&quot;test\&quot;,\n            \&quot;one\&quot;,\n            \&quot;two\&quot;,\n            \&quot;three\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(3);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;lpop\&quot;,\n            \&quot;test\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;three\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;lpop\&quot;,\n            \&quot;test\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;two\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;brpoplpush\&quot;,\n            \&quot;test\&quot;,\n            \&quot;dest\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;one\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba114d44-0f35-4341-9c9b-8da1b0d18993&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when EXEC issued without MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should fail when EXEC issued without MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;exec\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR EXEC without MULTI\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78db57be-fa91-4f13-9018-d11f6ae37786&quot;,&quot;parentUUID&quot;:&quot;ff5ccd43-6d17-4bcb-b5ad-03bd6f9c06d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;577973a7-5222-4d1c-bebd-dfe6c1f76476&quot;,&quot;6b70e89f-6f2d-4885-b380-d095ca723254&quot;,&quot;b7e43b26-6cae-42a7-a413-48c8bd187f75&quot;,&quot;e3b59f8f-ce61-40ba-96f8-fd387f741d13&quot;,&quot;0574b492-b682-47e5-bc6c-159d38fc05ff&quot;,&quot;c2290281-08c2-42af-a820-ecb7443a4719&quot;,&quot;3dfbe896-17a2-462b-95dd-14d4c202c6c3&quot;,&quot;28bfcc38-3885-4475-bdcc-c078cdc8df98&quot;,&quot;ba114d44-0f35-4341-9c9b-8da1b0d18993&quot;,&quot;78db57be-fa91-4f13-9018-d11f6ae37786&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;title&quot;:&quot;script-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/script-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/script-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;before all\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(\&quot;ready\&quot;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield (0, common_test_1.sendCommand)(client, [\&quot;flushall\&quot;]);\n    yield (0, common_test_1.sendCommand)(client, [\n        \&quot;select\&quot;,\n        \&quot;0\&quot;\n    ]);\n    yield (0, common_test_1.sendCommand)(client, [\n        \&quot;script\&quot;,\n        \&quot;flush\&quot;\n    ]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;129b1a4e-f34e-4cab-9ec9-6fc1aa1b5f31&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;before each\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cd3ecf8-fe28-4abf-939e-dab0eb8b78e0&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;after all\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;070e464c-85fd-42b0-bf24-f0e21f3c412d&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;after each\&quot; hook in \&quot;script-command test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81cb538e-3e4e-4c3a-ae51-f2a66988b063&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should calcuclate the correct sha1 of a script and store the script&quot;,&quot;fullTitle&quot;:&quot;script-command test should calcuclate the correct sha1 of a script and store the script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;script\&quot;,\n            \&quot;exists\&quot;,\n            sha1\n        ]);\n        (0, chai_1.expect)(response).to.eql([0]);\n        // Validate failure on unparseable script\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;script\&quot;,\n            \&quot;load\&quot;,\n            code\n        ]);\n        (0, chai_1.expect)(response).to.match(/ReplyError: ERR .*/);\n        // Validate success on parseable script\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;script\&quot;,\n            \&quot;load\&quot;,\n            `${code}}`\n        ]);\n        (0, chai_1.expect)(response).to.equal(sha1);\n        // Validate a script is persisted\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;script\&quot;,\n            \&quot;exists\&quot;,\n            sha1\n        ]);\n        (0, chai_1.expect)(response).to.eql([1]);\n        // Validate response to unknown sub command\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;script\&quot;,\n            \&quot;test\&quot;,\n            sha1\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR Unknown subcommand or wrong number of arguments for &#x27;test&#x27;. Try SCRIPT HELP.\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f38712b4-f6ae-4282-ac26-3d82a70044bb&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should evaluate a loaded lua script using evalsha&quot;,&quot;fullTitle&quot;:&quot;script-command test should evaluate a loaded lua script using evalsha&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Validate that NOSCRIPT is triggered\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;evalsha\&quot;,\n            `${sha1}xx`,\n            \&quot;2\&quot;,\n            \&quot;key1\&quot;,\n            \&quot;key2\&quot;,\n            \&quot;first\&quot;,\n            \&quot;second\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: NOSCRIPT No matching script. Please use EVAL.\&quot;);\n        // Validate that param 1 cannot be negative\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;evalsha\&quot;,\n            sha1,\n            \&quot;-2\&quot;,\n            \&quot;key1\&quot;,\n            \&quot;key2\&quot;,\n            \&quot;first\&quot;,\n            \&quot;second\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR Number of keys can&#x27;t be negative\&quot;);\n        // Validate that param 1 cannot be text\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;evalsha\&quot;,\n            sha1,\n            \&quot;two\&quot;,\n            \&quot;key1\&quot;,\n            \&quot;key2\&quot;,\n            \&quot;first\&quot;,\n            \&quot;second\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR value is not an integer or out of range\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68296c5f-80af-41b8-bd83-6ddf31f76a58&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should execute a simple script&quot;,&quot;fullTitle&quot;:&quot;script-command test should execute a simple script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Validate that a simple script can be processed\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;EVAL\&quot;,\n            \&quot;local val=\\\&quot;Hello Compose\\\&quot; return val\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;Hello Compose\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa5bbb47-4d0f-4760-9658-4ff0d4adaf91&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create and process the ARGV table&quot;,&quot;fullTitle&quot;:&quot;script-command test should create and process the ARGV table&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return ARGV[2]\&quot;,\n            \&quot;2\&quot;,\n            \&quot;key1\&quot;,\n            \&quot;key2\&quot;,\n            \&quot;first\&quot;,\n            \&quot;second\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.eql(\&quot;second\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddb4edc8-1444-4dac-bad2-b881286432ea&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create and process the KEYS table&quot;,&quot;fullTitle&quot;:&quot;script-command test should create and process the KEYS table&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return KEYS[1]\&quot;,\n            \&quot;2\&quot;,\n            \&quot;key1\&quot;,\n            \&quot;key2\&quot;,\n            \&quot;first\&quot;,\n            \&quot;second\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(\&quot;key1\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfa2604c-0b84-4ff4-9ab9-a6e3479317e6&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a NUMBER when required&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a NUMBER when required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return 123\&quot;,\n            \&quot;2\&quot;,\n            \&quot;key1\&quot;,\n            \&quot;key2\&quot;,\n            \&quot;first\&quot;,\n            \&quot;second\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(123);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ade0507-1f38-4de5-b2e0-11d41ca8b47b&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return NIL when there is no return value&quot;,&quot;fullTitle&quot;:&quot;script-command test should return NIL when there is no return value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;print \\\&quot;Hello World\\\&quot;\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e796cbc-f7d5-4191-bf94-be16178738f8&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a TABLE when required&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a TABLE when required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return ARGV\&quot;,\n            \&quot;2\&quot;,\n            \&quot;key1\&quot;,\n            \&quot;key2\&quot;,\n            \&quot;first\&quot;,\n            \&quot;second\&quot;,\n            \&quot;third\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.eql([\n            \&quot;first\&quot;,\n            \&quot;second\&quot;,\n            \&quot;third\&quot;\n        ]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f35c392a-4e78-427e-ab16-56c0bf77af99&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return items in order&quot;,&quot;fullTitle&quot;:&quot;script-command test should return items in order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return {true, \\\&quot;test\\\&quot;, false, 10, 10.2}\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.eql([\n            1,\n            \&quot;test\&quot;,\n            null,\n            10,\n            10\n        ]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ee673a8-a5ee-4841-a41b-3c7852b33b06&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return integer and nil for true and false, respectively&quot;,&quot;fullTitle&quot;:&quot;script-command test should return integer and nil for true and false, respectively&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return { true, false, false}\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.eql([\n            1,\n            null,\n            null\n        ]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c27d2dce-06e0-4e8c-9299-8142ff7b7b79&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to execute a representative BULL script&quot;,&quot;fullTitle&quot;:&quot;script-command test should be able to execute a representative BULL script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2cbd588-a0ca-45bc-a8a9-0710175e71a8&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when we attempt to EVAL an invalid script&quot;,&quot;fullTitle&quot;:&quot;script-command test should fail when we attempt to EVAL an invalid script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;-- Invalid\\r\\nscript\&quot;\n        ]);\n        // Validated against redis\n        (0, chai_1.expect)(response).to.equal(\&quot;ReplyError: ERR wrong number of arguments for &#x27;eval&#x27; command\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56a06dbb-15a4-476b-ae79-3318573bd894&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to return a NULL value from a lua script&quot;,&quot;fullTitle&quot;:&quot;script-command test should be able to return a NULL value from a lua script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;local val = nil return val\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83e64adf-c1f3-42cc-9e28-a3e15c39fa09&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return table values after the first NIL is encountered and return integers not floats&quot;,&quot;fullTitle&quot;:&quot;script-command test should not return table values after the first NIL is encountered and return integers not floats&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fcea2c6-9e6c-4893-84d0-16c6fc99ed90&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a table with embedded calls to redis&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a table with embedded calls to redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;flushall\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;hset\&quot;,\n            embeddedkey,\n            \&quot;one\&quot;,\n            \&quot;1\&quot;,\n            \&quot;two\&quot;,\n            \&quot;2\&quot;,\n            \&quot;three\&quot;,\n            \&quot;3\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(3);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;hgetall\&quot;,\n            embeddedkey\n        ]);\n        (0, chai_1.expect)(response).to.eql([\n            \&quot;one\&quot;,\n            \&quot;1\&quot;,\n            \&quot;two\&quot;,\n            \&quot;2\&quot;,\n            \&quot;three\&quot;,\n            \&quot;3\&quot;\n        ]);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            `local j = redis.call(\&quot;HGETALL\&quot;, \&quot;${embeddedkey}\&quot;) return { j, \&quot;SAMPLE\&quot; }`,\n            \&quot;0\&quot;\n        ]);\n        // Validated with redis\n        (0, chai_1.expect)(response).to.eql([\n            \&quot;SAMPLE\&quot;,\n            [\n                \&quot;one\&quot;,\n                \&quot;1\&quot;,\n                \&quot;two\&quot;,\n                \&quot;2\&quot;,\n                \&quot;three\&quot;,\n                \&quot;3\&quot;\n            ]\n        ]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5754bf0-d550-4119-b887-21b3fd776069&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support the unpack lua command&quot;,&quot;fullTitle&quot;:&quot;script-command test should support the unpack lua command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\&quot;flushall\&quot;]);\n        (0, chai_1.expect)(response).to.equal(\&quot;OK\&quot;);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;hset\&quot;,\n            embeddedkey,\n            \&quot;one\&quot;,\n            \&quot;1\&quot;,\n            \&quot;two\&quot;,\n            \&quot;2\&quot;,\n            \&quot;three\&quot;,\n            \&quot;3\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(3);\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            `return { unpack(redis.call(\&quot;hgetall\&quot;, \&quot;${embeddedkey}\&quot;)) }`,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.eql([\n            \&quot;one\&quot;,\n            \&quot;1\&quot;,\n            \&quot;two\&quot;,\n            \&quot;2\&quot;,\n            \&quot;three\&quot;,\n            \&quot;3\&quot;\n        ]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a37716eb-3a53-428b-ac23-7b2bb2a51c04&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert values properly&quot;,&quot;fullTitle&quot;:&quot;script-command test should convert values properly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return {1,2,{3,&#x27;Hello World!&#x27;}}\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.eql([\n            1,\n            2,\n            [\n                3,\n                \&quot;Hello World!\&quot;\n            ]\n        ]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9395b30-8ab7-4265-9aeb-605663c9d78e&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return embedded tables from embedded calls&quot;,&quot;fullTitle&quot;:&quot;script-command test should return embedded tables from embedded calls&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;return {1,2,{3,bit.bxor(5,3)}}\&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.eql([\n            1,\n            2,\n            [\n                3,\n                6\n            ]\n        ]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5eee01b9-6f9b-42fc-b500-cc2dcab0f2a4&quot;,&quot;parentUUID&quot;:&quot;aed9fbfc-e144-4cd9-b298-e4a1820108bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f38712b4-f6ae-4282-ac26-3d82a70044bb&quot;,&quot;68296c5f-80af-41b8-bd83-6ddf31f76a58&quot;,&quot;fa5bbb47-4d0f-4760-9658-4ff0d4adaf91&quot;,&quot;ddb4edc8-1444-4dac-bad2-b881286432ea&quot;,&quot;dfa2604c-0b84-4ff4-9ab9-a6e3479317e6&quot;,&quot;1ade0507-1f38-4de5-b2e0-11d41ca8b47b&quot;,&quot;2e796cbc-f7d5-4191-bf94-be16178738f8&quot;,&quot;f35c392a-4e78-427e-ab16-56c0bf77af99&quot;,&quot;5ee673a8-a5ee-4841-a41b-3c7852b33b06&quot;,&quot;c27d2dce-06e0-4e8c-9299-8142ff7b7b79&quot;,&quot;56a06dbb-15a4-476b-ae79-3318573bd894&quot;,&quot;83e64adf-c1f3-42cc-9e28-a3e15c39fa09&quot;,&quot;a5754bf0-d550-4119-b887-21b3fd776069&quot;,&quot;a37716eb-3a53-428b-ac23-7b2bb2a51c04&quot;,&quot;f9395b30-8ab7-4265-9aeb-605663c9d78e&quot;,&quot;5eee01b9-6f9b-42fc-b500-cc2dcab0f2a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;f2cbd588-a0ca-45bc-a8a9-0710175e71a8&quot;,&quot;9fcea2c6-9e6c-4893-84d0-16c6fc99ed90&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:181,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c00b683d-5c3a-4ca5-bc39-341ece0dcacf&quot;,&quot;title&quot;:&quot;data-type test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/data-type.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/data-type.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;data-type test\&quot;&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;before each\&quot; hook in \&quot;data-type test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8efa5e95-c251-4972-bd1e-131b43ba4120&quot;,&quot;parentUUID&quot;:&quot;c00b683d-5c3a-4ca5-bc39-341ece0dcacf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;data-type test\&quot;&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;after all\&quot; hook in \&quot;data-type test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;925dc4b6-7014-4733-a114-bdba82c7c58f&quot;,&quot;parentUUID&quot;:&quot;c00b683d-5c3a-4ca5-bc39-341ece0dcacf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;data-type test\&quot;&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;after each\&quot; hook in \&quot;data-type test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec0b9ecf-f69c-41e9-9bf1-f04860e8db73&quot;,&quot;parentUUID&quot;:&quot;c00b683d-5c3a-4ca5-bc39-341ece0dcacf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should enumerate data-types&quot;,&quot;fullTitle&quot;:&quot;data-type test should enumerate data-types&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        (0, chai_1.expect)(data_type_1.DataType.NONE).to.equal(\&quot;none\&quot;);\n        (0, chai_1.expect)(data_type_1.DataType.STRING).to.equal(\&quot;string\&quot;);\n        (0, chai_1.expect)(data_type_1.DataType.LIST).to.equal(\&quot;list\&quot;);\n        (0, chai_1.expect)(data_type_1.DataType.SET).to.equal(\&quot;set\&quot;);\n        (0, chai_1.expect)(data_type_1.DataType.ZSET).to.equal(\&quot;zset\&quot;);\n        (0, chai_1.expect)(data_type_1.DataType.HASH).to.equal(\&quot;hash\&quot;);\n        (0, chai_1.expect)(Object.keys(data_type_1.DataType).length).to.equal(6);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bec43970-7ed3-4b4a-965f-3395f4d25c14&quot;,&quot;parentUUID&quot;:&quot;c00b683d-5c3a-4ca5-bc39-341ece0dcacf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bec43970-7ed3-4b4a-965f-3395f4d25c14&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;title&quot;:&quot;sorted-set test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;sorted-set test\&quot;&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;before each\&quot; hook in \&quot;sorted-set test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();\nss = new sorted_set_1.SortedSet();\nz = new Z();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78436d2b-a3ff-4f6b-9a14-6ddbd2e3ba0a&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;sorted-set test\&quot;&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;after all\&quot; hook in \&quot;sorted-set test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebdcbfc3-c630-4132-bfad-3925181659d9&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;sorted-set test\&quot;&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;after each\&quot; hook in \&quot;sorted-set test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;813c67ab-27df-41e4-91e1-5bb389362d5a&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should instantiate&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should instantiate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        (0, chai_1.expect)(z.constructor.name).to.equal(\&quot;Z\&quot;);\n        ss = new sorted_set_1.SortedSet();\n        (0, chai_1.expect)(ss.constructor.name).to.equal(\&quot;SortedSet\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5ea1249-5499-44b5-9084-8699dd00de37&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add, get, and delete an entry&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should add, get, and delete an entry&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(\&quot;test\&quot;, 1);\n        (0, chai_1.expect)(added).to.equal(null);\n        added = ss.add(\&quot;test\&quot;, 1);\n        (0, chai_1.expect)(added).to.equal(null);\n        (0, chai_1.expect)(z.keys().length).to.equal(1);\n        (0, chai_1.expect)(ss.keys().length).to.equal(1);\n        let item = z.get(\&quot;test\&quot;);\n        (0, chai_1.expect)(item.constructor.name).to.equal(\&quot;Number\&quot;);\n        item = ss.get(\&quot;test\&quot;);\n        (0, chai_1.expect)(item.constructor.name).to.equal(\&quot;Number\&quot;);\n        z.del(\&quot;test\&quot;);\n        (0, chai_1.expect)(z.keys().length).to.equal(0);\n        ss.del(\&quot;test\&quot;);\n        (0, chai_1.expect)(ss.keys().length).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37847d96-a91c-4a64-8c4d-28c56c8da18d&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw when attempting to add __proto__ key&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should throw when attempting to add __proto__ key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        (0, chai_1.expect)(() =&gt; {\n            z.add(\&quot;__proto__\&quot;, 0);\n        }).to.throw();\n        /*\n         * Expect(() =&gt; {\n         *   ss.add(&#x27;__proto__&#x27;, 0)\n         * }).to.throw();\n         */\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9fbdc1e-d2ef-4207-8592-9e3c71453109&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not add an undefined or null score&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should not add an undefined or null score&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(\&quot;test\&quot;, null);\n        (0, chai_1.expect)(added).to.equal(null);\n        (0, chai_1.expect)(z.keys().length).to.equal(0);\n        added = z.add(\&quot;test\&quot;, undefined);\n        (0, chai_1.expect)(z.keys().length).to.equal(0);\n        /*\n         * Typescript prevents adding null\n         * added = ss.add(&#x27;test&#x27;, null);\n         * expect(added).to.equal(null);\n         * expect(ss.keys().length).to.equal(0);\n         * added = ss.add(&#x27;test&#x27;, undefined);\n         * expect(z.keys().length).to.equal(0);\n         */\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ddbaf68-6f7b-474f-ad8c-50d8be8a0a83&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not duplicate key/value pairs&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should not duplicate key/value pairs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(\&quot;test\&quot;, 123);\n        (0, chai_1.expect)(added).to.equal(null); // This is weird\n        (0, chai_1.expect)(z.keys().length).to.equal(1);\n        added = z.add(\&quot;test\&quot;, 123);\n        (0, chai_1.expect)(added).to.equal(123); // And weirder\n        (0, chai_1.expect)(z.keys().length).to.equal(1);\n        added = ss.add(\&quot;test\&quot;, 123);\n        (0, chai_1.expect)(added).to.equal(null); // This is weird\n        (0, chai_1.expect)(ss.keys().length).to.equal(1);\n        added = ss.add(\&quot;test\&quot;, 123);\n        (0, chai_1.expect)(added).to.equal(123); // And weirder\n        (0, chai_1.expect)(ss.keys().length).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c85f45a1-8a4d-42f9-b03f-fbd75575b9b4&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the old rank when replacing a key&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should return the old rank when replacing a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(\&quot;test\&quot;, 123);\n        (0, chai_1.expect)(added).to.equal(null);\n        (0, chai_1.expect)(z.keys().length).to.equal(1);\n        added = z.add(\&quot;test\&quot;, 321);\n        (0, chai_1.expect)(added).to.equal(123);\n        (0, chai_1.expect)(z.keys().length).to.equal(1);\n        added = z.get(\&quot;test\&quot;);\n        (0, chai_1.expect)(added).to.equal(321);\n        added = ss.add(\&quot;test\&quot;, 123);\n        (0, chai_1.expect)(added).to.equal(null);\n        (0, chai_1.expect)(ss.keys().length).to.equal(1);\n        added = ss.add(\&quot;test\&quot;, 321);\n        (0, chai_1.expect)(added).to.equal(123);\n        (0, chai_1.expect)(ss.keys().length).to.equal(1);\n        added = ss.get(\&quot;test\&quot;);\n        (0, chai_1.expect)(added).to.equal(321);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c64998c5-df89-456a-89b2-c8c6d2d0f7af&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a value when adding at least 32 values (I think - it is difficult to tell)&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should return a value when adding at least 32 values (I think - it is difficult to tell)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2893711-f5f6-40ca-a44d-71c07121b53b&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        (0, chai_1.expect)(z.add(\&quot;Terminator\&quot;, 8.0)).to.equal(null); // =&gt; null\n        (0, chai_1.expect)(z.add(\&quot;District 9\&quot;, 8.0)).to.equal(null); // =&gt; null\n        (0, chai_1.expect)(z.add(\&quot;Ex Machina\&quot;, 0.7)).to.equal(null); // =&gt; null\n        (0, chai_1.expect)(z.add(\&quot;Ex Machina\&quot;, 7.7)).to.equal(0.7); // =&gt; 0.7\n        // Alias\n        (0, chai_1.expect)(z.set(\&quot;The Matrix\&quot;, 8.7)).to.equal(null); // =&gt; null\n        // Average O(1)\n        (0, chai_1.expect)(z.has(\&quot;Terminator\&quot;)).to.equal(true); // =&gt; true\n        (0, chai_1.expect)(z.has(\&quot;Blade Runner\&quot;)).to.equal(false); // =&gt; false\n        // Average O(1)\n        (0, chai_1.expect)(z.score(\&quot;Ex Machina\&quot;)).to.equal(7.7); // =&gt; 7.7\n        (0, chai_1.expect)(z.score(\&quot;Blade Runner\&quot;)).to.equal(null); // =&gt; null\n        // Alias\n        (0, chai_1.expect)(z.get(\&quot;The Matrix\&quot;)).to.equal(8.7); // =&gt; 8.7\n        // Average O(log(N))\n        (0, chai_1.expect)(z.rem(\&quot;Ex Machina\&quot;)).to.equal(7.7); // =&gt; 7.7\n        // Average O(1)\n        (0, chai_1.expect)(z.rem(\&quot;Ex Machina\&quot;)).to.equal(null); // =&gt; null\n        // Alias\n        (0, chai_1.expect)(z.del(\&quot;Ex Machina\&quot;)).to.equal(null); // =&gt; null\n        /*\n         * Average O(log(N)+M) where M is the number of elements between min and max\n         * This is not working as expected\n         */\n        (0, chai_1.expect)(z.rangeByScore(7, 8)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;\n        ]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        (0, chai_1.expect)(z.rangeByScore(8)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;,\n            \&quot;The Matrix\&quot;\n        ]); // [8.0-∞)\n        // =&gt; [&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]\n        (0, chai_1.expect)(z.rangeByScore(8, null, { \&quot;withScores\&quot;: true })).to.eql([\n            [\n                \&quot;District 9\&quot;,\n                8.0\n            ],\n            [\n                \&quot;Terminator\&quot;,\n                8.0\n            ],\n            [\n                \&quot;The Matrix\&quot;,\n                8.7\n            ]\n        ]);\n        // =&gt; [[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]\n        /*\n         * Average O(log(N)+log(M)) where M as in rangeByScore\n         * Again - not as expected\n         */\n        (0, chai_1.expect)(z.count(7, 8)).to.equal(2); // =&gt; 3\n        /*\n         * Average O(log(N))\n         * Not working as expected\n         */\n        (0, chai_1.expect)(z.rank(\&quot;Ex Machina\&quot;)).to.equal(null); // =&gt; 0\n        // Not working as expected\n        (0, chai_1.expect)(z.rank(\&quot;Terminator\&quot;)).to.equal(1); // =&gt; 2\n        (0, chai_1.expect)(z.rank(\&quot;Blade Runner\&quot;)).to.equal(null); // =&gt; null\n        /*\n         * Average O(log(N)+M) where M as in range\n         * Not working as expected\n         */\n        (0, chai_1.expect)(z.range(0, 2)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;,\n            \&quot;The Matrix\&quot;\n        ]);\n        /*\n         * =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n         * Not working as expected\n         */\n        (0, chai_1.expect)(z.range(0, 2, { \&quot;withScores\&quot;: true })).to.eql([\n            [\n                \&quot;District 9\&quot;,\n                8\n            ],\n            [\n                \&quot;Terminator\&quot;,\n                8\n            ],\n            [\n                \&quot;The Matrix\&quot;,\n                8.7\n            ]\n        ]);\n        /*\n         * =&gt; [[&#x27;Ex Machina&#x27;, 7.7],\n         *     [&#x27;District 9&#x27;, 8],\n         *     [&#x27;Terminator&#x27;, 8]]\n         */\n        (0, chai_1.expect)(z.range(-1)).to.eql([\&quot;The Matrix\&quot;]); // =&gt; [&#x27;The Matrix&#x27;]\n        /*\n         * Almost alias\n         * Not working as expected\n         */\n        (0, chai_1.expect)(z.slice(0, 3)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;,\n            \&quot;The Matrix\&quot;\n        ]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        /*\n         * Set cardinality (number of elements)\n         * Average O(1)\n         * Not working as expected\n         */\n        (0, chai_1.expect)(z.card()).to.equal(3); // =&gt; 4\n        /*\n         * Alias\n         * Not working as expected\n         */\n        (0, chai_1.expect)(z.length).to.equal(3); // =&gt; 4\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cec49767-6b04-4d83-94df-68a31c76c7d8&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;the rewrite should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;fullTitle&quot;:&quot;sorted-set test the rewrite should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        (0, chai_1.expect)(ss.add(\&quot;Terminator\&quot;, 8.0)).to.equal(null); // =&gt; null\n        (0, chai_1.expect)(ss.add(\&quot;District 9\&quot;, 8.0)).to.equal(null); // =&gt; null\n        (0, chai_1.expect)(ss.add(\&quot;Ex Machina\&quot;, 0.7)).to.equal(null); // =&gt; null\n        (0, chai_1.expect)(ss.add(\&quot;Ex Machina\&quot;, 7.7)).to.equal(0.7); // =&gt; 0.7\n        // Alias\n        (0, chai_1.expect)(ss.set(\&quot;The Matrix\&quot;, 8.7)).to.equal(null); // =&gt; null\n        // Average O(1)\n        (0, chai_1.expect)(ss.has(\&quot;Terminator\&quot;)).to.equal(true); // =&gt; true\n        (0, chai_1.expect)(ss.has(\&quot;Blade Runner\&quot;)).to.equal(false); // =&gt; false\n        // Average O(1)\n        (0, chai_1.expect)(ss.score(\&quot;Ex Machina\&quot;)).to.equal(7.7); // =&gt; 7.7\n        (0, chai_1.expect)(ss.score(\&quot;Blade Runner\&quot;)).to.equal(null); // =&gt; null\n        // Alias\n        (0, chai_1.expect)(ss.get(\&quot;The Matrix\&quot;)).to.equal(8.7); // =&gt; 8.7\n        // Average O(log(N))\n        (0, chai_1.expect)(ss.rem(\&quot;Ex Machina\&quot;)).to.equal(7.7); // =&gt; 7.7\n        // Average O(1)\n        (0, chai_1.expect)(ss.rem(\&quot;Ex Machina\&quot;)).to.equal(null); // =&gt; null\n        // Alias\n        (0, chai_1.expect)(ss.del(\&quot;Ex Machina\&quot;)).to.equal(null); // =&gt; null\n        /*\n         * Average O(log(N)+M) where M is the number of elements between min and max\n         * This is not working as expected\n         */\n        (0, chai_1.expect)(ss.rangeByScore(7, 8)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;\n        ]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        (0, chai_1.expect)(ss.rangeByScore(8)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;,\n            \&quot;The Matrix\&quot;\n        ]); // [8.0-∞)\n        // =&gt; [&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]\n        (0, chai_1.expect)(ss.rangeByScore(8, null, { \&quot;withScores\&quot;: true })).to.eql([\n            [\n                \&quot;District 9\&quot;,\n                8.0\n            ],\n            [\n                \&quot;Terminator\&quot;,\n                8.0\n            ],\n            [\n                \&quot;The Matrix\&quot;,\n                8.7\n            ]\n        ]);\n        // =&gt; [[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]\n        /*\n         * Average O(log(N)+log(M)) where M as in rangeByScore\n         * Again - not as expected\n         */\n        (0, chai_1.expect)(ss.count(7, 8)).to.equal(2); // =&gt; 3\n        /*\n         * Average O(log(N))\n         * Not working as expected\n         */\n        (0, chai_1.expect)(ss.rank(\&quot;Ex Machina\&quot;)).to.equal(null); // =&gt; 0\n        // Not working as expected\n        (0, chai_1.expect)(ss.rank(\&quot;Terminator\&quot;)).to.equal(1); // =&gt; 2\n        (0, chai_1.expect)(ss.rank(\&quot;Blade Runner\&quot;)).to.equal(null); // =&gt; null\n        /*\n         * Average O(log(N)+M) where M as in range\n         * Not working as expected\n         */\n        (0, chai_1.expect)(ss.range(0, 2)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;,\n            \&quot;The Matrix\&quot;\n        ]);\n        /*\n         * =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n         * Not working as expected\n         */\n        (0, chai_1.expect)(ss.range(0, 2, { \&quot;withScores\&quot;: true })).to.eql([\n            [\n                \&quot;District 9\&quot;,\n                8\n            ],\n            [\n                \&quot;Terminator\&quot;,\n                8\n            ],\n            [\n                \&quot;The Matrix\&quot;,\n                8.7\n            ]\n        ]);\n        /*\n         * =&gt; [[&#x27;Ex Machina&#x27;, 7.7],\n         *     [&#x27;District 9&#x27;, 8],\n         *     [&#x27;Terminator&#x27;, 8]]\n         */\n        (0, chai_1.expect)(ss.range(-1)).to.eql([\&quot;The Matrix\&quot;]); // =&gt; [&#x27;The Matrix&#x27;]\n        /*\n         * Almost alias\n         * Not working as expected\n         */\n        (0, chai_1.expect)(ss.slice(0, 3)).to.eql([\n            \&quot;District 9\&quot;,\n            \&quot;Terminator\&quot;,\n            \&quot;The Matrix\&quot;\n        ]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        /*\n         * Set cardinality (number of elements)\n         * Average O(1)\n         * Not working as expected\n         */\n        (0, chai_1.expect)(ss.card()).to.equal(3); // =&gt; 4\n        /*\n         * Alias\n         * Not working as expected\n         */\n        (0, chai_1.expect)(ss.length).to.equal(3); // =&gt; 4\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0c917f6-f833-43e2-9a36-419dc9bfc50d&quot;,&quot;parentUUID&quot;:&quot;be1ab9ec-e8d9-47a7-824b-a4d35b7132f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0d0ff2f7-1154-4c41-b39c-9de22decbe1f&quot;,&quot;title&quot;:&quot;skip map&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\n(0, chai_1.expect)(z).to.have.length(0);\n(0, chai_1.expect)(z.toArray()).to.eql([]);\n(0, chai_1.expect)(z.range()).to.eql([]);\n(0, chai_1.expect)(z.rangeByScore()).to.eql([]);\n(0, chai_1.expect)(() =&gt; {\n    z.add(\&quot;__proto__\&quot;, 14);\n}).to.throw();\nz.add(\&quot;5a600e16\&quot;, 8);\nz.add(\&quot;5a600e17\&quot;, 9);\n(0, chai_1.expect)(z.add(\&quot;5a600e18\&quot;, 10)).to.equal(null);\n(0, chai_1.expect)(z.add(\&quot;5a600e17\&quot;, 12)).to.equal(9);\n(0, chai_1.expect)(z).to.have.length(3);\n(0, chai_1.expect)(z.toArray()).to.eql([\n    \&quot;5a600e16\&quot;,\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e17\&quot;\n]);\n(0, chai_1.expect)(z.toArray()).to.eql(z.range(0, -1));\n(0, chai_1.expect)(z.toArray()).to.eql(z.rangeByScore());\n(0, chai_1.expect)(z.has(\&quot;5a600e16\&quot;)).to.be.ok;\n(0, chai_1.expect)(z.has(\&quot;5a600e17\&quot;)).to.be.ok;\n(0, chai_1.expect)(z.has(\&quot;5a600e18\&quot;)).to.be.ok;\n(0, chai_1.expect)(z.has(\&quot;5a600e19\&quot;)).to.not.be.ok;\n(0, chai_1.expect)(z.score(\&quot;5a600e16\&quot;)).to.equal(8);\n(0, chai_1.expect)(z.score(\&quot;5a600e17\&quot;)).to.equal(12);\n(0, chai_1.expect)(z.score(\&quot;5a600e18\&quot;)).to.equal(10);\n(0, chai_1.expect)(z.score(\&quot;5a600e19\&quot;)).to.equal(null);\n(0, chai_1.expect)(z.rem(\&quot;5a600e16\&quot;)).to.equal(8);\n(0, chai_1.expect)(z).to.have.length(2);\n(0, chai_1.expect)(z.rem(\&quot;5a600e16\&quot;)).to.equal(null);\n(0, chai_1.expect)(z).to.have.length(2);\n(0, chai_1.expect)(z.has(\&quot;5a600e16\&quot;)).to.not.be.ok;\n(0, chai_1.expect)(z.toArray()).to.eql([\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e17\&quot;\n]);\n(0, chai_1.expect)(z.toArray({ \&quot;withScores\&quot;: true })).\n    to.eql(z.range(0, -1, { \&quot;withScores\&quot;: true }));\n(0, chai_1.expect)(z.toArray()).to.eql(z.rangeByScore());\nz.add(\&quot;5a600e16\&quot;, 10);\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\n(0, chai_1.expect)(z).to.have.length(9);\n// No change, so should be O(1)\nz.add(\&quot;5a600e17\&quot;, 12);\n(0, chai_1.expect)(z.rank(\&quot;5a600e17\&quot;)).to.equal(4);\n(0, chai_1.expect)(z).to.have.length(9);\n(0, chai_1.expect)(z.toArray()).to.eql([\n    \&quot;5a600e16\&quot;,\n    \&quot;5a600e11\&quot;,\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e13\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e12\&quot;,\n    \&quot;5a600e15\&quot;\n]);\n(0, chai_1.expect)(z.toArray()).to.eql(z.range(0, -1));\n(0, chai_1.expect)(z.toArray()).to.eql(z.rangeByScore());\n(0, chai_1.expect)(z.rangeByScore(14, 16, { \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8b00e1b-c7b2-40bf-8990-60c62cc0ae18&quot;,&quot;parentUUID&quot;:&quot;0d0ff2f7-1154-4c41-b39c-9de22decbe1f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d6296a5a-7140-4e46-b7f8-04792b62f115&quot;,&quot;title&quot;:&quot;#add&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should implicitly delete&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #add should implicitly delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.add(\&quot;5a600e14\&quot;, null)).to.equal(14);\n(0, chai_1.expect)(z.add(\&quot;5a600e19\&quot;, null)).to.equal(null);\n(0, chai_1.expect)(z).to.have.length(8);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07b69286-e43b-44cd-a6ca-f8e55c54a40e&quot;,&quot;parentUUID&quot;:&quot;d6296a5a-7140-4e46-b7f8-04792b62f115&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07b69286-e43b-44cd-a6ca-f8e55c54a40e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cf15f34c-05ff-4a34-a259-96e377caefb7&quot;,&quot;title&quot;:&quot;#empty&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #empty should remove all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\nz.empty();\n(0, chai_1.expect)(z).to.have.length(0);\n(0, chai_1.expect)(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7292b826-ea53-4ccd-bc8f-c0bc15c82fec&quot;,&quot;parentUUID&quot;:&quot;cf15f34c-05ff-4a34-a259-96e377caefb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7292b826-ea53-4ccd-bc8f-c0bc15c82fec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b9e8130e-26b3-40a1-a45c-b30291d327af&quot;,&quot;title&quot;:&quot;#incrBy(increment, key)&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #incrBy(increment, key) should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;first\&quot;, 1);\nz.add(\&quot;second\&quot;, 2);\nz.add(\&quot;third\&quot;, 3);\nz.add(\&quot;fourth\&quot;, 4);\n(0, chai_1.expect)(z.incrBy(2, \&quot;first\&quot;)).to.equal(3);\n(0, chai_1.expect)(z.rank(\&quot;first\&quot;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e65297e-2b49-473f-bb01-e3ba6971b1aa&quot;,&quot;parentUUID&quot;:&quot;b9e8130e-26b3-40a1-a45c-b30291d327af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create if not found&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #incrBy(increment, key) should create if not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;first\&quot;, 1);\nz.incrBy(2, \&quot;second\&quot;);\n(0, chai_1.expect)(z.card()).to.equal(2);\n(0, chai_1.expect)(z.rank(\&quot;second\&quot;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de316bfb-baf6-44c6-b2c8-367c247b53d9&quot;,&quot;parentUUID&quot;:&quot;b9e8130e-26b3-40a1-a45c-b30291d327af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e65297e-2b49-473f-bb01-e3ba6971b1aa&quot;,&quot;de316bfb-baf6-44c6-b2c8-367c247b53d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82b050f5-8b42-4812-b2a1-088711e14b82&quot;,&quot;title&quot;:&quot;#keys&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the keys&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #keys should return the keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.keys()).to.eql([\n    \&quot;5a600e16\&quot;,\n    \&quot;5a600e11\&quot;,\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e13\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e12\&quot;,\n    \&quot;5a600e15\&quot;\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab3e7c58-19bc-4132-b1fd-a8333dd7f993&quot;,&quot;parentUUID&quot;:&quot;82b050f5-8b42-4812-b2a1-088711e14b82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ab3e7c58-19bc-4132-b1fd-a8333dd7f993&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be6a3e52-3247-469b-a2d3-4c9d3136f051&quot;,&quot;title&quot;:&quot;#rangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rangeByScore should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.rangeByScore(14, null, { \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);\n(0, chai_1.expect)(z.rangeByScore(null, 10, { \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e11\&quot;,\n        6\n    ],\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ]\n]);\n(0, chai_1.expect)(z.rangeByScore(-Infinity, Infinity)).to.eql(z.toArray());\n(0, chai_1.expect)(z.rangeByScore(null, null)).to.eql(z.toArray());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;437d95c9-a8bb-469d-9d0f-7bf2261ddf80&quot;,&quot;parentUUID&quot;:&quot;be6a3e52-3247-469b-a2d3-4c9d3136f051&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;437d95c9-a8bb-469d-9d0f-7bf2261ddf80&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;128df039-9c3b-4c3d-aed7-92f6e71c1fd7&quot;,&quot;title&quot;:&quot;#count&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should count elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #count should count elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\n(0, chai_1.expect)(z.count()).to.equal(0);\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\nz.add(\&quot;5a600e19\&quot;, 14);\nz.add(\&quot;5a600f00\&quot;, 30.0);\nz.add(\&quot;5a600f01\&quot;, 30.5);\nz.add(\&quot;5a600f02\&quot;, 31.0);\nz.add(\&quot;5a600f03\&quot;, 31.5);\nz.add(\&quot;5a600f04\&quot;, 32.0);\nz.add(\&quot;5a600f05\&quot;, 32.0);\nz.add(\&quot;5a600f06\&quot;, 32.0);\n(0, chai_1.expect)(z.count()).to.eql(z.rangeByScore().length);\n(0, chai_1.expect)(z.count(8)).to.eql(z.rangeByScore(8).length);\n(0, chai_1.expect)(z.count(3, 7)).to.eql(z.rangeByScore(3, 7).length);\n(0, chai_1.expect)(z.count(5, 14)).to.eql(z.rangeByScore(5, 14).length);\n(0, chai_1.expect)(z.count(5, 5)).to.eql(z.rangeByScore(5, 5).length);\n(0, chai_1.expect)(z.count(5, 0)).to.eql(z.rangeByScore(5, 0).length);\n(0, chai_1.expect)(z.count(30, 32)).to.eql(z.rangeByScore(30, 32).length);\n(0, chai_1.expect)(z.count(40)).to.eql(z.rangeByScore(40).length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;346add19-149b-461d-b207-ccecbaf5e56f&quot;,&quot;parentUUID&quot;:&quot;128df039-9c3b-4c3d-aed7-92f6e71c1fd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;346add19-149b-461d-b207-ccecbaf5e56f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c97051bd-47dd-434d-90c7-ba998e981f1a&quot;,&quot;title&quot;:&quot;#range&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #range should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;first\&quot;, 1);\nz.add(\&quot;second\&quot;, 2);\nz.add(\&quot;third\&quot;, 3);\nz.add(\&quot;fourth\&quot;, 4);\nconst array = [\n    \&quot;first\&quot;,\n    \&quot;second\&quot;,\n    \&quot;third\&quot;,\n    \&quot;fourth\&quot;\n];\n(0, chai_1.expect)(z.range()).to.eql(array);\n(0, chai_1.expect)(z.range(2)).to.eql(array.slice(2));\n(0, chai_1.expect)(z.range(8)).to.eql(array.slice(8));\n(0, chai_1.expect)(z.range(0, 2)).to.eql(array.slice(0, 3));\n(0, chai_1.expect)(z.range(-1)).to.eql([\&quot;fourth\&quot;]);\n(0, chai_1.expect)(z.range(-4)).to.eql(array);\n(0, chai_1.expect)(z.range(-4, -2)).to.eql(array.slice(0, 3));\n(0, chai_1.expect)(z.range(-4, z.length + 1000)).\n    to.eql(array.slice(-4, z.length + 1000));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b4af8e7-bc4b-4b0c-92af-a1ac0743b92e&quot;,&quot;parentUUID&quot;:&quot;c97051bd-47dd-434d-90c7-ba998e981f1a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support withScores&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #range should support withScores&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;first\&quot;, 1);\nz.add(\&quot;second\&quot;, 2);\n(0, chai_1.expect)(z.range(0, 0, { \&quot;withScores\&quot;: true })).\n    to.eql([\n    [\n        \&quot;first\&quot;,\n        1\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;918f50b9-e87a-4e8f-945b-63c740a35616&quot;,&quot;parentUUID&quot;:&quot;c97051bd-47dd-434d-90c7-ba998e981f1a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b4af8e7-bc4b-4b0c-92af-a1ac0743b92e&quot;,&quot;918f50b9-e87a-4e8f-945b-63c740a35616&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e705d1b6-0d4b-4b72-b38a-3a6ee9a21569&quot;,&quot;title&quot;:&quot;#intersect&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should intersect two sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect two sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const a = new Z(), b = new Z();\na.add(\&quot;5a600e10\&quot;, 16);\na.add(\&quot;5a600e12\&quot;, 10);\na.add(\&quot;5a600e14\&quot;, 9);\na.add(\&quot;5a600e15\&quot;, 14);\na.add(\&quot;5a600e17\&quot;, 20);\na.add(\&quot;5a600e18\&quot;, 13);\na.add(\&quot;5a600e19\&quot;, 15);\na.add(\&quot;5a600e1a\&quot;, 19);\na.add(\&quot;5a600e1b\&quot;, 7);\na.add(\&quot;5a600e1c\&quot;, 13);\na.add(\&quot;5a600e1e\&quot;, 10);\nb.add(\&quot;5a600e10\&quot;, 0);\nb.add(\&quot;5a600e11\&quot;, 15);\nb.add(\&quot;5a600e13\&quot;, 5);\nb.add(\&quot;5a600e14\&quot;, 3);\nb.add(\&quot;5a600e15\&quot;, 14);\nb.add(\&quot;5a600e17\&quot;, 12);\nb.add(\&quot;5a600e19\&quot;, 12);\nb.add(\&quot;5a600e1b\&quot;, 16);\nb.add(\&quot;5a600e1c\&quot;, 12);\nb.add(\&quot;5a600e1d\&quot;, 17);\nb.add(\&quot;5a600e1f\&quot;, 3);\n(0, chai_1.expect)(Z.intersect(a, b)).to.eql([\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e19\&quot;,\n    \&quot;5a600e1c\&quot;,\n    \&quot;5a600e15\&quot;,\n    \&quot;5a600e1b\&quot;\n]);\n(0, chai_1.expect)(Z.intersect(b, a)).to.eql([\n    \&quot;5a600e1b\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e1c\&quot;,\n    \&quot;5a600e15\&quot;,\n    \&quot;5a600e19\&quot;,\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e17\&quot;\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acc06497-ada4-478d-b765-1f4d63f372f5&quot;,&quot;parentUUID&quot;:&quot;e705d1b6-0d4b-4b72-b38a-3a6ee9a21569&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect three sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect three sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const a = new Z(), b = new Z(), c = new Z();\na.add(\&quot;5a600e10\&quot;, 16);\na.add(\&quot;5a600e12\&quot;, 10);\na.add(\&quot;5a600e14\&quot;, 9);\na.add(\&quot;5a600e15\&quot;, 14);\na.add(\&quot;5a600e17\&quot;, 20);\na.add(\&quot;5a600e18\&quot;, 13);\na.add(\&quot;5a600e19\&quot;, 15);\na.add(\&quot;5a600e1a\&quot;, 19);\na.add(\&quot;5a600e1b\&quot;, 7);\na.add(\&quot;5a600e1c\&quot;, 13);\na.add(\&quot;5a600e1e\&quot;, 10);\nb.add(\&quot;5a600e10\&quot;, 0);\nb.add(\&quot;5a600e11\&quot;, 15);\nb.add(\&quot;5a600e13\&quot;, 5);\nb.add(\&quot;5a600e14\&quot;, 3);\nb.add(\&quot;5a600e15\&quot;, 14);\nb.add(\&quot;5a600e17\&quot;, 12);\nb.add(\&quot;5a600e19\&quot;, 12);\nb.add(\&quot;5a600e1b\&quot;, 16);\nb.add(\&quot;5a600e1c\&quot;, 12);\nb.add(\&quot;5a600e1d\&quot;, 17);\nb.add(\&quot;5a600e1f\&quot;, 3);\nc.add(\&quot;5a600e10\&quot;, 7);\nc.add(\&quot;5a600e12\&quot;, 20);\nc.add(\&quot;5a600e13\&quot;, 9);\nc.add(\&quot;5a600e14\&quot;, 19);\nc.add(\&quot;5a600e16\&quot;, 19);\nc.add(\&quot;5a600e17\&quot;, 1);\nc.add(\&quot;5a600e18\&quot;, 18);\nc.add(\&quot;5a600e1a\&quot;, 6);\nc.add(\&quot;5a600e1c\&quot;, 15);\nc.add(\&quot;5a600e1f\&quot;, 4);\n(0, chai_1.expect)(Z.intersect(c, a, b)).to.eql([\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e1c\&quot;\n]);\n(0, chai_1.expect)(Z.intersect(c, a, b)).to.eql(c.intersect(a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42de07d7-5e92-46fe-8893-951944ddf028&quot;,&quot;parentUUID&quot;:&quot;e705d1b6-0d4b-4b72-b38a-3a6ee9a21569&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect four sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect four sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const a = new Z(), b = new Z(), c = new Z(), d = new Z();\na.add(\&quot;5a600e10\&quot;, 16);\na.add(\&quot;5a600e12\&quot;, 10);\na.add(\&quot;5a600e14\&quot;, 9);\na.add(\&quot;5a600e15\&quot;, 14);\na.add(\&quot;5a600e17\&quot;, 20);\na.add(\&quot;5a600e18\&quot;, 13);\na.add(\&quot;5a600e19\&quot;, 15);\na.add(\&quot;5a600e1a\&quot;, 19);\na.add(\&quot;5a600e1b\&quot;, 7);\na.add(\&quot;5a600e1c\&quot;, 13);\na.add(\&quot;5a600e1e\&quot;, 10);\nb.add(\&quot;5a600e10\&quot;, 0);\nb.add(\&quot;5a600e11\&quot;, 15);\nb.add(\&quot;5a600e13\&quot;, 5);\nb.add(\&quot;5a600e14\&quot;, 3);\nb.add(\&quot;5a600e15\&quot;, 14);\nb.add(\&quot;5a600e17\&quot;, 12);\nb.add(\&quot;5a600e19\&quot;, 12);\nb.add(\&quot;5a600e1b\&quot;, 16);\nb.add(\&quot;5a600e1c\&quot;, 12);\nb.add(\&quot;5a600e1d\&quot;, 17);\nb.add(\&quot;5a600e1f\&quot;, 3);\nc.add(\&quot;5a600e10\&quot;, 7);\nc.add(\&quot;5a600e12\&quot;, 20);\nc.add(\&quot;5a600e13\&quot;, 9);\nc.add(\&quot;5a600e14\&quot;, 19);\nc.add(\&quot;5a600e16\&quot;, 19);\nc.add(\&quot;5a600e17\&quot;, 1);\nc.add(\&quot;5a600e18\&quot;, 18);\nc.add(\&quot;5a600e1a\&quot;, 6);\nc.add(\&quot;5a600e1c\&quot;, 15);\nc.add(\&quot;5a600e1f\&quot;, 4);\nd.add(\&quot;5a600e1c\&quot;, 400);\nd.add(\&quot;5a600e17\&quot;, 500);\nd.add(\&quot;5a600e1f\&quot;, 600);\nd.add(\&quot;5a600e20\&quot;, 700);\n(0, chai_1.expect)(Z.intersect(d, c, a, b)).to.eql([\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e1c\&quot;\n]);\n(0, chai_1.expect)(Z.intersect(d, c, a, b)).to.eql(d.intersect(c, a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d79c8763-6a2c-4346-8be1-777126cdb0a9&quot;,&quot;parentUUID&quot;:&quot;e705d1b6-0d4b-4b72-b38a-3a6ee9a21569&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;acc06497-ada4-478d-b765-1f4d63f372f5&quot;,&quot;42de07d7-5e92-46fe-8893-951944ddf028&quot;,&quot;d79c8763-6a2c-4346-8be1-777126cdb0a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b50118be-1d51-482c-afbd-be7b349f9bb7&quot;,&quot;title&quot;:&quot;#rank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the correct rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rank should get the correct rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.rank(\&quot;5a600e12\&quot;)).to.equal(7);\n(0, chai_1.expect)(z.rank(\&quot;5a600e13\&quot;)).to.equal(3);\n(0, chai_1.expect)(z.rank(\&quot;5a600e16\&quot;)).to.equal(0);\n(0, chai_1.expect)(z.rank(\&quot;5a600e15\&quot;)).to.equal(8);\n(0, chai_1.expect)(z.rank(\&quot;not in set\&quot;)).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;851e7318-5112-4dcb-87ae-e56610bd44c0&quot;,&quot;parentUUID&quot;:&quot;b50118be-1d51-482c-afbd-be7b349f9bb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;851e7318-5112-4dcb-87ae-e56610bd44c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;848f9625-71c8-4411-aac2-a14873fc6990&quot;,&quot;title&quot;:&quot;#rem&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete special elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rem should delete special elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.rem(\&quot;5a600e15\&quot;)).to.equal(19);\n(0, chai_1.expect)(z).to.have.length(8);\n(0, chai_1.expect)(z.rem(\&quot;5a600e16\&quot;)).to.equal(3);\n(0, chai_1.expect)(z).to.have.length(7);\n(0, chai_1.expect)(z.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e11\&quot;,\n        6\n    ],\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ],\n    [\n        \&quot;5a600e13\&quot;,\n        11\n    ],\n    [\n        \&quot;5a600e17\&quot;,\n        12\n    ],\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22d3ec5c-bfbb-4008-82c2-cc1eb152df22&quot;,&quot;parentUUID&quot;:&quot;848f9625-71c8-4411-aac2-a14873fc6990&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete many elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rem should delete many elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.rem(\&quot;5a600e11\&quot;)).to.equal(6);\n(0, chai_1.expect)(z.rem(\&quot;5a600e13\&quot;)).to.equal(11);\n(0, chai_1.expect)(z.rem(\&quot;5a600e14\&quot;)).to.equal(14);\n(0, chai_1.expect)(z.rem(\&quot;5a600e15\&quot;)).to.equal(19);\n(0, chai_1.expect)(z.rem(\&quot;5a600e16\&quot;)).to.equal(3);\n(0, chai_1.expect)(z.rem(\&quot;5a600e17\&quot;)).to.equal(12);\n(0, chai_1.expect)(z.length).to.equal(3);\n(0, chai_1.expect)(z.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7efa8561-3e4e-47ae-9530-9a01267c2feb&quot;,&quot;parentUUID&quot;:&quot;848f9625-71c8-4411-aac2-a14873fc6990&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22d3ec5c-bfbb-4008-82c2-cc1eb152df22&quot;,&quot;7efa8561-3e4e-47ae-9530-9a01267c2feb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b608cd8a-9797-47e4-a28d-5f7d1c7e6b37&quot;,&quot;title&quot;:&quot;#remRangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a range of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByScore should strip out a range of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.remRangeByScore(4, 14)).to.equal(5);\n(0, chai_1.expect)(z).to.have.length(4);\n(0, chai_1.expect)(z.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0aa5b89-ae09-4e6c-a314-50af3e268821&quot;,&quot;parentUUID&quot;:&quot;b608cd8a-9797-47e4-a28d-5f7d1c7e6b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all the elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByScore should strip out all the elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.remRangeByScore(3, 19)).to.equal(9);\n(0, chai_1.expect)(z).to.have.length(0);\n(0, chai_1.expect)(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20934962-3260-4e0f-a195-e786009dcdc4&quot;,&quot;parentUUID&quot;:&quot;b608cd8a-9797-47e4-a28d-5f7d1c7e6b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0aa5b89-ae09-4e6c-a314-50af3e268821&quot;,&quot;20934962-3260-4e0f-a195-e786009dcdc4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;45c40869-f681-4431-ae04-95515016834b&quot;,&quot;title&quot;:&quot;#remRangeByRank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a slice of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByRank should strip out a slice of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.remRangeByRank(1, 6)).to.equal(5);\n(0, chai_1.expect)(z).to.have.length(4);\n(0, chai_1.expect)(z.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;284ef549-6341-4a39-a2ea-ceeb06d2ec25&quot;,&quot;parentUUID&quot;:&quot;45c40869-f681-4431-ae04-95515016834b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByRank should strip out all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(z.remRangeByRank(0, 9)).to.equal(9);\n(0, chai_1.expect)(z).to.have.length(0);\n(0, chai_1.expect)(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93b44dd4-c609-4e58-8894-c96c9eb8e3ff&quot;,&quot;parentUUID&quot;:&quot;45c40869-f681-4431-ae04-95515016834b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;284ef549-6341-4a39-a2ea-ceeb06d2ec25&quot;,&quot;93b44dd4-c609-4e58-8894-c96c9eb8e3ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f4fa601a-2c53-4bc1-b809-55f399dc9db4&quot;,&quot;title&quot;:&quot;#values&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the values&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #values should return the values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z();\nz.add(\&quot;first\&quot;, -1);\nz.add(\&quot;third\&quot;, 5);\nz.add(\&quot;second\&quot;, 3);\n(0, chai_1.expect)(z.values()).to.eql([\n    -1,\n    3,\n    5\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e314bd5-1883-4e3b-bb9c-e9f436377c8d&quot;,&quot;parentUUID&quot;:&quot;f4fa601a-2c53-4bc1-b809-55f399dc9db4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e314bd5-1883-4e3b-bb9c-e9f436377c8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;de3d859e-1886-4d99-96e3-082481d82333&quot;,&quot;title&quot;:&quot;unique&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should ensure values are unique&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map unique should ensure values are unique&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z({ \&quot;unique\&quot;: true });\nassert.equal(z.keys().length, 0, \&quot;Expected an empty SortedSet\&quot;);\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(() =&gt; {\n    z.add(\&quot;5a600e19\&quot;, 11);\n}).to.throw(/unique/);\n// Quick exit test\n(0, chai_1.expect)(() =&gt; {\n    z.add(\&quot;5a600dff\&quot;, z._head.next[z._level - 1].next.value);\n}).to.throw(/unique/);\n// This test ensures the key &lt; key check doesn&#x27;t come into play\n(0, chai_1.expect)(() =&gt; {\n    z.add(\&quot;5a600dff\&quot;, 11);\n}).to.throw(/unique/);\n(0, chai_1.expect)(() =&gt; {\n    z.add(\&quot;5a600e18\&quot;, 10);\n}).to.not.throw();\n(0, chai_1.expect)(z).to.have.length(9);\n(0, chai_1.expect)(z.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e11\&quot;,\n        6\n    ],\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ],\n    [\n        \&quot;5a600e13\&quot;,\n        11\n    ],\n    [\n        \&quot;5a600e17\&quot;,\n        12\n    ],\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8580f72-c71d-4acd-b3c8-aaface196d5d&quot;,&quot;parentUUID&quot;:&quot;de3d859e-1886-4d99-96e3-082481d82333&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert keys if constraint broken during update&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map unique should revert keys if constraint broken during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const z = new Z({ \&quot;unique\&quot;: true });\nz.add(\&quot;5a600e10\&quot;, 16);\nz.add(\&quot;5a600e11\&quot;, 6);\nz.add(\&quot;5a600e12\&quot;, 17);\nz.add(\&quot;5a600e13\&quot;, 11);\nz.add(\&quot;5a600e14\&quot;, 14);\nz.add(\&quot;5a600e15\&quot;, 19);\nz.add(\&quot;5a600e16\&quot;, 3);\nz.add(\&quot;5a600e17\&quot;, 12);\nz.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(() =&gt; {\n    z.add(\&quot;5a600e13\&quot;, 14);\n}).to.throw(/unique/);\n(0, chai_1.expect)(z).to.have.length(9);\n(0, chai_1.expect)(z.score(\&quot;5a600e13\&quot;)).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cb33ac4-e2bb-4f73-81a2-f2bc085f2552&quot;,&quot;parentUUID&quot;:&quot;de3d859e-1886-4d99-96e3-082481d82333&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8580f72-c71d-4acd-b3c8-aaface196d5d&quot;,&quot;2cb33ac4-e2bb-4f73-81a2-f2bc085f2552&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;b8b00e1b-c7b2-40bf-8990-60c62cc0ae18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3d651060-6eed-474e-a520-a5cbf3b5e10b&quot;,&quot;title&quot;:&quot;skip map rewrite&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\n(0, chai_1.expect)(ss).to.have.length(0);\n(0, chai_1.expect)(ss.toArray()).to.eql([]);\n(0, chai_1.expect)(ss.range()).to.eql([]);\n(0, chai_1.expect)(ss.rangeByScore()).to.eql([]);\n/*\n * Expect(() =&gt; {\n *   Ss.add(&#x27;__proto__&#x27;, 14);\n * }).to.throw();\n */\nss.add(\&quot;5a600e16\&quot;, 8);\nss.add(\&quot;5a600e17\&quot;, 9);\n(0, chai_1.expect)(ss.add(\&quot;5a600e18\&quot;, 10)).to.equal(null);\n(0, chai_1.expect)(ss.add(\&quot;5a600e17\&quot;, 12)).to.equal(9);\n(0, chai_1.expect)(ss).to.have.length(3);\n(0, chai_1.expect)(ss.toArray()).to.eql([\n    \&quot;5a600e16\&quot;,\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e17\&quot;\n]);\n(0, chai_1.expect)(ss.toArray()).to.eql(ss.range(0, -1));\n(0, chai_1.expect)(ss.toArray()).to.eql(ss.rangeByScore());\n(0, chai_1.expect)(ss.has(\&quot;5a600e16\&quot;)).to.be.ok;\n(0, chai_1.expect)(ss.has(\&quot;5a600e17\&quot;)).to.be.ok;\n(0, chai_1.expect)(ss.has(\&quot;5a600e18\&quot;)).to.be.ok;\n(0, chai_1.expect)(ss.has(\&quot;5a600e19\&quot;)).to.not.be.ok;\n(0, chai_1.expect)(ss.score(\&quot;5a600e16\&quot;)).to.equal(8);\n(0, chai_1.expect)(ss.score(\&quot;5a600e17\&quot;)).to.equal(12);\n(0, chai_1.expect)(ss.score(\&quot;5a600e18\&quot;)).to.equal(10);\n(0, chai_1.expect)(ss.score(\&quot;5a600e19\&quot;)).to.equal(null);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e16\&quot;)).to.equal(8);\n(0, chai_1.expect)(ss).to.have.length(2);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e16\&quot;)).to.equal(null);\n(0, chai_1.expect)(ss).to.have.length(2);\n(0, chai_1.expect)(ss.has(\&quot;5a600e16\&quot;)).to.not.be.ok;\n(0, chai_1.expect)(ss.toArray()).to.eql([\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e17\&quot;\n]);\n(0, chai_1.expect)(ss.toArray({ \&quot;withScores\&quot;: true })).\n    to.eql(ss.range(0, -1, { \&quot;withScores\&quot;: true }));\n(0, chai_1.expect)(ss.toArray()).to.eql(ss.rangeByScore());\nss.add(\&quot;5a600e16\&quot;, 10);\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\n(0, chai_1.expect)(ss).to.have.length(9);\n// No change, so should be O(1)\nss.add(\&quot;5a600e17\&quot;, 12);\n(0, chai_1.expect)(ss.rank(\&quot;5a600e17\&quot;)).to.equal(4);\n(0, chai_1.expect)(ss).to.have.length(9);\n(0, chai_1.expect)(ss.toArray()).to.eql([\n    \&quot;5a600e16\&quot;,\n    \&quot;5a600e11\&quot;,\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e13\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e12\&quot;,\n    \&quot;5a600e15\&quot;\n]);\n(0, chai_1.expect)(ss.toArray()).to.eql(ss.range(0, -1));\n(0, chai_1.expect)(ss.toArray()).to.eql(ss.rangeByScore());\n(0, chai_1.expect)(ss.rangeByScore(14, 16, { \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9c18d0d-4cf5-425e-b448-81c424471f8b&quot;,&quot;parentUUID&quot;:&quot;3d651060-6eed-474e-a520-a5cbf3b5e10b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;16e02e30-89d6-4870-92cb-1d72528c1acf&quot;,&quot;title&quot;:&quot;#add&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should implicitly delete&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #add should implicitly delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.add(\&quot;5a600e14\&quot;, null)).to.equal(14);\n(0, chai_1.expect)(ss.add(\&quot;5a600e19\&quot;, null)).to.equal(null);\n(0, chai_1.expect)(ss).to.have.length(8);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a602b5c-fb3b-4051-9984-9bc0d5d5e08e&quot;,&quot;parentUUID&quot;:&quot;16e02e30-89d6-4870-92cb-1d72528c1acf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a602b5c-fb3b-4051-9984-9bc0d5d5e08e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b63e4bb2-223e-4ada-ac24-048b363339f3&quot;,&quot;title&quot;:&quot;#empty&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #empty should remove all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\nss.empty();\n(0, chai_1.expect)(ss).to.have.length(0);\n(0, chai_1.expect)(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;464a702a-9c94-4b72-a0cd-a8bf8113d55a&quot;,&quot;parentUUID&quot;:&quot;b63e4bb2-223e-4ada-ac24-048b363339f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;464a702a-9c94-4b72-a0cd-a8bf8113d55a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9230d54c-fa63-456c-8d2c-fcf771cde9d3&quot;,&quot;title&quot;:&quot;#incrBy(increment, key)&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #incrBy(increment, key) should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;first\&quot;, 1);\nss.add(\&quot;second\&quot;, 2);\nss.add(\&quot;third\&quot;, 3);\nss.add(\&quot;fourth\&quot;, 4);\n(0, chai_1.expect)(ss.incrBy(2, \&quot;first\&quot;)).to.equal(3);\n(0, chai_1.expect)(ss.rank(\&quot;first\&quot;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9af6962-6bf6-4d14-914c-c8781b1b96ef&quot;,&quot;parentUUID&quot;:&quot;9230d54c-fa63-456c-8d2c-fcf771cde9d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create if not found&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #incrBy(increment, key) should create if not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;first\&quot;, 1);\nss.incrBy(2, \&quot;second\&quot;);\n(0, chai_1.expect)(ss.card()).to.equal(2);\n(0, chai_1.expect)(ss.rank(\&quot;second\&quot;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28fc4f1f-39af-436d-b567-2bef2e2187e3&quot;,&quot;parentUUID&quot;:&quot;9230d54c-fa63-456c-8d2c-fcf771cde9d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f9af6962-6bf6-4d14-914c-c8781b1b96ef&quot;,&quot;28fc4f1f-39af-436d-b567-2bef2e2187e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a789da6f-5f41-46b1-a814-0009d2f70df7&quot;,&quot;title&quot;:&quot;#keys&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the keys&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #keys should return the keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.keys()).to.eql([\n    \&quot;5a600e16\&quot;,\n    \&quot;5a600e11\&quot;,\n    \&quot;5a600e18\&quot;,\n    \&quot;5a600e13\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e12\&quot;,\n    \&quot;5a600e15\&quot;\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2393e4fe-4f4b-4c1c-82cd-9529c0021b2d&quot;,&quot;parentUUID&quot;:&quot;a789da6f-5f41-46b1-a814-0009d2f70df7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2393e4fe-4f4b-4c1c-82cd-9529c0021b2d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;70425c48-c49b-42f5-a752-2bea491326e0&quot;,&quot;title&quot;:&quot;#rangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rangeByScore should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.rangeByScore(14, null, { \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);\n(0, chai_1.expect)(ss.rangeByScore(null, 10, { \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e11\&quot;,\n        6\n    ],\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ]\n]);\n(0, chai_1.expect)(ss.rangeByScore(-Infinity, Infinity)).to.eql(ss.toArray());\n(0, chai_1.expect)(ss.rangeByScore(null, null)).to.eql(ss.toArray());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ec98c6d-b3d0-490e-aa6e-1f33dd0af4c9&quot;,&quot;parentUUID&quot;:&quot;70425c48-c49b-42f5-a752-2bea491326e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ec98c6d-b3d0-490e-aa6e-1f33dd0af4c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;98973029-3720-49da-98ec-8459f8163cfb&quot;,&quot;title&quot;:&quot;#count&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should count elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #count should count elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\n(0, chai_1.expect)(ss.count()).to.equal(0);\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\nss.add(\&quot;5a600e19\&quot;, 14);\nss.add(\&quot;5a600f00\&quot;, 30.0);\nss.add(\&quot;5a600f01\&quot;, 30.5);\nss.add(\&quot;5a600f02\&quot;, 31.0);\nss.add(\&quot;5a600f03\&quot;, 31.5);\nss.add(\&quot;5a600f04\&quot;, 32.0);\nss.add(\&quot;5a600f05\&quot;, 32.0);\nss.add(\&quot;5a600f06\&quot;, 32.0);\n(0, chai_1.expect)(ss.count()).to.eql(ss.rangeByScore().length);\n(0, chai_1.expect)(ss.count(8)).to.eql(ss.rangeByScore(8).length);\n(0, chai_1.expect)(ss.count(3, 7)).to.eql(ss.rangeByScore(3, 7).length);\n(0, chai_1.expect)(ss.count(5, 14)).to.eql(ss.rangeByScore(5, 14).length);\n(0, chai_1.expect)(ss.count(5, 5)).to.eql(ss.rangeByScore(5, 5).length);\n(0, chai_1.expect)(ss.count(5, 0)).to.eql(ss.rangeByScore(5, 0).length);\n(0, chai_1.expect)(ss.count(30, 32)).to.eql(ss.rangeByScore(30, 32).length);\n(0, chai_1.expect)(ss.count(40)).to.eql(ss.rangeByScore(40).length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;241b521d-269e-4fce-b542-d4bc4fa985b3&quot;,&quot;parentUUID&quot;:&quot;98973029-3720-49da-98ec-8459f8163cfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;241b521d-269e-4fce-b542-d4bc4fa985b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2c93f749-1190-42c7-8ad5-0e741b73cff6&quot;,&quot;title&quot;:&quot;#range&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #range should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;first\&quot;, 1);\nss.add(\&quot;second\&quot;, 2);\nss.add(\&quot;third\&quot;, 3);\nss.add(\&quot;fourth\&quot;, 4);\nconst array = [\n    \&quot;first\&quot;,\n    \&quot;second\&quot;,\n    \&quot;third\&quot;,\n    \&quot;fourth\&quot;\n];\n(0, chai_1.expect)(ss.range()).to.eql(array);\n(0, chai_1.expect)(ss.range(2)).to.eql(array.slice(2));\n(0, chai_1.expect)(ss.range(8)).to.eql(array.slice(8));\n(0, chai_1.expect)(ss.range(0, 2)).to.eql(array.slice(0, 3));\n(0, chai_1.expect)(ss.range(-1)).to.eql([\&quot;fourth\&quot;]);\n(0, chai_1.expect)(ss.range(-4)).to.eql(array);\n(0, chai_1.expect)(ss.range(-4, -2)).to.eql(array.slice(0, 3));\n(0, chai_1.expect)(ss.range(-4, ss.length + 1000)).\n    to.eql(array.slice(-4, ss.length + 1000));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b1e0167-317d-422c-a06b-4b9cc9036b68&quot;,&quot;parentUUID&quot;:&quot;2c93f749-1190-42c7-8ad5-0e741b73cff6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support withScores&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #range should support withScores&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;first\&quot;, 1);\nss.add(\&quot;second\&quot;, 2);\n(0, chai_1.expect)(ss.range(0, 0, { \&quot;withScores\&quot;: true })).\n    to.eql([\n    [\n        \&quot;first\&quot;,\n        1\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c37f8f9a-1c05-4ac3-8798-a73484f4fff3&quot;,&quot;parentUUID&quot;:&quot;2c93f749-1190-42c7-8ad5-0e741b73cff6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b1e0167-317d-422c-a06b-4b9cc9036b68&quot;,&quot;c37f8f9a-1c05-4ac3-8798-a73484f4fff3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;949d5e86-79bd-49d6-bf36-ad219eaf27d1&quot;,&quot;title&quot;:&quot;#intersect&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should intersect two sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect two sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const a = new sorted_set_1.SortedSet(), b = new sorted_set_1.SortedSet();\na.add(\&quot;5a600e10\&quot;, 16);\na.add(\&quot;5a600e12\&quot;, 10);\na.add(\&quot;5a600e14\&quot;, 9);\na.add(\&quot;5a600e15\&quot;, 14);\na.add(\&quot;5a600e17\&quot;, 20);\na.add(\&quot;5a600e18\&quot;, 13);\na.add(\&quot;5a600e19\&quot;, 15);\na.add(\&quot;5a600e1a\&quot;, 19);\na.add(\&quot;5a600e1b\&quot;, 7);\na.add(\&quot;5a600e1c\&quot;, 13);\na.add(\&quot;5a600e1e\&quot;, 10);\nb.add(\&quot;5a600e10\&quot;, 0);\nb.add(\&quot;5a600e11\&quot;, 15);\nb.add(\&quot;5a600e13\&quot;, 5);\nb.add(\&quot;5a600e14\&quot;, 3);\nb.add(\&quot;5a600e15\&quot;, 14);\nb.add(\&quot;5a600e17\&quot;, 12);\nb.add(\&quot;5a600e19\&quot;, 12);\nb.add(\&quot;5a600e1b\&quot;, 16);\nb.add(\&quot;5a600e1c\&quot;, 12);\nb.add(\&quot;5a600e1d\&quot;, 17);\nb.add(\&quot;5a600e1f\&quot;, 3);\n(0, chai_1.expect)(sorted_set_1.SortedSet.intersect(a, b)).to.eql([\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e19\&quot;,\n    \&quot;5a600e1c\&quot;,\n    \&quot;5a600e15\&quot;,\n    \&quot;5a600e1b\&quot;\n]);\n(0, chai_1.expect)(sorted_set_1.SortedSet.intersect(b, a)).to.eql([\n    \&quot;5a600e1b\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e1c\&quot;,\n    \&quot;5a600e15\&quot;,\n    \&quot;5a600e19\&quot;,\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e17\&quot;\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec200f6e-bfdc-4ad0-a515-17ffacfb38bd&quot;,&quot;parentUUID&quot;:&quot;949d5e86-79bd-49d6-bf36-ad219eaf27d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect three sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect three sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const a = new sorted_set_1.SortedSet(), b = new sorted_set_1.SortedSet(), c = new sorted_set_1.SortedSet();\na.add(\&quot;5a600e10\&quot;, 16);\na.add(\&quot;5a600e12\&quot;, 10);\na.add(\&quot;5a600e14\&quot;, 9);\na.add(\&quot;5a600e15\&quot;, 14);\na.add(\&quot;5a600e17\&quot;, 20);\na.add(\&quot;5a600e18\&quot;, 13);\na.add(\&quot;5a600e19\&quot;, 15);\na.add(\&quot;5a600e1a\&quot;, 19);\na.add(\&quot;5a600e1b\&quot;, 7);\na.add(\&quot;5a600e1c\&quot;, 13);\na.add(\&quot;5a600e1e\&quot;, 10);\nb.add(\&quot;5a600e10\&quot;, 0);\nb.add(\&quot;5a600e11\&quot;, 15);\nb.add(\&quot;5a600e13\&quot;, 5);\nb.add(\&quot;5a600e14\&quot;, 3);\nb.add(\&quot;5a600e15\&quot;, 14);\nb.add(\&quot;5a600e17\&quot;, 12);\nb.add(\&quot;5a600e19\&quot;, 12);\nb.add(\&quot;5a600e1b\&quot;, 16);\nb.add(\&quot;5a600e1c\&quot;, 12);\nb.add(\&quot;5a600e1d\&quot;, 17);\nb.add(\&quot;5a600e1f\&quot;, 3);\nc.add(\&quot;5a600e10\&quot;, 7);\nc.add(\&quot;5a600e12\&quot;, 20);\nc.add(\&quot;5a600e13\&quot;, 9);\nc.add(\&quot;5a600e14\&quot;, 19);\nc.add(\&quot;5a600e16\&quot;, 19);\nc.add(\&quot;5a600e17\&quot;, 1);\nc.add(\&quot;5a600e18\&quot;, 18);\nc.add(\&quot;5a600e1a\&quot;, 6);\nc.add(\&quot;5a600e1c\&quot;, 15);\nc.add(\&quot;5a600e1f\&quot;, 4);\n(0, chai_1.expect)(sorted_set_1.SortedSet.intersect(c, a, b)).to.eql([\n    \&quot;5a600e10\&quot;,\n    \&quot;5a600e14\&quot;,\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e1c\&quot;\n]);\n// Expect(SortedSet.intersect(c, a, b)).to.eql(c.intersect(a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aad28a4b-df4b-4e6e-9777-c2e5895d8b26&quot;,&quot;parentUUID&quot;:&quot;949d5e86-79bd-49d6-bf36-ad219eaf27d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect four sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect four sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const a = new sorted_set_1.SortedSet(), b = new sorted_set_1.SortedSet(), c = new sorted_set_1.SortedSet(), d = new sorted_set_1.SortedSet();\na.add(\&quot;5a600e10\&quot;, 16);\na.add(\&quot;5a600e12\&quot;, 10);\na.add(\&quot;5a600e14\&quot;, 9);\na.add(\&quot;5a600e15\&quot;, 14);\na.add(\&quot;5a600e17\&quot;, 20);\na.add(\&quot;5a600e18\&quot;, 13);\na.add(\&quot;5a600e19\&quot;, 15);\na.add(\&quot;5a600e1a\&quot;, 19);\na.add(\&quot;5a600e1b\&quot;, 7);\na.add(\&quot;5a600e1c\&quot;, 13);\na.add(\&quot;5a600e1e\&quot;, 10);\nb.add(\&quot;5a600e10\&quot;, 0);\nb.add(\&quot;5a600e11\&quot;, 15);\nb.add(\&quot;5a600e13\&quot;, 5);\nb.add(\&quot;5a600e14\&quot;, 3);\nb.add(\&quot;5a600e15\&quot;, 14);\nb.add(\&quot;5a600e17\&quot;, 12);\nb.add(\&quot;5a600e19\&quot;, 12);\nb.add(\&quot;5a600e1b\&quot;, 16);\nb.add(\&quot;5a600e1c\&quot;, 12);\nb.add(\&quot;5a600e1d\&quot;, 17);\nb.add(\&quot;5a600e1f\&quot;, 3);\nc.add(\&quot;5a600e10\&quot;, 7);\nc.add(\&quot;5a600e12\&quot;, 20);\nc.add(\&quot;5a600e13\&quot;, 9);\nc.add(\&quot;5a600e14\&quot;, 19);\nc.add(\&quot;5a600e16\&quot;, 19);\nc.add(\&quot;5a600e17\&quot;, 1);\nc.add(\&quot;5a600e18\&quot;, 18);\nc.add(\&quot;5a600e1a\&quot;, 6);\nc.add(\&quot;5a600e1c\&quot;, 15);\nc.add(\&quot;5a600e1f\&quot;, 4);\nd.add(\&quot;5a600e1c\&quot;, 400);\nd.add(\&quot;5a600e17\&quot;, 500);\nd.add(\&quot;5a600e1f\&quot;, 600);\nd.add(\&quot;5a600e20\&quot;, 700);\n(0, chai_1.expect)(sorted_set_1.SortedSet.intersect(d, c, a, b)).to.eql([\n    \&quot;5a600e17\&quot;,\n    \&quot;5a600e1c\&quot;\n]);\n// Expect(SortedSet.intersect(d, c, a, b)).to.eql(d.intersect(c, a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccffd287-4bf3-4d61-88af-b4ca4224e27d&quot;,&quot;parentUUID&quot;:&quot;949d5e86-79bd-49d6-bf36-ad219eaf27d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec200f6e-bfdc-4ad0-a515-17ffacfb38bd&quot;,&quot;aad28a4b-df4b-4e6e-9777-c2e5895d8b26&quot;,&quot;ccffd287-4bf3-4d61-88af-b4ca4224e27d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;294ff41e-2846-4a6b-acfe-e6a22383812e&quot;,&quot;title&quot;:&quot;#rank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the correct rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rank should get the correct rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.rank(\&quot;5a600e12\&quot;)).to.equal(7);\n(0, chai_1.expect)(ss.rank(\&quot;5a600e13\&quot;)).to.equal(3);\n(0, chai_1.expect)(ss.rank(\&quot;5a600e16\&quot;)).to.equal(0);\n(0, chai_1.expect)(ss.rank(\&quot;5a600e15\&quot;)).to.equal(8);\n(0, chai_1.expect)(ss.rank(\&quot;not in set\&quot;)).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66d74415-1a5c-45b2-8f21-b5794a09e9b7&quot;,&quot;parentUUID&quot;:&quot;294ff41e-2846-4a6b-acfe-e6a22383812e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66d74415-1a5c-45b2-8f21-b5794a09e9b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;efd1039f-6f09-44ed-be7d-da017ca3cb10&quot;,&quot;title&quot;:&quot;#rem&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete special elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rem should delete special elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e15\&quot;)).to.equal(19);\n(0, chai_1.expect)(ss).to.have.length(8);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e16\&quot;)).to.equal(3);\n(0, chai_1.expect)(ss).to.have.length(7);\n(0, chai_1.expect)(ss.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e11\&quot;,\n        6\n    ],\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ],\n    [\n        \&quot;5a600e13\&quot;,\n        11\n    ],\n    [\n        \&quot;5a600e17\&quot;,\n        12\n    ],\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;026ec261-ff4b-4df3-bdbd-aab92a18af07&quot;,&quot;parentUUID&quot;:&quot;efd1039f-6f09-44ed-be7d-da017ca3cb10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete many elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rem should delete many elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e11\&quot;)).to.equal(6);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e13\&quot;)).to.equal(11);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e14\&quot;)).to.equal(14);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e15\&quot;)).to.equal(19);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e16\&quot;)).to.equal(3);\n(0, chai_1.expect)(ss.rem(\&quot;5a600e17\&quot;)).to.equal(12);\n(0, chai_1.expect)(ss.length).to.equal(3);\n(0, chai_1.expect)(ss.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ced16ae8-b433-4133-a4c2-f8da60add367&quot;,&quot;parentUUID&quot;:&quot;efd1039f-6f09-44ed-be7d-da017ca3cb10&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;026ec261-ff4b-4df3-bdbd-aab92a18af07&quot;,&quot;ced16ae8-b433-4133-a4c2-f8da60add367&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5d622a37-33bb-4d71-8eb6-826f757e85ff&quot;,&quot;title&quot;:&quot;#remRangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a range of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByScore should strip out a range of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.remRangeByScore(4, 14)).to.equal(5);\n(0, chai_1.expect)(ss).to.have.length(4);\n(0, chai_1.expect)(ss.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c3bcffb-06b5-4bb3-81f9-7d4f72d8e21d&quot;,&quot;parentUUID&quot;:&quot;5d622a37-33bb-4d71-8eb6-826f757e85ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all the elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByScore should strip out all the elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.remRangeByScore(3, 19)).to.equal(9);\n(0, chai_1.expect)(ss).to.have.length(0);\n(0, chai_1.expect)(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;579a79df-22f0-4c2b-a98a-079cbdcc77d7&quot;,&quot;parentUUID&quot;:&quot;5d622a37-33bb-4d71-8eb6-826f757e85ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c3bcffb-06b5-4bb3-81f9-7d4f72d8e21d&quot;,&quot;579a79df-22f0-4c2b-a98a-079cbdcc77d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db8f5dfc-b841-4ed4-a15e-819fb08c81cd&quot;,&quot;title&quot;:&quot;#remRangeByRank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a slice of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByRank should strip out a slice of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.remRangeByRank(1, 6)).to.equal(5);\n(0, chai_1.expect)(ss).to.have.length(4);\n(0, chai_1.expect)(ss.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f67c3ce9-316a-4ddc-84d4-0a429e8e33f1&quot;,&quot;parentUUID&quot;:&quot;db8f5dfc-b841-4ed4-a15e-819fb08c81cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByRank should strip out all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(ss.remRangeByRank(0, 9)).to.equal(9);\n(0, chai_1.expect)(ss).to.have.length(0);\n(0, chai_1.expect)(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a74feaa-036e-4d6c-b180-24c7cc1afad2&quot;,&quot;parentUUID&quot;:&quot;db8f5dfc-b841-4ed4-a15e-819fb08c81cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f67c3ce9-316a-4ddc-84d4-0a429e8e33f1&quot;,&quot;1a74feaa-036e-4d6c-b180-24c7cc1afad2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d46963b9-b5aa-4f12-be1b-1bd0e948a39d&quot;,&quot;title&quot;:&quot;#values&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the values&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #values should return the values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet();\nss.add(\&quot;first\&quot;, -1);\nss.add(\&quot;third\&quot;, 5);\nss.add(\&quot;second\&quot;, 3);\n(0, chai_1.expect)(ss.values()).to.eql([\n    -1,\n    3,\n    5\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb5e7da8-565e-4c59-8626-78be7ebaece4&quot;,&quot;parentUUID&quot;:&quot;d46963b9-b5aa-4f12-be1b-1bd0e948a39d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb5e7da8-565e-4c59-8626-78be7ebaece4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dcab0db4-fd41-4ffa-bcbd-45fac482834a&quot;,&quot;title&quot;:&quot;unique rewrite&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should ensure values are unique&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite unique rewrite should ensure values are unique&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = { \&quot;unique\&quot;: true }, ss = new sorted_set_1.SortedSet(options);\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(() =&gt; {\n    ss.add(\&quot;5a600e19\&quot;, 11);\n}).to.throw(/unique/);\n// Quick exit test\n(0, chai_1.expect)(() =&gt; {\n    ss.add(\&quot;5a600dff\&quot;, ss._head.next[ss._level - 1].next.value);\n}).to.throw(/unique/);\n// This test ensures the key &lt; key check doesn&#x27;t come into play\n(0, chai_1.expect)(() =&gt; {\n    ss.add(\&quot;5a600dff\&quot;, 11);\n}).to.throw(/unique/);\n(0, chai_1.expect)(() =&gt; {\n    ss.add(\&quot;5a600e18\&quot;, 10);\n}).to.not.throw();\n(0, chai_1.expect)(ss).to.have.length(9);\n(0, chai_1.expect)(ss.toArray({ \&quot;withScores\&quot;: true })).to.eql([\n    [\n        \&quot;5a600e16\&quot;,\n        3\n    ],\n    [\n        \&quot;5a600e11\&quot;,\n        6\n    ],\n    [\n        \&quot;5a600e18\&quot;,\n        10\n    ],\n    [\n        \&quot;5a600e13\&quot;,\n        11\n    ],\n    [\n        \&quot;5a600e17\&quot;,\n        12\n    ],\n    [\n        \&quot;5a600e14\&quot;,\n        14\n    ],\n    [\n        \&quot;5a600e10\&quot;,\n        16\n    ],\n    [\n        \&quot;5a600e12\&quot;,\n        17\n    ],\n    [\n        \&quot;5a600e15\&quot;,\n        19\n    ]\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e47dcfd3-7e06-4085-9107-103c87e89128&quot;,&quot;parentUUID&quot;:&quot;dcab0db4-fd41-4ffa-bcbd-45fac482834a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert keys if constraint broken during update&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite unique rewrite should revert keys if constraint broken during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const ss = new sorted_set_1.SortedSet({ \&quot;unique\&quot;: true });\nss.add(\&quot;5a600e10\&quot;, 16);\nss.add(\&quot;5a600e11\&quot;, 6);\nss.add(\&quot;5a600e12\&quot;, 17);\nss.add(\&quot;5a600e13\&quot;, 11);\nss.add(\&quot;5a600e14\&quot;, 14);\nss.add(\&quot;5a600e15\&quot;, 19);\nss.add(\&quot;5a600e16\&quot;, 3);\nss.add(\&quot;5a600e17\&quot;, 12);\nss.add(\&quot;5a600e18\&quot;, 10);\n(0, chai_1.expect)(() =&gt; {\n    ss.add(\&quot;5a600e13\&quot;, 14);\n}).to.throw(/unique/);\n(0, chai_1.expect)(ss).to.have.length(9);\n(0, chai_1.expect)(ss.score(\&quot;5a600e13\&quot;)).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79eca4be-c195-4bcf-8c65-f290a644a564&quot;,&quot;parentUUID&quot;:&quot;dcab0db4-fd41-4ffa-bcbd-45fac482834a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e47dcfd3-7e06-4085-9107-103c87e89128&quot;,&quot;79eca4be-c195-4bcf-8c65-f290a644a564&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;a9c18d0d-4cf5-425e-b448-81c424471f8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;d5ea1249-5499-44b5-9084-8699dd00de37&quot;,&quot;37847d96-a91c-4a64-8c4d-28c56c8da18d&quot;,&quot;d9fbdc1e-d2ef-4207-8592-9e3c71453109&quot;,&quot;6ddbaf68-6f7b-474f-ad8c-50d8be8a0a83&quot;,&quot;c85f45a1-8a4d-42f9-b03f-fbd75575b9b4&quot;,&quot;c64998c5-df89-456a-89b2-c8c6d2d0f7af&quot;,&quot;cec49767-6b04-4d83-94df-68a31c76c7d8&quot;,&quot;c0c917f6-f833-43e2-9a36-419dc9bfc50d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;a2893711-f5f6-40ca-a44d-71c07121b53b&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;title&quot;:&quot;lua-bit test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/lua/lua-bit.test.ts&quot;,&quot;file&quot;:&quot;/test/lua/lua-bit.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;before all\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(\&quot;ready\&quot;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield (0, common_test_1.sendCommand)(client, [\&quot;flushall\&quot;]);\n    yield (0, common_test_1.sendCommand)(client, [\n        \&quot;select\&quot;,\n        \&quot;0\&quot;\n    ]);\n    yield (0, common_test_1.sendCommand)(client, [\n        \&quot;script\&quot;,\n        \&quot;flush\&quot;\n    ]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9142fcb1-c186-41cc-a1d4-72043cfbf720&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;before each\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbe59d75-9a54-48d3-a252-1eac5503dac7&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;after all\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;467acaab-44eb-4120-acda-3d857a6749e9&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;fullTitle&quot;:&quot;lua-bit test \&quot;after each\&quot; hook in \&quot;lua-bit test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21af2159-2816-4c61-af51-1b579268a59e&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should leverage the LUA bit library for bit AND op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit AND op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;local val = bit.band(5, 1) return val \&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;016aea54-1a9a-47da-8328-1f91008c43af&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit OR op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit OR op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;local val = bit.bor(5, 1) return val \&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(5);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6813d3f0-c952-491f-b7cc-107a701db3b1&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit XOR op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit XOR op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;local val = bit.bxor(5, 1) return val \&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(4);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a70119a6-8944-4d76-98eb-17e116ab9560&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit NOT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit NOT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;local val = bit.bnot(5) return val \&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(-6);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7f7f4dc-6d5b-470c-87ee-568a57af3ade&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit LSHIFT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit LSHIFT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;local val = bit.lshift(5, 1) return val \&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(10);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;843fc033-33b3-4580-8843-7db69d213dd4&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit RSHIFT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit RSHIFT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield (0, common_test_1.sendCommand)(new net.Socket(), [\n            \&quot;info\&quot;,\n            \&quot;server\&quot;\n        ]);\n        // Only run this test if this is unit-redis-ness\n        if (!(/redis_version:5/gim).test(response)) {\n            response = yield (0, common_test_1.sendCommand)(client, [\n                \&quot;eval\&quot;,\n                \&quot;local val = bit.rshift(-5, 1) return val \&quot;,\n                \&quot;0\&quot;\n            ]);\n            (0, chai_1.expect)(response).to.equal(-3);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e63f9c6a-b717-4789-8e5a-1405bfcec225&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should leverage the LUA bit library for bit ARSHIFT op&quot;,&quot;fullTitle&quot;:&quot;lua-bit test should leverage the LUA bit library for bit ARSHIFT op&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield (0, common_test_1.sendCommand)(client, [\n            \&quot;eval\&quot;,\n            \&quot;local val = bit.arshift(5, 1) return val \&quot;,\n            \&quot;0\&quot;\n        ]);\n        (0, chai_1.expect)(response).to.equal(2);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c2c9970-40b9-4cc4-a90f-7da0fce8ea71&quot;,&quot;parentUUID&quot;:&quot;001ea17f-3326-4aab-a873-37d6d78c8136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;016aea54-1a9a-47da-8328-1f91008c43af&quot;,&quot;6813d3f0-c952-491f-b7cc-107a701db3b1&quot;,&quot;a70119a6-8944-4d76-98eb-17e116ab9560&quot;,&quot;e7f7f4dc-6d5b-470c-87ee-568a57af3ade&quot;,&quot;843fc033-33b3-4580-8843-7db69d213dd4&quot;,&quot;e63f9c6a-b717-4789-8e5a-1405bfcec225&quot;,&quot;7c2c9970-40b9-4cc4-a90f-7da0fce8ea71&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:43,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a52f6b05-97dd-4043-9694-ae5e1d56b381&quot;,&quot;title&quot;:&quot;dictionary test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/dictionary.test.ts&quot;,&quot;file&quot;:&quot;/test/dictionary.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;dictionary test\&quot;&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;before each\&quot; hook in \&quot;dictionary test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dictionary = new dictionary_1.Dictionary();\nsinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f7f3387-a23f-435d-8eff-885ccb37f5b2&quot;,&quot;parentUUID&quot;:&quot;a52f6b05-97dd-4043-9694-ae5e1d56b381&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;dictionary test\&quot;&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;after all\&quot; hook in \&quot;dictionary test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e0d4e70-2c01-4242-a8e1-6f60200c84a3&quot;,&quot;parentUUID&quot;:&quot;a52f6b05-97dd-4043-9694-ae5e1d56b381&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;dictionary test\&quot;&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;after each\&quot; hook in \&quot;dictionary test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53c7ebca-7b5d-4179-8722-3353604f97f5&quot;,&quot;parentUUID&quot;:&quot;a52f6b05-97dd-4043-9694-ae5e1d56b381&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should construct&quot;,&quot;fullTitle&quot;:&quot;dictionary test should construct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        (0, chai_1.expect)(dictionary.constructor.name).to.equal(\&quot;Dictionary\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff75112f-105d-4386-9674-20db911023d8&quot;,&quot;parentUUID&quot;:&quot;a52f6b05-97dd-4043-9694-ae5e1d56b381&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement basic put/get/remove/size/clear/contains/exists/keys/values functionality&quot;,&quot;fullTitle&quot;:&quot;dictionary test should implement basic put/get/remove/size/clear/contains/exists/keys/values functionality&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dictionary.put(\&quot;item\&quot;, \&quot;one\&quot;);\n(0, chai_1.expect)(dictionary.exists(\&quot;item\&quot;)).to.equal(true);\n(0, chai_1.expect)(dictionary.exists(\&quot;one\&quot;)).to.equal(false);\n(0, chai_1.expect)(dictionary.get(\&quot;item\&quot;)).to.equal(\&quot;one\&quot;);\n(0, chai_1.expect)(dictionary.size()).to.equal(1);\n(0, chai_1.expect)(dictionary.contains(\&quot;one\&quot;)).to.equal(true);\n(0, chai_1.expect)(dictionary.keys().length).to.equal(1);\n(0, chai_1.expect)(dictionary.values().length).to.equal(1);\ndictionary.put(\&quot;item\&quot;, \&quot;two\&quot;);\n(0, chai_1.expect)(dictionary.get(\&quot;item\&quot;)).to.equal(\&quot;two\&quot;);\ndictionary.put(\&quot;one\&quot;, { \&quot;embedded\&quot;: true });\ndictionary.remove(\&quot;three\&quot;);\n(0, chai_1.expect)(dictionary.size()).to.equal(2);\nlet foundTwo = false;\nfor (const each of dictionary) {\n    if (!foundTwo) {\n        (0, chai_1.expect)(each).to.equal(\&quot;two\&quot;);\n        foundTwo = true;\n    }\n    else {\n        (0, chai_1.expect)(each).to.eql({ \&quot;embedded\&quot;: true });\n    }\n}\ndictionary.remove(\&quot;item\&quot;);\n(0, chai_1.expect)(dictionary.size()).to.equal(1);\ndictionary.clear();\n(0, chai_1.expect)(dictionary.size()).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7b879cc-01a7-4f3d-8ef5-311242131380&quot;,&quot;parentUUID&quot;:&quot;a52f6b05-97dd-4043-9694-ae5e1d56b381&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff75112f-105d-4386-9674-20db911023d8&quot;,&quot;a7b879cc-01a7-4f3d-8ef5-311242131380&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2416c9d1-4dc2-4287-a473-da1ec9c19328&quot;,&quot;title&quot;:&quot;logger test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/logger.test.ts&quot;,&quot;file&quot;:&quot;/test/logger.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;logger test\&quot;&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;before each\&quot; hook in \&quot;logger test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af11f12b-bc20-4439-8d91-1ddfb28429ce&quot;,&quot;parentUUID&quot;:&quot;2416c9d1-4dc2-4287-a473-da1ec9c19328&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;logger test\&quot;&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;after all\&quot; hook in \&quot;logger test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f667df94-3f23-4409-88da-24bca8d6e805&quot;,&quot;parentUUID&quot;:&quot;2416c9d1-4dc2-4287-a473-da1ec9c19328&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;logger test\&quot;&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;after each\&quot; hook in \&quot;logger test\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04a7414a-21ae-4a63-9f5a-1e32f809b484&quot;,&quot;parentUUID&quot;:&quot;2416c9d1-4dc2-4287-a473-da1ec9c19328&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should construct&quot;,&quot;fullTitle&quot;:&quot;logger test should construct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        logger = new logger_1.Logger(module.id);\n        (0, chai_1.expect)(logger.constructor.name).to.equal(\&quot;Logger\&quot;);\n        logger.info(\&quot;This is an info message\&quot;);\n        logger.warn(\&quot;This is a warning message\&quot;);\n        logger.debug(\&quot;This is an invisible debug message\&quot;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad8bc9a4-6ef3-4492-b4e5-0faa4b11031b&quot;,&quot;parentUUID&quot;:&quot;2416c9d1-4dc2-4287-a473-da1ec9c19328&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not construct when initialized with an empty string&quot;,&quot;fullTitle&quot;:&quot;logger test should not construct when initialized with an empty string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, chai_1.expect)(() =&gt; {\n    logger = new logger_1.Logger(\&quot;\&quot;);\n}).to.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e96eeb32-7041-45ce-850c-77527e827dc5&quot;,&quot;parentUUID&quot;:&quot;2416c9d1-4dc2-4287-a473-da1ec9c19328&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad8bc9a4-6ef3-4492-b4e5-0faa4b11031b&quot;,&quot;e96eeb32-7041-45ce-850c-77527e827dc5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;docs/mochawesome&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;docs/mochawesome&quot;,&quot;reportTitle&quot;:&quot;redis&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;docs/mochawesome/assets&quot;,&quot;jsonFile&quot;:&quot;/home/lane/git/redis/docs/mochawesome/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/lane/git/redis/docs/mochawesome/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>