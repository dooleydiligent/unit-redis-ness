<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:89,&quot;tests&quot;:287,&quot;passes&quot;:286,&quot;pending&quot;:1,&quot;failures&quot;:0,&quot;start&quot;:&quot;2020-01-16T02:00:40.329Z&quot;,&quot;end&quot;:&quot;2020-01-16T02:00:51.121Z&quot;,&quot;duration&quot;:10792,&quot;testsRegistered&quot;:287,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0.34843205574912894,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;82634815-1823-4907-957f-5ed6c5346e35&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;done();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c94693e-66ed-4dc1-a2ab-a98ce3c9f804&quot;,&quot;parentUUID&quot;:&quot;82634815-1823-4907-957f-5ed6c5346e35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5be4aabf-01d1-456a-99fa-4e47ae5dca26&quot;,&quot;parentUUID&quot;:&quot;82634815-1823-4907-957f-5ed6c5346e35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4370ce05-771b-4954-9025-0cdc103c2657&quot;,&quot;title&quot;:&quot;dictionary test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/dictionary.test.ts&quot;,&quot;file&quot;:&quot;/test/dictionary.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dictionary = new dictionary_1.Dictionary();\nsinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6427aa14-cb52-46a2-aeca-faba74595fc1&quot;,&quot;parentUUID&quot;:&quot;4370ce05-771b-4954-9025-0cdc103c2657&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da8343e6-8f72-472a-8ab7-2ec53acafd9b&quot;,&quot;parentUUID&quot;:&quot;4370ce05-771b-4954-9025-0cdc103c2657&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;dictionary test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d662e41-d1d5-4384-9605-5d1e9055604e&quot;,&quot;parentUUID&quot;:&quot;4370ce05-771b-4954-9025-0cdc103c2657&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should construct&quot;,&quot;fullTitle&quot;:&quot;dictionary test should construct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        chai_1.expect(dictionary.constructor.name).to.equal(&#x27;Dictionary&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59b4e8e6-ff8f-4f81-8aa6-b0fbd83f3200&quot;,&quot;parentUUID&quot;:&quot;4370ce05-771b-4954-9025-0cdc103c2657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement basic put/get/remove/size/clear/contains/exists/keys/values functionality&quot;,&quot;fullTitle&quot;:&quot;dictionary test should implement basic put/get/remove/size/clear/contains/exists/keys/values functionality&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;dictionary.put(&#x27;item&#x27;, &#x27;one&#x27;);\nchai_1.expect(dictionary.exists(&#x27;item&#x27;)).to.equal(true);\nchai_1.expect(dictionary.exists(&#x27;one&#x27;)).to.equal(false);\nchai_1.expect(dictionary.get(&#x27;item&#x27;)).to.equal(&#x27;one&#x27;);\nchai_1.expect(dictionary.size()).to.equal(1);\nchai_1.expect(dictionary.contains(&#x27;one&#x27;)).to.equal(true);\nchai_1.expect(dictionary.keys().length).to.equal(1);\nchai_1.expect(dictionary.values().length).to.equal(1);\ndictionary.put(&#x27;item&#x27;, &#x27;two&#x27;);\nchai_1.expect(dictionary.get(&#x27;item&#x27;)).to.equal(&#x27;two&#x27;);\ndictionary.put(&#x27;one&#x27;, { embedded: true });\ndictionary.remove(&#x27;three&#x27;);\nchai_1.expect(dictionary.size()).to.equal(2);\nlet foundTwo = false;\nfor (const each of dictionary) {\n    if (!foundTwo) {\n        chai_1.expect(each).to.equal(&#x27;two&#x27;);\n        foundTwo = true;\n    }\n    else {\n        chai_1.expect(each).to.eql({ embedded: true });\n    }\n}\ndictionary.remove(&#x27;item&#x27;);\nchai_1.expect(dictionary.size()).to.equal(1);\ndictionary.clear();\nchai_1.expect(dictionary.size()).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;373899e3-79d4-447e-9768-2e3e88247394&quot;,&quot;parentUUID&quot;:&quot;4370ce05-771b-4954-9025-0cdc103c2657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59b4e8e6-ff8f-4f81-8aa6-b0fbd83f3200&quot;,&quot;373899e3-79d4-447e-9768-2e3e88247394&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;174dde86-fb3d-463c-a520-adaf6584bd00&quot;,&quot;title&quot;:&quot;logger test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/logger.test.ts&quot;,&quot;file&quot;:&quot;/test/logger.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16b02dfc-8cc0-4805-907e-fb95de8cadf4&quot;,&quot;parentUUID&quot;:&quot;174dde86-fb3d-463c-a520-adaf6584bd00&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b821252-65d8-4c3f-b721-1baaaad6592d&quot;,&quot;parentUUID&quot;:&quot;174dde86-fb3d-463c-a520-adaf6584bd00&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;logger test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d69160fb-9013-44a3-bd2e-16217f3b378c&quot;,&quot;parentUUID&quot;:&quot;174dde86-fb3d-463c-a520-adaf6584bd00&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should construct&quot;,&quot;fullTitle&quot;:&quot;logger test should construct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        logger = new logger_1.Logger(module.id);\n        chai_1.expect(logger.constructor.name).to.equal(&#x27;Logger&#x27;);\n        logger.info(`This is an info message`);\n        logger.warn(&#x27;This is a warning message&#x27;);\n        logger.debug(`This is an invisible debug message`);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74b1dac5-ade3-433f-88ee-a59955f680e7&quot;,&quot;parentUUID&quot;:&quot;174dde86-fb3d-463c-a520-adaf6584bd00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not construct when initialized with an empty string&quot;,&quot;fullTitle&quot;:&quot;logger test should not construct when initialized with an empty string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(() =&gt; {\n    logger = new logger_1.Logger(&#x27;&#x27;);\n}).to.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f51654f3-133e-4b74-806b-b219af0b802b&quot;,&quot;parentUUID&quot;:&quot;174dde86-fb3d-463c-a520-adaf6584bd00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;74b1dac5-ade3-433f-88ee-a59955f680e7&quot;,&quot;f51654f3-133e-4b74-806b-b219af0b802b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;title&quot;:&quot;client command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/client-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/client-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e3a3f13-a39f-4247-9213-bec68e6e675d&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbb2a127-6db8-4f02-b091-71c9d4f7dc2f&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fd655e4-9e87-4426-9f3b-ed02ef3345f7&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;client command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f95e9da-4902-4669-a035-568967b5f053&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow more than 3 parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should not allow more than 3 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, &#x27;four&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR Unknown subcommand or wrong number of arguments for \\&#x27;one\\&#x27;. Try CLIENT HELP&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5233d23b-831e-4fbb-aa40-84349ec78235&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail predictably when an unknown subcommand is passed&quot;,&quot;fullTitle&quot;:&quot;client command test should fail predictably when an unknown subcommand is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;whatever&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;whatever&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5aac22e-1684-4d86-a2b7-1e2d7415ac67&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a NIL name when called with \&quot;GETNAME\&quot; subcommand&quot;,&quot;fullTitle&quot;:&quot;client command test should return a NIL name when called with \&quot;GETNAME\&quot; subcommand&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97739cc9-74b8-41e9-8653-96e5b8bc0610&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail predictably when \&quot;GETNAME\&quot; is called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should fail predictably when \&quot;GETNAME\&quot; is called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;, &#x27;extra&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;getname&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb20fc97-2249-4c85-8638-de92b7706f99&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with \&quot;OK\&quot; when \&quot;setname\&quot; is called with a valid name&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with \&quot;OK\&quot; when \&quot;setname\&quot; is called with a valid name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;setname&#x27;, &#x27;whatever&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;whatever&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37eec02f-a608-46aa-8af2-5365c013c13f&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should persist the value for \&quot;setname\&quot; across tests&quot;,&quot;fullTitle&quot;:&quot;client command test should persist the value for \&quot;setname\&quot; across tests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;getname&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;whatever&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac727244-4353-42cf-b75c-60c64b297659&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;setname\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;setname\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;setname&#x27;, &#x27;test&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;setname&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7839c65-1ed8-42ea-bfcc-820ee1ec7e8f&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow whitespace in \&quot;setname\&quot; subcommand&quot;,&quot;fullTitle&quot;:&quot;client command test should not allow whitespace in \&quot;setname\&quot; subcommand&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;setname&#x27;, &#x27;te\\nst&#x27;]);\n        chai_1.expect(response).to.equal(`ReplyError: ERR Client names cannot contain spaces, newlines or special characters.`);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96916724-161c-4ef2-8561-f557c500ffb8&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the server-assigned client id&quot;,&quot;fullTitle&quot;:&quot;client command test should return the server-assigned client id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;id&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(String(response).length).to.be.greaterThan(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09e4f39e-2b0a-42de-8848-e014752f6b43&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;id\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;id\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;id&#x27;, &#x27;test&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(util.format(DEFAULT_ERROR, &#x27;id&#x27;));\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d9c1f2c-ed59-4cbd-bc66-f52c921bae11&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a bunch of information when client \&quot;list\&quot; subcommand is invoked&quot;,&quot;fullTitle&quot;:&quot;client command test should return a bunch of information when client \&quot;list\&quot; subcommand is invoked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;list&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response.length).to.be.greaterThan(0);\n        chai_1.expect(response).to.match(/ name=whatever /);\n        chai_1.expect(response).to.match(/\\bdb=0\\b/);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b3c5350-3569-4f9c-b653-acfd0c4b3716&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with a predictable message when \&quot;list\&quot; called with too many parameters&quot;,&quot;fullTitle&quot;:&quot;client command test should respond with a predictable message when \&quot;list\&quot; called with too many parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;client&#x27;, &#x27;list&#x27;, &#x27;test&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26373643-3fe2-4e22-ad08-11feb660c9b2&quot;,&quot;parentUUID&quot;:&quot;7e29b4bc-5ce2-4887-b914-5d4228960b89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5233d23b-831e-4fbb-aa40-84349ec78235&quot;,&quot;b5aac22e-1684-4d86-a2b7-1e2d7415ac67&quot;,&quot;97739cc9-74b8-41e9-8653-96e5b8bc0610&quot;,&quot;bb20fc97-2249-4c85-8638-de92b7706f99&quot;,&quot;37eec02f-a608-46aa-8af2-5365c013c13f&quot;,&quot;ac727244-4353-42cf-b75c-60c64b297659&quot;,&quot;e7839c65-1ed8-42ea-bfcc-820ee1ec7e8f&quot;,&quot;96916724-161c-4ef2-8561-f557c500ffb8&quot;,&quot;09e4f39e-2b0a-42de-8848-e014752f6b43&quot;,&quot;2d9c1f2c-ed59-4cbd-bc66-f52c921bae11&quot;,&quot;8b3c5350-3569-4f9c-b653-acfd0c4b3716&quot;,&quot;26373643-3fe2-4e22-ad08-11feb660c9b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e88f3a6b-3f48-440c-9df2-b452289ab646&quot;,&quot;title&quot;:&quot;flushall-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/db/flushall-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/db/flushall-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09c7e8e7-be6b-4b36-a875-2ae727d2e958&quot;,&quot;parentUUID&quot;:&quot;e88f3a6b-3f48-440c-9df2-b452289ab646&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4f88b36-ccbd-4b4a-9f2b-775280202c27&quot;,&quot;parentUUID&quot;:&quot;e88f3a6b-3f48-440c-9df2-b452289ab646&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa4a82ed-f3c6-4728-b92c-ed75add368a0&quot;,&quot;parentUUID&quot;:&quot;e88f3a6b-3f48-440c-9df2-b452289ab646&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushall-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c59f72f1-331b-41ad-a25f-39b22d4fcb8b&quot;,&quot;parentUUID&quot;:&quot;e88f3a6b-3f48-440c-9df2-b452289ab646&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all keys from all databases&quot;,&quot;fullTitle&quot;:&quot;flushall-command test should remove all keys from all databases&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let db = 0; db &lt; 16; db++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;dbid&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            console.log(`DB: ${db}: dbsize: ${response}`);\n            chai_1.expect(response).to.equal(1);\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        for (let db = 0; db &lt; 16; db++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f915e7a9-6809-4cdf-ae6b-bcedca38eca0&quot;,&quot;parentUUID&quot;:&quot;e88f3a6b-3f48-440c-9df2-b452289ab646&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f915e7a9-6809-4cdf-ae6b-bcedca38eca0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:87,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;1c5ef99f-cbb9-41f9-859d-d3cdbb04d11f&quot;,&quot;title&quot;:&quot;flushdb-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/db/flushdb-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/db/flushdb-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cd50fbf-4fc9-40e9-96ca-b9a4ad5865fd&quot;,&quot;parentUUID&quot;:&quot;1c5ef99f-cbb9-41f9-859d-d3cdbb04d11f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c883996-8d41-4ce4-8570-f768c7cec6c5&quot;,&quot;parentUUID&quot;:&quot;1c5ef99f-cbb9-41f9-859d-d3cdbb04d11f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bedc3165-3e6a-4600-94d0-fe4032943584&quot;,&quot;parentUUID&quot;:&quot;1c5ef99f-cbb9-41f9-859d-d3cdbb04d11f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39230390-36e5-41b3-8e8f-c8a59a3e82ac&quot;,&quot;parentUUID&quot;:&quot;1c5ef99f-cbb9-41f9-859d-d3cdbb04d11f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all keys from only the currently selected databases&quot;,&quot;fullTitle&quot;:&quot;flushdb-command test should remove all keys from only the currently selected databases&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:95,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let db = 0; db &lt; 16; db++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;dbid&#x27;, `${db}`]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.equal(1);\n        }\n        for (let db = 0; db &lt; 16; db++) {\n            if (db !== 14) {\n                response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, `${db}`]);\n                chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n                response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n                chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n                response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dbid&#x27;]);\n                chai_1.expect(response).to.equal(0);\n                response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n                chai_1.expect(response).to.equal(0);\n            }\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;14&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;dbid&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;14&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e0dd3de-a37a-42b5-b01f-afbf336dc87f&quot;,&quot;parentUUID&quot;:&quot;1c5ef99f-cbb9-41f9-859d-d3cdbb04d11f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e0dd3de-a37a-42b5-b01f-afbf336dc87f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:95,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;title&quot;:&quot;hget command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/hash/hget-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/hash/hget-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6590b09-7b6b-46c3-9bf9-e28112d05e66&quot;,&quot;parentUUID&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9d2a91b-c19a-404d-85d5-be3526e92f91&quot;,&quot;parentUUID&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f79f035d-16c6-4324-beed-a7062e2b0e29&quot;,&quot;parentUUID&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hget command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a978ba4f-e454-4e9a-9c50-85527d96e079&quot;,&quot;parentUUID&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require exactly 2 parameters&quot;,&quot;fullTitle&quot;:&quot;hget command test should require exactly 2 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;])\n    .then((response1) =&gt; {\n    chai_1.expect(response1).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;hget\\&#x27; command&#x27;);\n    common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;])\n        .then((response2) =&gt; {\n        chai_1.expect(response2).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;hget\\&#x27; command&#x27;);\n        common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;one&#x27;])\n            .then((response3) =&gt; {\n            chai_1.expect(response3).to.equal(null);\n            done();\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e70a150b-8ac5-4471-acb3-b624a6077ad8&quot;,&quot;parentUUID&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a value after it has be set&quot;,&quot;fullTitle&quot;:&quot;hget command test should get a value after it has be set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;])\n    .then(() =&gt; {\n    common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;one&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(&#x27;two&#x27;);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;279f37b3-0c7f-4074-b8ea-68c726750129&quot;,&quot;parentUUID&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nil string when the key exists but the field does not&quot;,&quot;fullTitle&quot;:&quot;hget command test should return nil string when the key exists but the field does not&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, &#x27;test&#x27;, &#x27;two&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(null);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f43c8694-6b6d-452c-83a6-643b1f7c10a0&quot;,&quot;parentUUID&quot;:&quot;74be91a6-64d3-4a7f-97bf-0e1c325deb1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e70a150b-8ac5-4471-acb3-b624a6077ad8&quot;,&quot;279f37b3-0c7f-4074-b8ea-68c726750129&quot;,&quot;f43c8694-6b6d-452c-83a6-643b1f7c10a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;title&quot;:&quot;hset command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/hash/hset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/hash/hset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(new net.Socket(), [&#x27;flushall&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdd9ee88-72de-48f7-abde-d7ac48d8aedb&quot;,&quot;parentUUID&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8037d23-1882-44e2-acb5-a7e5107fc957&quot;,&quot;parentUUID&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7b11fee-8994-4d5e-b4f0-1e0fa89f3c51&quot;,&quot;parentUUID&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;hset command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3538ab10-5719-40d3-a25c-52e080a585c3&quot;,&quot;parentUUID&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require a minimum of 3 parameters&quot;,&quot;fullTitle&quot;:&quot;hset command test should require a minimum of 3 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = safeId();\n        chai_1.expect(uniqueKey).not.to.equal(lastId);\n        lastId = uniqueKey;\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for \\&#x27;hset\\&#x27; command/i);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for \\&#x27;hm?set\\&#x27; command/i);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f9dd252-6a44-40db-bfb7-59f3f2476ed8&quot;,&quot;parentUUID&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only accept an odd number of parameters&quot;,&quot;fullTitle&quot;:&quot;hset command test should only accept an odd number of parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = safeId();\n        chai_1.expect(uniqueKey).not.to.equal(lastId);\n        lastId = uniqueKey;\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one2&#x27;, &#x27;two&#x27;, &#x27;fail&#x27;]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for hm?set/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;065eb7e9-13b8-40d7-a793-a8430eb28fc5&quot;,&quot;parentUUID&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only report added fields&quot;,&quot;fullTitle&quot;:&quot;hset command test should only report added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = safeId();\n        chai_1.expect(uniqueKey).not.to.equal(lastId);\n        lastId = uniqueKey;\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;six&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;anothervalue&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hget&#x27;, uniqueKey, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;anothervalue&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;441db9e7-c193-44b8-9c04-0e1030e43df9&quot;,&quot;parentUUID&quot;:&quot;ecc3ac69-807b-44e5-8ac7-0af0a31b5873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f9dd252-6a44-40db-bfb7-59f3f2476ed8&quot;,&quot;065eb7e9-13b8-40d7-a793-a8430eb28fc5&quot;,&quot;441db9e7-c193-44b8-9c04-0e1030e43df9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;title&quot;:&quot;del-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/del-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/del-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95e6062b-6524-4748-b66d-e84e51a98d60&quot;,&quot;parentUUID&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a68d57a-1f2d-47e9-bebc-0d14b27521c5&quot;,&quot;parentUUID&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;689d2c6d-f3c6-49af-a8d4-aa777c59f2d6&quot;,&quot;parentUUID&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;del-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a96c23f-10a1-45ba-918c-15b280086a02&quot;,&quot;parentUUID&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ZERO when called with no keys present&quot;,&quot;fullTitle&quot;:&quot;del-command test should report ZERO when called with no keys present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;del&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n    chai_1.expect(response).to.equal(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30fbf3f2-d68a-4eba-8b6d-fda945c21dbe&quot;,&quot;parentUUID&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the number of keys actually removed&quot;,&quot;fullTitle&quot;:&quot;del-command test should report the number of keys actually removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const client = new net.Socket();\ncommon_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key1&#x27;, &#x27;data&#x27;])\n    .then(() =&gt; {\n    common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key2&#x27;, &#x27;data&#x27;])\n        .then(() =&gt; {\n        common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key3&#x27;, &#x27;data&#x27;])\n            .then(() =&gt; {\n            common_test_1.sendCommand(client, [&#x27;del&#x27;, &#x27;key1&#x27;, &#x27;key3&#x27;])\n                .then((response) =&gt; {\n                chai_1.expect(response).to.equal(2);\n                done();\n            });\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c10a15e-73b7-4c19-a9ed-877e7727f652&quot;,&quot;parentUUID&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have retained key2 from the previous test&quot;,&quot;fullTitle&quot;:&quot;del-command test should have retained key2 from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;del&#x27;, &#x27;key2&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68db930c-6cbe-4af6-8500-651d302b743f&quot;,&quot;parentUUID&quot;:&quot;b0600b24-4ff3-4547-b9aa-54617b14299a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30fbf3f2-d68a-4eba-8b6d-fda945c21dbe&quot;,&quot;2c10a15e-73b7-4c19-a9ed-877e7727f652&quot;,&quot;68db930c-6cbe-4af6-8500-651d302b743f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;title&quot;:&quot;exists-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/exists-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/exists-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a millisecond TTL to validate exists respects TTL\n    common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;value&#x27;, &#x27;PX&#x27;, &#x27;3&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17cf118e-b971-45d1-99d9-6ea1045a74cf&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5f3a333-c83a-491d-ad1b-34d653ccffc1&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3662874-9abc-4f03-b1bf-0014b8f2fb0b&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;exists-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69494081-4018-45f2-a6fa-8e455900a823&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ZERO when none of the specified keys exist&quot;,&quot;fullTitle&quot;:&quot;exists-command test should report ZERO when none of the specified keys exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n    chai_1.expect(response).to.equal(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;538c15e3-1ca7-4900-84a5-340aa5039a31&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require at least ONE parameter&quot;,&quot;fullTitle&quot;:&quot;exists-command test should require at least ONE parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;exists\\&#x27; command&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6015c0d8-120d-4d36-b778-79ccd3c1d0ce&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report GREATER THAN ZERO when checking for the same existing key multiple times&quot;,&quot;fullTitle&quot;:&quot;exists-command test should report GREATER THAN ZERO when checking for the same existing key multiple times&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;key&#x27;, &#x27;value&#x27;])\n    .then(() =&gt; {\n    common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;, &#x27;key&#x27;, &#x27;key&#x27;, &#x27;unknownkey&#x27;, &#x27;another&#x27;, &#x27;another&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(2);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4973fed-bb27-46f7-8277-73574dc78417&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect the TTL value on a key&quot;,&quot;fullTitle&quot;:&quot;exists-command test should respect the TTL value on a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(new net.Socket(), [&#x27;exists&#x27;, &#x27;ttlkey&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01bd3c04-3d46-472a-b790-b2d043a16a17&quot;,&quot;parentUUID&quot;:&quot;f944a854-1083-49ca-9157-7ca2de510bdc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;538c15e3-1ca7-4900-84a5-340aa5039a31&quot;,&quot;6015c0d8-120d-4d36-b778-79ccd3c1d0ce&quot;,&quot;d4973fed-bb27-46f7-8277-73574dc78417&quot;,&quot;01bd3c04-3d46-472a-b790-b2d043a16a17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;title&quot;:&quot;expire-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/expire-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/expire-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03e37ff0-e34f-4a1c-8b74-c86594e87238&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d50d1e1-0979-4af0-ad38-a20090ad4c57&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1076fb5-fe21-4dd7-97d8-0af8776521a4&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;expire-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b127f7b-0f8e-4305-8f91-11906fa8bda0&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ZERO when expire called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;expire-command test should report ZERO when expire called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;no-key&#x27;, &#x27;1000&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;995e0df2-52ef-4ad6-86f1-07fee0d23ead&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require an integer value for the ttl parameter&quot;,&quot;fullTitle&quot;:&quot;expire-command test should require an integer value for the ttl parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;mykey&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;10.2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;ten&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;264b6f77-b515-4972-9367-8ca4748f0d79&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set the requested ttl on a key&quot;,&quot;fullTitle&quot;:&quot;expire-command test should set the requested ttl on a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;10000&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a581d92-4458-4376-807b-4c7ab850d414&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should expire a key when we set a negative ttl&quot;,&quot;fullTitle&quot;:&quot;expire-command test should expire a key when we set a negative ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Note that this is not consistent with documentation\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;mykey&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e105ca7-f50c-4fd0-8921-36402d3d13d1&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with ZKEYs (and other key types - as yet untested)&quot;,&quot;fullTitle&quot;:&quot;expire-command test should work with ZKEYs (and other key types - as yet untested)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2012,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;, &#x27;member&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n    common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zkey&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(1);\n        common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;])\n            .then((response) =&gt; {\n            chai_1.expect(response).to.equal(1);\n            setTimeout(() =&gt; {\n                common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zkey&#x27;])\n                    .then((response) =&gt; {\n                    chai_1.expect(response).to.equal(0, `Unexpected response ${response} should be ZERO`);\n                    done();\n                });\n            }, 2000);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cc4d12e-2568-418c-b8f4-359dca754ad4&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should survive the RENAME operation&quot;,&quot;fullTitle&quot;:&quot;expire-command test should survive the RENAME operation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;rename-test&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;expire&#x27;, &#x27;rename-test&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;rename-test&#x27;, &#x27;new-name&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;new-name&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;rename-test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        yield setTimeout(() =&gt; __awaiter(void 0, void 0, void 0, function* () {\n            response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;new-name&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        }), 2000);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4d068cb-5eaf-44f1-8d4a-cfe4c9af7a97&quot;,&quot;parentUUID&quot;:&quot;7f7d7278-d09e-4dff-9db1-57c41434e386&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;995e0df2-52ef-4ad6-86f1-07fee0d23ead&quot;,&quot;264b6f77-b515-4972-9367-8ca4748f0d79&quot;,&quot;8a581d92-4458-4376-807b-4c7ab850d414&quot;,&quot;7e105ca7-f50c-4fd0-8921-36402d3d13d1&quot;,&quot;9cc4d12e-2568-418c-b8f4-359dca754ad4&quot;,&quot;d4d068cb-5eaf-44f1-8d4a-cfe4c9af7a97&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2029,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;97241ae5-9b26-400f-8cb9-23b57b50b443&quot;,&quot;title&quot;:&quot;keys-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/keys-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/keys-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d10af740-ddbe-4622-b6c8-6a8084117873&quot;,&quot;parentUUID&quot;:&quot;97241ae5-9b26-400f-8cb9-23b57b50b443&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ba9e22b-61f0-4a95-a938-b14163d5383b&quot;,&quot;parentUUID&quot;:&quot;97241ae5-9b26-400f-8cb9-23b57b50b443&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3f36162-953e-48f7-b883-48af01bb1a88&quot;,&quot;parentUUID&quot;:&quot;97241ae5-9b26-400f-8cb9-23b57b50b443&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;keys-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8d098e3-7379-4be3-8d1a-c5889ac8462e&quot;,&quot;parentUUID&quot;:&quot;97241ae5-9b26-400f-8cb9-23b57b50b443&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve keys by glob patterns&quot;,&quot;fullTitle&quot;:&quot;keys-command test should retrieve keys by glob patterns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mset&#x27;, &#x27;firstname&#x27;, &#x27;Jack&#x27;, &#x27;lastname&#x27;, &#x27;Stuntman&#x27;, &#x27;age&#x27;, &#x27;35&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;keys&#x27;, &#x27;*name*&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;firstname&#x27;, &#x27;lastname&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;keys&#x27;, &#x27;a??&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;age&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;keys&#x27;, &#x27;*&#x27;]);\n        // NOTE: There does not appear to be a guarantee of order\n        chai_1.expect(response.sort()).to.eql([&#x27;age&#x27;, &#x27;firstname&#x27;, &#x27;lastname&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;986df2db-a1fc-4e62-ba39-8f2a60eb5d86&quot;,&quot;parentUUID&quot;:&quot;97241ae5-9b26-400f-8cb9-23b57b50b443&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;986df2db-a1fc-4e62-ba39-8f2a60eb5d86&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;title&quot;:&quot;move-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/move-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/move-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cc55ab8-2382-4618-91ce-27c9bddaaa84&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e4f7fec-0527-49fc-ae3e-56f14571f5ea&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28bb1d1f-7ea8-4cd7-a13c-01022c55241e&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;move-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e628a1a-d9ab-451a-b80c-165b486b5840&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow target and source db to be the same&quot;,&quot;fullTitle&quot;:&quot;move-command test should not allow target and source db to be the same&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Even if source key does not exist\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR source and destination objects are the same&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00644cdc-20a6-4cf5-9bb6-215b988d0ddb&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also report ZERO when the target key already exists&quot;,&quot;fullTitle&quot;:&quot;move-command test should also report ZERO when the target key already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;database ZERO&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR source and destination objects are the same&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23a58cfa-44c4-48c8-8103-0e0601f4e51a&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should move a key from one database to another otherwise&quot;,&quot;fullTitle&quot;:&quot;move-command test should move a key from one database to another otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;14&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;14&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc7ad54b-8d65-4131-a614-c236bf46f633&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report error when target database is invalid and key exists&quot;,&quot;fullTitle&quot;:&quot;move-command test should report error when target database is invalid and key exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Database 14 is already selected\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, uniqueKey, &#x27;InvalidDb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR index out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a9f7c46-1350-4c74-bae0-fc02cf002a3e&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when the key does not exist in the current db&quot;,&quot;fullTitle&quot;:&quot;move-command test should return 0 when the key does not exist in the current db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, &#x27;nokey&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e328356-3fdd-4299-aa47-32d9ad5e8a5a&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when the key exists in both source and target db&quot;,&quot;fullTitle&quot;:&quot;move-command test should return 0 when the key exists in both source and target db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;nokey&#x27;, &#x27;db0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;nokey&#x27;, &#x27;db1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;move&#x27;, &#x27;nokey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;db1&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;db0&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d81b2b85-f984-406b-8dda-2f9c55a2d193&quot;,&quot;parentUUID&quot;:&quot;51d848e7-cf41-4885-99d3-a6fda7f50b3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00644cdc-20a6-4cf5-9bb6-215b988d0ddb&quot;,&quot;23a58cfa-44c4-48c8-8103-0e0601f4e51a&quot;,&quot;dc7ad54b-8d65-4131-a614-c236bf46f633&quot;,&quot;3a9f7c46-1350-4c74-bae0-fc02cf002a3e&quot;,&quot;3e328356-3fdd-4299-aa47-32d9ad5e8a5a&quot;,&quot;d81b2b85-f984-406b-8dda-2f9c55a2d193&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;c4088c7a-f95b-4553-a86d-5e5176a4cf09&quot;,&quot;title&quot;:&quot;randomkey-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/randomkey-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/randomkey-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;698d8e1b-91b6-4b22-b277-eabf28fcdb6c&quot;,&quot;parentUUID&quot;:&quot;c4088c7a-f95b-4553-a86d-5e5176a4cf09&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;337e1159-42d5-4ef5-8226-468592306909&quot;,&quot;parentUUID&quot;:&quot;c4088c7a-f95b-4553-a86d-5e5176a4cf09&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80c44e4f-2330-44db-9dca-6f7824250a5e&quot;,&quot;parentUUID&quot;:&quot;c4088c7a-f95b-4553-a86d-5e5176a4cf09&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49eb5df9-190c-4e97-bbe2-809cda786a6a&quot;,&quot;parentUUID&quot;:&quot;c4088c7a-f95b-4553-a86d-5e5176a4cf09&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when the database is empty&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test should return NIL when the database is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;randomkey&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c9a7cec-027b-4f5f-a60c-2b39124bf48f&quot;,&quot;parentUUID&quot;:&quot;c4088c7a-f95b-4553-a86d-5e5176a4cf09&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return list, zkey, hash, and string keys without preference&quot;,&quot;fullTitle&quot;:&quot;randomkey-command test should return list, zkey, hash, and string keys without preference&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const results = [];\n        response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, &#x27;hash&#x27;, &#x27;field&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;list&#x27;, &#x27;element&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;string&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        for (let i = 0; i &lt; 15; i++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;randomkey&#x27;]);\n            chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, response]);\n            chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n            if (results.indexOf(response) === -1) {\n                results.push(response);\n            }\n            if (results.length === 4) {\n                break;\n            }\n        }\n        chai_1.expect(results.length).to.be.greaterThan(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76611aa9-d73f-468d-845d-dd838c167b1d&quot;,&quot;parentUUID&quot;:&quot;c4088c7a-f95b-4553-a86d-5e5176a4cf09&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c9a7cec-027b-4f5f-a60c-2b39124bf48f&quot;,&quot;76611aa9-d73f-468d-845d-dd838c167b1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;title&quot;:&quot;rename-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/rename-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/rename-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e232d5c8-aaf0-41f5-9378-aea0009a0689&quot;,&quot;parentUUID&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a32c223-550b-4509-a2a7-8141cb433985&quot;,&quot;parentUUID&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a902b15e-6a5c-4b40-88e2-bc4e742e60c3&quot;,&quot;parentUUID&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rename-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6941bf90-6f0e-41f7-8a4f-4e09fddafd3f&quot;,&quot;parentUUID&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report an error when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;rename-command test should report an error when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;mykey&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR no such key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdfe6959-f58f-4595-97c0-f719a09f8e8c&quot;,&quot;parentUUID&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should rename a key&quot;,&quot;fullTitle&quot;:&quot;rename-command test should rename a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;mykey&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;mykey&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mykey&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;872bac51-0368-493e-b1b9-addc1e3e50e4&quot;,&quot;parentUUID&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overwrite an existing key without notice&quot;,&quot;fullTitle&quot;:&quot;rename-command test should overwrite an existing key without notice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;myoriginalkey&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rename&#x27;, &#x27;my-otherkey&#x27;, &#x27;myoriginalkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;myoriginalkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8eb160a-8b4c-4af9-8259-2017d2bf5a20&quot;,&quot;parentUUID&quot;:&quot;8d87bac0-c6e7-4701-a665-c58137835af3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdfe6959-f58f-4595-97c0-f719a09f8e8c&quot;,&quot;872bac51-0368-493e-b1b9-addc1e3e50e4&quot;,&quot;b8eb160a-8b4c-4af9-8259-2017d2bf5a20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;title&quot;:&quot;renamenx-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/renamenx-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/renamenx-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;473211ca-194d-4c80-9e50-f301a6e126e3&quot;,&quot;parentUUID&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b33a1a0a-8bd5-48f3-a9e1-2a0a65af21a9&quot;,&quot;parentUUID&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2289be7d-cb65-4abb-a672-44f9f8317a6b&quot;,&quot;parentUUID&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;649a192f-778e-4291-8cf7-104af9abd00e&quot;,&quot;parentUUID&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report an error when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test should report an error when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;renamenx&#x27;, &#x27;mykey&#x27;, &#x27;my-otherkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR no such key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9886bf6-d3f6-40e3-9b62-9196d78434f8&quot;,&quot;parentUUID&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when attempting renamenx with source = destination&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test should return 0 when attempting renamenx with source = destination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;renamenx&#x27;, &#x27;key&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acf8d676-7f5f-4e08-9b0d-68a923c160e1&quot;,&quot;parentUUID&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should rename a key when requested&quot;,&quot;fullTitle&quot;:&quot;renamenx-command test should rename a key when requested&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;renamenx&#x27;, &#x27;key&#x27;, &#x27;newkey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;newkey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1579d552-9084-4dbd-8108-0f31b30642a1&quot;,&quot;parentUUID&quot;:&quot;6bba61ba-537f-429e-a943-741cc5e5ef4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9886bf6-d3f6-40e3-9b62-9196d78434f8&quot;,&quot;acf8d676-7f5f-4e08-9b0d-68a923c160e1&quot;,&quot;1579d552-9084-4dbd-8108-0f31b30642a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;title&quot;:&quot;ttl-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/ttl-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/ttl-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a couple - second TTL to validate exists respects TTL\n    common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;value&#x27;, &#x27;EX&#x27;, &#x27;30&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32879313-adbe-43e4-a823-5b62da4c8dc3&quot;,&quot;parentUUID&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d0e31f8-4aef-4e38-a529-16c36d151178&quot;,&quot;parentUUID&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5788a302-cc0a-48bb-becc-8babf232b2d8&quot;,&quot;parentUUID&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ttl-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef5305b4-07d5-4f3c-8877-0036029356e7&quot;,&quot;parentUUID&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report -2 when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;ttl-command test should report -2 when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ttl&#x27;, &#x27;nokey&#x27;]);\n        chai_1.expect(response).to.equal(-2);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;594bd7ce-9a13-4895-88cc-d8e67533ecc1&quot;,&quot;parentUUID&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return -1 when the key exists but does not have a ttl&quot;,&quot;fullTitle&quot;:&quot;ttl-command test should return -1 when the key exists but does not have a ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;newkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;ttl&#x27;, &#x27;newkey&#x27;]);\n        chai_1.expect(response).to.equal(-1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4584fad-0976-4239-99e3-2c4eac987a37&quot;,&quot;parentUUID&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the current ttl in seconds when available&quot;,&quot;fullTitle&quot;:&quot;ttl-command test should return the current ttl in seconds when available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ttl&#x27;, &#x27;ttlkey&#x27;]);\n        chai_1.expect(response).to.be.greaterThan(0);\n        chai_1.expect(response).to.be.lessThan(31);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b395ef5-af81-4aa9-83ee-8a5e1f995be4&quot;,&quot;parentUUID&quot;:&quot;7d416a4a-b90a-441e-89c1-10eed9138c1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;594bd7ce-9a13-4895-88cc-d8e67533ecc1&quot;,&quot;c4584fad-0976-4239-99e3-2c4eac987a37&quot;,&quot;8b395ef5-af81-4aa9-83ee-8a5e1f995be4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e9459922-3ec0-4cc3-ae74-50914571ced5&quot;,&quot;title&quot;:&quot;type-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/key/type-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/key/type-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;309be12d-0495-4d14-bd00-9a19372c7e8c&quot;,&quot;parentUUID&quot;:&quot;e9459922-3ec0-4cc3-ae74-50914571ced5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24dcae18-f880-4cec-b52c-d02f817d0101&quot;,&quot;parentUUID&quot;:&quot;e9459922-3ec0-4cc3-ae74-50914571ced5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cd3b75c-4122-4079-9e2e-f9c2bd687f1b&quot;,&quot;parentUUID&quot;:&quot;e9459922-3ec0-4cc3-ae74-50914571ced5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;type-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3df43be7-b5a3-4944-987d-05e086b2aab2&quot;,&quot;parentUUID&quot;:&quot;e9459922-3ec0-4cc3-ae74-50914571ced5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report the type of key&quot;,&quot;fullTitle&quot;:&quot;type-command test should report the type of key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;string-key&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;string-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;string&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;list-key&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;list-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;list&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;set-key&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;set-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;set&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;zset&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, &#x27;never&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;none&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df027d45-a571-4c3c-960c-b776e97a76c7&quot;,&quot;parentUUID&quot;:&quot;e9459922-3ec0-4cc3-ae74-50914571ced5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df027d45-a571-4c3c-960c-b776e97a76c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;title&quot;:&quot;blpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/blpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/blpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d37671e-0d12-4f45-8db1-3ebb2ea165dd&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6b06d6b-d549-4c97-a7d9-9342da967a57&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc2a41a1-b6bf-47bd-8ce6-8c00af01c6ec&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;blpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2feff2fa-1bb0-484b-9c5a-2571e116316a&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;no-key&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2b6ee77-27ca-41a0-b6a3-291dbead1125&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should wait for a list to exist and return the list name and value&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should wait for a list to exist and return the list name and value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5039ff24-ed14-4b84-b9e3-6e03835f23d1&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the list name and HEAD value&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should return the list name and HEAD value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;no-key2&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;no-key2&#x27;, &#x27;first&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;no-key2&#x27;, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;288e2657-ca76-4bdb-971a-31cbe4692a54&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support blocking lpop against multiple lists in one call&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should support blocking lpop against multiple lists in one call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;blpop&#x27;, &#x27;list1&#x27;, &#x27;list2&#x27;, &#x27;list3&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;list2&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;list2&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6818bef6-044f-4e4b-ad9b-ba27e38e2fbf&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pushd value when it already exists even if a timeout is set&quot;,&quot;fullTitle&quot;:&quot;blpop-command test should return the pushd value when it already exists even if a timeout is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const uniqueKey = `poplpush${new Date().getTime()}`;\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, uniqueKey, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n    common_test_1.sendCommand(client, [&#x27;blpop&#x27;, uniqueKey, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.eql([uniqueKey, &#x27;first&#x27;]);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3debf178-d9db-4614-b787-78147b4b023e&quot;,&quot;parentUUID&quot;:&quot;4abeb279-0a4d-47e6-bf8b-778b1937c43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2b6ee77-27ca-41a0-b6a3-291dbead1125&quot;,&quot;5039ff24-ed14-4b84-b9e3-6e03835f23d1&quot;,&quot;288e2657-ca76-4bdb-971a-31cbe4692a54&quot;,&quot;6818bef6-044f-4e4b-ad9b-ba27e38e2fbf&quot;,&quot;3debf178-d9db-4614-b787-78147b4b023e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1041,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;title&quot;:&quot;brpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/brpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/brpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c081e1f6-ab93-41a1-a62f-811fb57dba94&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11249413-0a47-491a-b42f-f5fab5cc1997&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b92a6d0-87cf-4c57-b0d9-be7c59aed097&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5df7fbe1-39c0-4439-b9d6-a4b7f798e402&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should return NIL when timeout &gt; 0 and list does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1007,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;no-key&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e985fc7e-f6e1-4f20-94d6-088a506c038a&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should wait for a list to exist and return the list name and value&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should wait for a list to exist and return the list name and value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;no-key&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4ace7b3-a288-49dd-ada4-9e11ae2a243f&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the list name and TAIL value&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should return the list name and TAIL value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;flushall&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;no-key2&#x27;, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.eql([&#x27;no-key2&#x27;, &#x27;first&#x27;]);\n        done();\n    });\n    common_test_1.sendCommand(new net.Socket(), [&#x27;rpush&#x27;, &#x27;no-key2&#x27;, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(3);\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;957d5bd0-6751-4547-8a53-26f4dad9decd&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support blocking rpop against multiple lists in one call&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should support blocking rpop against multiple lists in one call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;brpop&#x27;, &#x27;list1&#x27;, &#x27;list2&#x27;, &#x27;list3&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.eql([&#x27;list3&#x27;, &#x27;THE NEW VALUE&#x27;]);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;list3&#x27;, &#x27;THE NEW VALUE&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17b0c8f3-f573-4ace-82d2-f2846634d8af&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pushd value when it already exists even if a timeout is set&quot;,&quot;fullTitle&quot;:&quot;brpop-command test should return the pushd value when it already exists even if a timeout is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const uniqueKey = `poprpush${new Date().getTime()}`;\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;rpush&#x27;, uniqueKey, &#x27;third&#x27;, &#x27;second&#x27;, &#x27;first&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n    common_test_1.sendCommand(client, [&#x27;brpop&#x27;, uniqueKey, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.eql([uniqueKey, &#x27;first&#x27;]);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72bd80bb-b910-438a-a2f6-4da013d33655&quot;,&quot;parentUUID&quot;:&quot;fd5a542f-0e24-4d23-aa1a-ab238abafc49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e985fc7e-f6e1-4f20-94d6-088a506c038a&quot;,&quot;f4ace7b3-a288-49dd-ada4-9e11ae2a243f&quot;,&quot;957d5bd0-6751-4547-8a53-26f4dad9decd&quot;,&quot;17b0c8f3-f573-4ace-82d2-f2846634d8af&quot;,&quot;72bd80bb-b910-438a-a2f6-4da013d33655&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1040,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;title&quot;:&quot;brpoplpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/brpoplpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/brpoplpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd8452b9-199e-4721-a371-eb3267be2711&quot;,&quot;parentUUID&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        sinon.createSandbox();\n        yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd1d1144-28eb-41da-8468-89626f036281&quot;,&quot;parentUUID&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71e56b14-4439-4260-8e17-ec23e10a65aa&quot;,&quot;parentUUID&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acc26686-e53b-4118-abdc-bdf64734e699&quot;,&quot;parentUUID&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when destination does not exist and timeout expires&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test should return NIL when destination does not exist and timeout expires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2009,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;src&#x27;, &#x27;dst&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;923fb89c-b3bc-475f-b717-bef53a8b8b13&quot;,&quot;parentUUID&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the poplpushed value when lpush is called&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test should return the poplpushed value when lpush is called&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;poplpushkey&#x27;, &#x27;poplpopkey&#x27;, &#x27;0&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;value1&#x27;);\n    done();\n});\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, &#x27;poplpushkey&#x27;, &#x27;value1&#x27;, &#x27;value2&#x27;, &#x27;value3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f72ef45e-70e7-48d7-afc3-992d5fd9e7a4&quot;,&quot;parentUUID&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pushd value when it already exists even if a timeout is set&quot;,&quot;fullTitle&quot;:&quot;brpoplpush-command test should return the pushd value when it already exists even if a timeout is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const uniqueKey = `poplpush${new Date().getTime()}`;\ncommon_test_1.sendCommand(new net.Socket(), [&#x27;lpush&#x27;, uniqueKey, &#x27;value1&#x27;, &#x27;value2&#x27;, &#x27;value3&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(3);\n    common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, uniqueKey, &#x27;poplpopkey&#x27;, &#x27;0&#x27;])\n        .then((response) =&gt; {\n        chai_1.expect(response).to.equal(&#x27;value1&#x27;);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3347204-d96f-4461-be4f-82b92915ece6&quot;,&quot;parentUUID&quot;:&quot;ca18f36c-140a-456a-bc85-728c75bebaad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;923fb89c-b3bc-475f-b717-bef53a8b8b13&quot;,&quot;f72ef45e-70e7-48d7-afc3-992d5fd9e7a4&quot;,&quot;b3347204-d96f-4461-be4f-82b92915ece6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2015,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;title&quot;:&quot;lindex-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lindex-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lindex-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;483794cc-6a24-4ef6-9392-d8ae507468fa&quot;,&quot;parentUUID&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31aa6f04-8125-403c-997d-b47b463bf35a&quot;,&quot;parentUUID&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cb34a31-4854-4ea0-94cd-669aa8714f18&quot;,&quot;parentUUID&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lindex-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;906ce123-c5e9-4ada-ac97-61a3dc684067&quot;,&quot;parentUUID&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when lindex called with invalid index on non-existent key&quot;,&quot;fullTitle&quot;:&quot;lindex-command test should report NIL when lindex called with invalid index on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, &#x27;no-key&#x27;, &#x27;negative one thousand&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17a7ed91-d825-4083-ac6b-fd8314791156&quot;,&quot;parentUUID&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report ERR when attempting to get lindex of non-list key&quot;,&quot;fullTitle&quot;:&quot;lindex-command test should report ERR when attempting to get lindex of non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, &#x27;lkey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e491408c-801f-4c82-aee5-259937830e66&quot;,&quot;parentUUID&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the correct key at an index&quot;,&quot;fullTitle&quot;:&quot;lindex-command test should return the correct key at an index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `lkey-${new Date().getTime()}`;\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-100&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;a1&#x27;, &#x27;b2&#x27;, &#x27;c3&#x27;]);\n        chai_1.expect(response).to.equal(6);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-6&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;-7&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, uniqueKey, &#x27;100&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;931927d8-dad7-4e0a-afd2-3a8856a6fd73&quot;,&quot;parentUUID&quot;:&quot;9c99a62d-f9ff-4ec9-a9fb-0d32090b17c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17a7ed91-d825-4083-ac6b-fd8314791156&quot;,&quot;e491408c-801f-4c82-aee5-259937830e66&quot;,&quot;931927d8-dad7-4e0a-afd2-3a8856a6fd73&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;title&quot;:&quot;llen-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/llen-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/llen-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8bea165-c743-418d-9e91-4547371c65e8&quot;,&quot;parentUUID&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9977fdf-1d57-452b-9959-c89d089f48cc&quot;,&quot;parentUUID&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5247ee8c-56fc-446b-8cda-195b722e34d6&quot;,&quot;parentUUID&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;llen-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57c1d96f-0ed1-4143-ad29-def6f0bb4ef8&quot;,&quot;parentUUID&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report 0 when llen called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;llen-command test should report 0 when llen called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f58dfa87-b4d8-4280-891e-5a8478b360f4&quot;,&quot;parentUUID&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report WRONGTYPE when attempting to get llen of non-list key&quot;,&quot;fullTitle&quot;:&quot;llen-command test should report WRONGTYPE when attempting to get llen of non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;lkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96de23c1-f1cf-45b6-9b8c-02e23a03774c&quot;,&quot;parentUUID&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the correct list length&quot;,&quot;fullTitle&quot;:&quot;llen-command test should return the correct list length&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `lkey-${new Date().getTime()}`;\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(null);\n        // The list goes away when the last element is popped\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, uniqueKey, &#x27;-6&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c072e5a-d945-4b7e-9a48-c876985387e4&quot;,&quot;parentUUID&quot;:&quot;6520e804-bf33-4d0a-b172-bcd071c77cc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f58dfa87-b4d8-4280-891e-5a8478b360f4&quot;,&quot;96de23c1-f1cf-45b6-9b8c-02e23a03774c&quot;,&quot;0c072e5a-d945-4b7e-9a48-c876985387e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;52050a91-4c20-499e-8bc6-bdeac9ee42bc&quot;,&quot;title&quot;:&quot;lpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e4cdb6b-24d3-4f3d-8155-7a0c444ea86d&quot;,&quot;parentUUID&quot;:&quot;52050a91-4c20-499e-8bc6-bdeac9ee42bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c47c014-fa9e-489e-b502-6472b6b9452a&quot;,&quot;parentUUID&quot;:&quot;52050a91-4c20-499e-8bc6-bdeac9ee42bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beaa9d18-90e3-4922-bd4f-508ad0f79c6a&quot;,&quot;parentUUID&quot;:&quot;52050a91-4c20-499e-8bc6-bdeac9ee42bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93fd59b2-b5e8-4128-87ae-53503669731a&quot;,&quot;parentUUID&quot;:&quot;52050a91-4c20-499e-8bc6-bdeac9ee42bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when lpop called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;lpop-command test should report NIL when lpop called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c494c2f1-a7d7-45d0-8d05-3a5ae3552cf7&quot;,&quot;parentUUID&quot;:&quot;52050a91-4c20-499e-8bc6-bdeac9ee42bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return values from the left side of a list&quot;,&quot;fullTitle&quot;:&quot;lpop-command test should return values from the left side of a list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, testKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;d&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(null);\n        // The list goes away when the last element is removed\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, testKey]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4676bd9a-a406-4b9b-982c-a6c7a0632140&quot;,&quot;parentUUID&quot;:&quot;52050a91-4c20-499e-8bc6-bdeac9ee42bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c494c2f1-a7d7-45d0-8d05-3a5ae3552cf7&quot;,&quot;4676bd9a-a406-4b9b-982c-a6c7a0632140&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;title&quot;:&quot;lpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12a2e339-6661-408a-b92e-4bbc5a1126c9&quot;,&quot;parentUUID&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85b7b7be-e5cd-40b0-aaf0-9bf2dc2abe06&quot;,&quot;parentUUID&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c392b86-b2e5-42da-b72c-6981b13f1b3a&quot;,&quot;parentUUID&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b80f7545-806f-4631-bb95-0ad8f5e323d5&quot;,&quot;parentUUID&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ERR when attempting to lpush to a non-list key&quot;,&quot;fullTitle&quot;:&quot;lpush-command test should report ERR when attempting to lpush to a non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;lkey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ecaa516-5b8f-4414-a482-f51b091f0bf5&quot;,&quot;parentUUID&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a list if it doesn&#x27;t already exist&quot;,&quot;fullTitle&quot;:&quot;lpush-command test should create a list if it doesn&#x27;t already exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, testKey]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, testKey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        // The list is now &#x27;c&#x27;, &#x27;b&#x27;, &#x27;a&#x27;\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, testKey]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a203c59-4ff9-4c53-94de-993f927a9b12&quot;,&quot;parentUUID&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the list in a predicatble order&quot;,&quot;fullTitle&quot;:&quot;lpush-command test should have created the list in a predicatble order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lindex&#x27;, testKey, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, testKey]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, testKey]);\n        chai_1.expect(response).to.equal(&#x27;a&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98cbea60-974f-4807-b7a9-abbcf792ca3f&quot;,&quot;parentUUID&quot;:&quot;194fbb42-4476-4c6b-bcb1-39768221cfcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5ecaa516-5b8f-4414-a482-f51b091f0bf5&quot;,&quot;6a203c59-4ff9-4c53-94de-993f927a9b12&quot;,&quot;98cbea60-974f-4807-b7a9-abbcf792ca3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;title&quot;:&quot;lrange-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lrange-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lrange-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e54409ad-70fd-4511-845f-8de52879b5ad&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1978c708-d022-400f-baad-a20175acbd01&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b294588a-b6d8-45c7-9b64-330f333f57cc&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrange-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d45d531-cf64-4774-af8f-c0479503fc41&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;return an empty list when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;lrange-command test return an empty list when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d4f86f5-3d5e-4541-883d-bdeed0a2305a&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report an error when start or stop index are invalid&quot;,&quot;fullTitle&quot;:&quot;lrange-command test should report an error when start or stop index are invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;negative one&#x27;, &#x27;-2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;, &#x27;negative two&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;no-key&#x27;, &#x27;-1&#x27;, &#x27;-100&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e9dedc2-47ff-40d0-87cc-d410b081fd11&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return predictable results&quot;,&quot;fullTitle&quot;:&quot;lrange-command test should return predictable results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;newlist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;newlist&#x27;, &#x27;world&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;newlist&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;world&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;603c911c-8bcb-4e60-be17-5f3113593971&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reproduce the results from the redis documentation&quot;,&quot;fullTitle&quot;:&quot;lrange-command test should reproduce the results from the redis documentation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;doclist&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;doclist&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;doclist&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;0&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;-3&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;-100&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;doclist&#x27;, &#x27;5&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2ff3ee5-4345-40bd-b6c4-eef32444d578&quot;,&quot;parentUUID&quot;:&quot;6f52def7-92c9-4e1a-b430-6537cd671f7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d4f86f5-3d5e-4541-883d-bdeed0a2305a&quot;,&quot;3e9dedc2-47ff-40d0-87cc-d410b081fd11&quot;,&quot;603c911c-8bcb-4e60-be17-5f3113593971&quot;,&quot;f2ff3ee5-4345-40bd-b6c4-eef32444d578&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;title&quot;:&quot;lrem-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lrem-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lrem-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1830baf-f666-4b79-bc7f-98fa4ccb097a&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d0e5eb3-5082-4bd4-9846-1ce152bede06&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f75bb69-408b-4234-8dcd-1732782f2469&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lrem-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8d34a84-a8a8-40c8-99b8-0d44bae29913&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should NOT report 0 when lrem called with invalid non-existent key&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should NOT report 0 when lrem called with invalid non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;no-key&#x27;, &#x27;negative one thousand&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;357e0458-20da-4a6e-a5a1-5c329608e0ed&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report ERR when lrem called against existing key with invalid count argument&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should report ERR when lrem called against existing key with invalid count argument&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;lrem&#x27;, &#x27;akey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;lrem&#x27;, &#x27;negative one thousand&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d677adb-487b-47b6-a917-410ce4dbde29&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report 0 when lrem called with valid arguments and non-existing element&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should report 0 when lrem called with valid arguments and non-existing element&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;lrem&#x27;, &#x27;0&#x27;, &#x27;does not exist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6e8dabe-d1cc-4dfa-89ec-2441687f8995&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should use negative index counters&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should use negative index counters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;foo&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;-2&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;foo&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;946f7305-e660-4b3f-b081-586f42849ffd&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a ZERO result when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should return a ZERO result when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;otherlist&#x27;, &#x27;1&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e70de842-6492-4f59-ac49-d114770c1d19&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove every matchin element when count is 0&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove every matchin element when count is 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushdb&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;foo&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(3);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;249052ac-1688-475c-bc56-4de0191ef02e&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove the list when all elements are gone&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove the list when all elements are gone&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;foo&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a34b0f1a-b365-4c28-b3ad-e1a0d8e1646f&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove only the number of requested elements when count &gt; 0&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove only the number of requested elements when count &gt; 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;calibrate&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrem&#x27;, &#x27;mylist&#x27;, &#x27;1&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a2c6a34-ca1d-4ba3-93cb-064d22509ba1&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should default to startIndex ZERO when it is less than ZERO&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should default to startIndex ZERO when it is less than ZERO&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let i = 0; i &lt; 10; i++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;newlist&#x27;, `${i}`]);\n            chai_1.expect(response).to.equal(i + 1);\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;newlist&#x27;, &#x27;-100&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;newlist&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;newlist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d619b7a7-ba2a-4336-8bb4-ca0ec06f81a2&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove the list when start &gt; end or start &gt; llen&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove the list when start &gt; end or start &gt; llen&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;newlist&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;newlist&#x27;, &#x27;10&#x27;, &#x27;2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;newlist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;552c72ed-ec5a-48e7-8191-25668f14ad63&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should properly handle a negative endIndex&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should properly handle a negative endIndex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        for (let i = 0; i &lt; 7; i++) {\n            response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;neglist&#x27;, `${i}`]);\n            chai_1.expect(response).to.equal(i + 1);\n        }\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;neglist&#x27;, &#x27;-100&#x27;, &#x27;-3&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;neglist&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ea8c494-c8b8-4927-a774-6f81bb9f9cb6&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove the key when abs(endIndex) is &gt; llen&quot;,&quot;fullTitle&quot;:&quot;lrem-command test should remove the key when abs(endIndex) is &gt; llen&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;neglist&#x27;, &#x27;-100&#x27;, &#x27;-6&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;neglist&#x27;]);\n        chai_1.expect(response).to.eql(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd5b356c-e765-4c9c-8a8f-5622a4b91a01&quot;,&quot;parentUUID&quot;:&quot;01e202c8-bd6f-45b8-8d3f-e5e2215e9e1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;357e0458-20da-4a6e-a5a1-5c329608e0ed&quot;,&quot;7d677adb-487b-47b6-a917-410ce4dbde29&quot;,&quot;d6e8dabe-d1cc-4dfa-89ec-2441687f8995&quot;,&quot;946f7305-e660-4b3f-b081-586f42849ffd&quot;,&quot;e70de842-6492-4f59-ac49-d114770c1d19&quot;,&quot;249052ac-1688-475c-bc56-4de0191ef02e&quot;,&quot;a34b0f1a-b365-4c28-b3ad-e1a0d8e1646f&quot;,&quot;4a2c6a34-ca1d-4ba3-93cb-064d22509ba1&quot;,&quot;d619b7a7-ba2a-4336-8bb4-ca0ec06f81a2&quot;,&quot;552c72ed-ec5a-48e7-8191-25668f14ad63&quot;,&quot;5ea8c494-c8b8-4927-a774-6f81bb9f9cb6&quot;,&quot;bd5b356c-e765-4c9c-8a8f-5622a4b91a01&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;title&quot;:&quot;lset-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/lset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/lset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40348485-dd41-4ea9-9fb1-fe00b0ae3f18&quot;,&quot;parentUUID&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eeaa6b0a-2990-40cf-b08d-237ee31ec200&quot;,&quot;parentUUID&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0b415b3-3bd3-4320-ab0f-79fbb7b89c04&quot;,&quot;parentUUID&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;lset-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d15733b-5722-4cf6-bdfa-37316897edb1&quot;,&quot;parentUUID&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should fail when a key does not exist&quot;,&quot;fullTitle&quot;:&quot;lset-command test should fail when a key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lset&#x27;, &#x27;no-key&#x27;, &#x27;negative one thousand&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR no such key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62d25794-b0e8-467f-bd56-9419eb1926be&quot;,&quot;parentUUID&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should replace a valid index&quot;,&quot;fullTitle&quot;:&quot;lset-command test should replace a valid index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, testkey, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lset&#x27;, testkey, &#x27;-1&#x27;, &#x27;z&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, testkey, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;z&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81619159-a9a9-4ecc-af82-a66e68bc54c6&quot;,&quot;parentUUID&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should recognize invalid indexes&quot;,&quot;fullTitle&quot;:&quot;lset-command test should recognize invalid indexes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;lset&#x27;, testkey, &#x27;invalid&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5c30800-c827-4d41-98c1-d81ad99c227d&quot;,&quot;parentUUID&quot;:&quot;668a8f48-884a-481b-87c8-6af0c4a1e900&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;62d25794-b0e8-467f-bd56-9419eb1926be&quot;,&quot;81619159-a9a9-4ecc-af82-a66e68bc54c6&quot;,&quot;f5c30800-c827-4d41-98c1-d81ad99c227d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;title&quot;:&quot;ltrim-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/ltrim-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/ltrim-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;082e2137-db58-4599-9f0c-37508805a7a4&quot;,&quot;parentUUID&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d050259b-f13d-457b-959f-5af64792e64e&quot;,&quot;parentUUID&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40074b95-f7fc-4231-a148-0c1f4c4d699a&quot;,&quot;parentUUID&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76c7fa0a-17a9-4cca-a9a0-e050a2bc4e97&quot;,&quot;parentUUID&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report OK when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test should report OK when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;no-key&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59b6d3a0-3e64-4bf1-a30f-592a12128fa4&quot;,&quot;parentUUID&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim a list to the requested size or less&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test should trim a list to the requested size or less&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;calibrate&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;RPUSH&#x27;, &#x27;mylist&#x27;, &#x27;hello&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;mylist&#x27;, &#x27;1&#x27;, &#x27;4&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;hello&#x27;, &#x27;calibrate&#x27;, &#x27;hello&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;mylist&#x27;, &#x27;-2&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;llen&#x27;, &#x27;mylist&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;mylist&#x27;, &#x27;0&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;calibrate&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db538c16-24a7-45ba-b3f8-554677866c07&quot;,&quot;parentUUID&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject an invalid start index&quot;,&quot;fullTitle&quot;:&quot;ltrim-command test should reject an invalid start index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;ltrim&#x27;, &#x27;testlist&#x27;, &#x27;wrong&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;368f3f13-1ac9-4438-b615-d760b0e5c3d4&quot;,&quot;parentUUID&quot;:&quot;0ec02d04-3f9c-4aea-8f92-56035836ef0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59b6d3a0-3e64-4bf1-a30f-592a12128fa4&quot;,&quot;db538c16-24a7-45ba-b3f8-554677866c07&quot;,&quot;368f3f13-1ac9-4438-b615-d760b0e5c3d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d6c0cf39-e668-4bcb-b977-89b17135bcab&quot;,&quot;title&quot;:&quot;rpop-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/rpop-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/rpop-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0c4ab79-864c-4f83-bfce-6aa9e326a2c1&quot;,&quot;parentUUID&quot;:&quot;d6c0cf39-e668-4bcb-b977-89b17135bcab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8035e7a6-736a-41aa-a7bc-5b55f983de47&quot;,&quot;parentUUID&quot;:&quot;d6c0cf39-e668-4bcb-b977-89b17135bcab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dfb49eb-24fe-4708-a5aa-e6213b801248&quot;,&quot;parentUUID&quot;:&quot;d6c0cf39-e668-4bcb-b977-89b17135bcab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpop-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45991e7f-b087-4c78-a7b2-69d065d05999&quot;,&quot;parentUUID&quot;:&quot;d6c0cf39-e668-4bcb-b977-89b17135bcab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when rpop called on non-existent key&quot;,&quot;fullTitle&quot;:&quot;rpop-command test should report NIL when rpop called on non-existent key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpop&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;no-key&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0472ed8-fcb8-4d3e-8985-72f52dc552e1&quot;,&quot;parentUUID&quot;:&quot;d6c0cf39-e668-4bcb-b977-89b17135bcab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0472ed8-fcb8-4d3e-8985-72f52dc552e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;title&quot;:&quot;rpoplpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/rpoplpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/rpoplpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af202e6f-4e0d-421d-9593-0d0dcfd8e253&quot;,&quot;parentUUID&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a115a6b3-b82a-4bc3-88a9-b622fba11bd1&quot;,&quot;parentUUID&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a811e089-bc6f-4fef-9732-de7f032ff3b1&quot;,&quot;parentUUID&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84c76b6f-2d1f-4e43-9dcf-b192fbe3ccc7&quot;,&quot;parentUUID&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when destination does not exist&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test should return NIL when destination does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpoplpush&#x27;, &#x27;src&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e1b1852-c5c2-43a9-a12f-2a5a27199867&quot;,&quot;parentUUID&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should rotate a list when src and dst are the same&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test should rotate a list when src and dst are the same&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;src&#x27;, &#x27;a&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;src&#x27;, &#x27;b&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;src&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;src&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpoplpush&#x27;, &#x27;src&#x27;, &#x27;src&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;c&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;src&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;, &#x27;a&#x27;, &#x27;b&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4930b2bf-6d69-4307-b83c-4952291427cb&quot;,&quot;parentUUID&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create the target list if it does not exist&quot;,&quot;fullTitle&quot;:&quot;rpoplpush-command test should create the target list if it does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpoplpush&#x27;, &#x27;src&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;b&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dst&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;src&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;, &#x27;a&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;lrange&#x27;, &#x27;dst&#x27;, &#x27;0&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;b&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23633017-5319-4faa-8465-b58511c17014&quot;,&quot;parentUUID&quot;:&quot;210a0b06-0bcc-4bf0-b56e-742a41fab5a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e1b1852-c5c2-43a9-a12f-2a5a27199867&quot;,&quot;4930b2bf-6d69-4307-b83c-4952291427cb&quot;,&quot;23633017-5319-4faa-8465-b58511c17014&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b3ba7116-2668-43bc-9b2f-b9d45719fa1d&quot;,&quot;title&quot;:&quot;rpush-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/list/rpush-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/list/rpush-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9968a6c7-a7d9-4856-a085-09e579b16c15&quot;,&quot;parentUUID&quot;:&quot;b3ba7116-2668-43bc-9b2f-b9d45719fa1d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b5a1793-283a-4c06-8a17-bd652553f11d&quot;,&quot;parentUUID&quot;:&quot;b3ba7116-2668-43bc-9b2f-b9d45719fa1d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;627e4571-5c1c-4cf4-adb3-7440f84f5de9&quot;,&quot;parentUUID&quot;:&quot;b3ba7116-2668-43bc-9b2f-b9d45719fa1d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;rpush-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8b8c2d1-379c-40b3-b087-93bb913f4b70&quot;,&quot;parentUUID&quot;:&quot;b3ba7116-2668-43bc-9b2f-b9d45719fa1d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ERR when attempting to rpush to a non-list key&quot;,&quot;fullTitle&quot;:&quot;rpush-command test should report ERR when attempting to rpush to a non-list key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;lkey&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;lkey&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f877f56b-be4c-493a-8a48-8c0b204adef0&quot;,&quot;parentUUID&quot;:&quot;b3ba7116-2668-43bc-9b2f-b9d45719fa1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f877f56b-be4c-493a-8a48-8c0b204adef0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;title&quot;:&quot;multi command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/multi-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/multi-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cbcbedb-e92f-4e59-a660-e791f5346ffa&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eba204bb-4cbf-4525-958f-4a14d07331d2&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d9fbd4f-b279-4db4-95d3-8813d03da01d&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;multi command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27ddaf28-c5f6-4ca8-9e12-6f6a6ade6a8e&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow nested MULTI invocations&quot;,&quot;fullTitle&quot;:&quot;multi command test should not allow nested MULTI invocations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR MULTI calls can not be nested&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ed1d843-0f45-44a1-8dc1-9af0e525df6f&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect the DISCARD command&quot;,&quot;fullTitle&quot;:&quot;multi command test should respect the DISCARD command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;discard&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fad5d510-f910-4a41-8ec7-d90de08a1e40&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow DISCARD without MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should not allow DISCARD without MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;discard&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR DISCARD without MULTI&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aafcdf13-29d8-4f70-a441-8b03b5903891&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should continue to validate commands after MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should continue to validate commands after MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;unknown&#x27;, &#x27;command&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR unknown command `unknown`, with args beginning with: `command`, &#x27;, `${response}`);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28310a15-38bd-4896-b02a-645c9bf2c1c7&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should EXECABORT from a previous error&quot;,&quot;fullTitle&quot;:&quot;multi command test should EXECABORT from a previous error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: EXECABORT Transaction discarded because of previous errors.&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95e1eeb7-5440-4bc5-bd58-6aa74a33e0e4&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should queue a set of commands when there is no intervening error&quot;,&quot;fullTitle&quot;:&quot;multi command test should queue a set of commands when there is no intervening error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.eql([3]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;475887ac-f52b-4bfc-9207-61a1ee9fd945&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reset transaction state after executing commands&quot;,&quot;fullTitle&quot;:&quot;multi command test should reset transaction state after executing commands&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;discard&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e49cd5d-74fa-4a40-b8df-0a19906352be&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the results of multiple commands in the order provided&quot;,&quot;fullTitle&quot;:&quot;multi command test should return the results of multiple commands in the order provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;multi&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;test&#x27;, &#x27;dest&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;QUEUED&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;three&#x27;, &#x27;two&#x27;, &#x27;one&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;dest&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc72fe66-e755-4ef8-978b-9736a205bc82&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate the behavior of brpoplpush&quot;,&quot;fullTitle&quot;:&quot;multi command test should validate the behavior of brpoplpush&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpush&#x27;, &#x27;test&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;three&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;lpop&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;two&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;brpoplpush&#x27;, &#x27;test&#x27;, &#x27;dest&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;one&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0168682e-3f61-47f7-b8db-4828c5e8d5b9&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when EXEC issued without MULTI&quot;,&quot;fullTitle&quot;:&quot;multi command test should fail when EXEC issued without MULTI&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;exec&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR EXEC without MULTI&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c441af53-7ef9-4430-bf57-d0911545eb77&quot;,&quot;parentUUID&quot;:&quot;7db28b1d-aeef-49f0-9af8-03eb6909d5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ed1d843-0f45-44a1-8dc1-9af0e525df6f&quot;,&quot;fad5d510-f910-4a41-8ec7-d90de08a1e40&quot;,&quot;aafcdf13-29d8-4f70-a441-8b03b5903891&quot;,&quot;28310a15-38bd-4896-b02a-645c9bf2c1c7&quot;,&quot;95e1eeb7-5440-4bc5-bd58-6aa74a33e0e4&quot;,&quot;475887ac-f52b-4bfc-9207-61a1ee9fd945&quot;,&quot;1e49cd5d-74fa-4a40-b8df-0a19906352be&quot;,&quot;fc72fe66-e755-4ef8-978b-9736a205bc82&quot;,&quot;0168682e-3f61-47f7-b8db-4828c5e8d5b9&quot;,&quot;c441af53-7ef9-4430-bf57-d0911545eb77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;title&quot;:&quot;script-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/script-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/script-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b1a96a0-0559-46a4-bb4a-b9d3ed526150&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;707539cd-3f74-4d99-91e8-0c2043b030f3&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b820a066-e5e5-480e-ae88-501aef344910&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;script-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;255868b2-1633-4efe-8d97-18d0c57b602d&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should calcuclate the correct sha1 of a script and store the script&quot;,&quot;fullTitle&quot;:&quot;script-command test should calcuclate the correct sha1 of a script and store the script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;exists&#x27;, sha1]);\n        chai_1.expect(response).to.eql([0]);\n        // validate failure on unparseable script\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;load&#x27;, code]);\n        chai_1.expect(response).to.match(/ReplyError: ERR .*/);\n        // validate success on parseable script\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;load&#x27;, `${code}}`]);\n        chai_1.expect(response).to.equal(sha1);\n        // validate a script is persisted\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;exists&#x27;, sha1]);\n        chai_1.expect(response).to.eql([1]);\n        // validate response to unknown sub command\n        response = yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;test&#x27;, sha1]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR Unknown subcommand or wrong number of arguments for \\&#x27;test\\&#x27;. Try SCRIPT HELP.&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0269556-7cc4-4046-b430-8c616898d586&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should evaluate a loaded lua script using evalsha&quot;,&quot;fullTitle&quot;:&quot;script-command test should evaluate a loaded lua script using evalsha&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Validate that NOSCRIPT is triggered\n        response = yield common_test_1.sendCommand(client, [&#x27;evalsha&#x27;, `${sha1}xx`, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: NOSCRIPT No matching script. Please use EVAL.&#x27;);\n        // Validate that param 1 cannot be negative\n        response = yield common_test_1.sendCommand(client, [&#x27;evalsha&#x27;, sha1, &#x27;-2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR Number of keys can\\&#x27;t be negative&#x27;);\n        // Validate that param 1 cannot be text\n        response = yield common_test_1.sendCommand(client, [&#x27;evalsha&#x27;, sha1, &#x27;two&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;611da065-668e-4878-b3d3-570119e47048&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should execute a simple script&quot;,&quot;fullTitle&quot;:&quot;script-command test should execute a simple script&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Validate that a simple script can be processed\n        response = yield common_test_1.sendCommand(client, [&#x27;EVAL&#x27;, &#x27;local val=\&quot;Hello Compose\&quot; return val&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;Hello Compose&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80561a81-903c-44cf-aa3c-e215bb3554b6&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create and process the ARGV table&quot;,&quot;fullTitle&quot;:&quot;script-command test should create and process the ARGV table&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return ARGV[2]&#x27;, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.eql(&#x27;second&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00542480-f23d-43d7-a29f-47e2b78f9e1c&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create and process the KEYS table&quot;,&quot;fullTitle&quot;:&quot;script-command test should create and process the KEYS table&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return KEYS[1]&#x27;, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;key1&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4dbda56-9bd5-4c1c-94af-b0f89c68977f&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a NUMBER when required&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a NUMBER when required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return 123&#x27;, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(123);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;153f3175-6fac-4903-963c-374cb1132370&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return NIL when there is no return value&quot;,&quot;fullTitle&quot;:&quot;script-command test should return NIL when there is no return value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;print \&quot;Hello World\&quot;&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fc9fed1-ff8f-4bd9-9e31-d4718ab9348c&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a TABLE when required&quot;,&quot;fullTitle&quot;:&quot;script-command test should return a TABLE when required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [`eval`, `return ARGV`, &#x27;2&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf77c3f1-464e-4eab-9d55-6004e07a3454&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return items in order&quot;,&quot;fullTitle&quot;:&quot;script-command test should return items in order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return {true, \&quot;test\&quot;, false, 10, 10.2}&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([1, &#x27;test&#x27;, null, 10, 10]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd1d1e93-58a2-4a17-af7a-65e8e3fba673&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return integer and nil for true and false, respectively&quot;,&quot;fullTitle&quot;:&quot;script-command test should return integer and nil for true and false, respectively&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;eval&#x27;, &#x27;return { true, false, false}&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.eql([1, null, null]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d35acc4f-7ee5-4e4a-bb55-c9795e912203&quot;,&quot;parentUUID&quot;:&quot;ee51b6ac-38d2-413e-a9b2-006da2967d19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0269556-7cc4-4046-b430-8c616898d586&quot;,&quot;611da065-668e-4878-b3d3-570119e47048&quot;,&quot;80561a81-903c-44cf-aa3c-e215bb3554b6&quot;,&quot;00542480-f23d-43d7-a29f-47e2b78f9e1c&quot;,&quot;c4dbda56-9bd5-4c1c-94af-b0f89c68977f&quot;,&quot;153f3175-6fac-4903-963c-374cb1132370&quot;,&quot;2fc9fed1-ff8f-4bd9-9e31-d4718ab9348c&quot;,&quot;bf77c3f1-464e-4eab-9d55-6004e07a3454&quot;,&quot;fd1d1e93-58a2-4a17-af7a-65e8e3fba673&quot;,&quot;d35acc4f-7ee5-4e4a-bb55-c9795e912203&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:127,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;title&quot;:&quot;publish/subscribe test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/pubsub-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/pubsub-server.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae5cbbf0-cf02-4570-a0ef-b0a633331f6e&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22cfa457-f374-4807-940a-47b86e914adf&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b51b21b-8824-4aec-907b-ce013d14c799&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69f86b1c-a9a0-4611-b1e1-7a043582641d&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ZERO when a message is published to a channel without subscribers&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should return ZERO when a message is published to a channel without subscribers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;publish&#x27;, &#x27;channel&#x27;, &#x27;Hollow world!&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e1d2eda-8ec1-44f7-8343-78da4a92f5be&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should unsubscribe from a channel that it is not subscribed to&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should unsubscribe from a channel that it is not subscribed to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Sound&#x27;s weird, but this is observed behavior\n        response = yield common_test_1.sendCommand(client, [&#x27;unsubscribe&#x27;, &#x27;some channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;unsubscribe&#x27;, &#x27;some channel&#x27;, 0]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e37500e-f93b-4602-93bf-d966b15586c2&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should subscribe to an arbitrary channel&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should subscribe to an arbitrary channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;subscribe&#x27;, &#x27;arbitrary channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;subscribe&#x27;, &#x27;arbitrary channel&#x27;, 1]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9298628c-2171-4d8b-a8fb-78319cd2be8d&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the number of currently subscribed channels&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should report the number of currently subscribed channels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;subscribe&#x27;, &#x27;another channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;subscribe&#x27;, &#x27;another channel&#x27;, 2]);\n        response = yield common_test_1.sendCommand(client, [&#x27;unsubscribe&#x27;, &#x27;another channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;unsubscribe&#x27;, &#x27;another channel&#x27;, 1]);\n        response = yield common_test_1.sendCommand(client, [&#x27;unsubscribe&#x27;, &#x27;arbitrary channel&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;unsubscribe&#x27;, &#x27;arbitrary channel&#x27;, 0]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9bb654e-d382-40aa-a340-3d922d20ce0e&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should receive separate subscribe responses and then notifications on subscribed channels&quot;,&quot;fullTitle&quot;:&quot;publish/subscribe test should receive separate subscribe responses and then notifications on subscribed channels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1509,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let counter = 0;\nconst newClient1 = new net.Socket();\nnewClient1.on(&#x27;data&#x27;, (data) =&gt; {\n    // console.log(`Counter is ${counter}`);\n    // console.log(`\\n***Listener ${counter} received ${data.toString(&#x27;utf8&#x27;)}\\n`);\n    switch (counter) {\n        case 0:\n            chai_1.expect(data.toString(&#x27;utf8&#x27;)).to.equal(`*3\\r\\n$9\\r\\nsubscribe\\r\\n$3\\r\\none\\r\\n:1\\r\\n*3\\r\\n$9\\r\\nsubscribe\\r\\n$3\\r\\ntwo\\r\\n:2\\r\\n*3\\r\\n$9\\r\\nsubscribe\\r\\n$5\\r\\nthree\\r\\n:3\\r\\n`);\n            break;\n        case 1:\n            chai_1.expect(data.toString(&#x27;utf8&#x27;)).to.equal(`*3\\r\\n$7\\r\\nmessage\\r\\n$3\\r\\ntwo\\r\\n$12\\r\\nmessage to 2\\r\\n`);\n            done();\n            break;\n    }\n    counter++;\n});\ncommon_test_1.sendCommand(newClient1, [&#x27;subscribe&#x27;, &#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;])\n    .then((rsp) =&gt; {\n    //        console.log(`RESPONSE ${JSON.stringify(rsp)}`);\n    // Responses are sent in separate messages\n    chai_1.expect(rsp).to.eql([&#x27;subscribe&#x27;, &#x27;one&#x27;, 1]);\n    const anotherClient = new net.Socket();\n    // wait a tick so that the published message is received separately\n    setTimeout(() =&gt; {\n        common_test_1.sendCommand(anotherClient, [&#x27;publish&#x27;, &#x27;two&#x27;, &#x27;message to 2&#x27;])\n            .then((rsp) =&gt; {\n            chai_1.expect(rsp).to.equal(1);\n        });\n    }, 1500);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85f916ba-3d8b-4991-91ff-4fbbcdcf29ce&quot;,&quot;parentUUID&quot;:&quot;9269003b-da2d-4c82-a6fe-8d4778dedb72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e1d2eda-8ec1-44f7-8343-78da4a92f5be&quot;,&quot;8e37500e-f93b-4602-93bf-d966b15586c2&quot;,&quot;9298628c-2171-4d8b-a8fb-78319cd2be8d&quot;,&quot;e9bb654e-d382-40aa-a340-3d922d20ce0e&quot;,&quot;85f916ba-3d8b-4991-91ff-4fbbcdcf29ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1517,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;92e04892-fcea-4dac-977a-6a2ba6d1b18d&quot;,&quot;title&quot;:&quot;resp-server test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/resp-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/resp-server.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0277186-bab5-42b9-97ff-ce7b9be7ccb9&quot;,&quot;parentUUID&quot;:&quot;92e04892-fcea-4dac-977a-6a2ba6d1b18d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6893d9c6-bd27-457b-967b-3589f1cfbd53&quot;,&quot;parentUUID&quot;:&quot;92e04892-fcea-4dac-977a-6a2ba6d1b18d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6f4b6268-c18d-4400-89a5-c1e8f92f3054&quot;,&quot;title&quot;:&quot;server start and stop tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/resp-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/resp-server.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should instantiate&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should instantiate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            respServer = new resp_server_1.RespServer();\n            chai_1.expect(respServer.constructor.name).to.equal(&#x27;RespServer&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5931f7f8-582c-4403-931c-89a928c97b3c&quot;,&quot;parentUUID&quot;:&quot;6f4b6268-c18d-4400-89a5-c1e8f92f3054&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit \&quot;ready\&quot; on startup&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should emit \&quot;ready\&quot; on startup&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a8853e5-8517-47af-a622-bc57df586f88&quot;,&quot;parentUUID&quot;:&quot;6f4b6268-c18d-4400-89a5-c1e8f92f3054&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit \&quot;closed\&quot; on shutdown&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should emit \&quot;closed\&quot; on shutdown&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer.on(&#x27;closed&#x27;, () =&gt; {\n    done();\n});\nrespServer.stop();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;510c83bc-3a9c-4dfd-9e1d-80d5ac50a656&quot;,&quot;parentUUID&quot;:&quot;6f4b6268-c18d-4400-89a5-c1e8f92f3054&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should accept connections on default ${env.REDIS_HOST}:${env.REDIS_PORT}&quot;,&quot;fullTitle&quot;:&quot;resp-server test server start and stop tests should accept connections on default ${env.REDIS_HOST}:${env.REDIS_PORT}&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    const client = new net.Socket();\n    client.on(&#x27;ready&#x27;, (data) =&gt; {\n        respServer.on(&#x27;closed&#x27;, () =&gt; {\n            done();\n        });\n        respServer.stop();\n    });\n    client.on(&#x27;connect&#x27;, (data) =&gt; {\n    });\n    client.on(&#x27;error&#x27;, (err) =&gt; {\n        assert_1.fail(`Unexpected error during connection`, err.stack);\n    });\n    client.connect(Number(process.env.REDIS_PORT || 6379), process.env.REDIS_HOST || &#x27;localhost&#x27;, () =&gt; {\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c44b3ea5-c74f-41e7-bef9-88fd0ea592b9&quot;,&quot;parentUUID&quot;:&quot;6f4b6268-c18d-4400-89a5-c1e8f92f3054&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5931f7f8-582c-4403-931c-89a928c97b3c&quot;,&quot;7a8853e5-8517-47af-a622-bc57df586f88&quot;,&quot;510c83bc-3a9c-4dfd-9e1d-80d5ac50a656&quot;,&quot;c44b3ea5-c74f-41e7-bef9-88fd0ea592b9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;title&quot;:&quot;other server tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/server/resp-server.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/server/resp-server.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    client = new net.Socket();\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1311588e-75de-4c04-955a-bf2ed3bad254&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            yield respServer.stop();\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a9565ec-8d8b-496b-8e3c-b691434dbffb&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should respond properly to the \&quot;ping\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond properly to the \&quot;ping\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;ping&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;PONG&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42937e44-6d0f-4884-bcd3-45df03e3ac52&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond properly to the \&quot;echo\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond properly to the \&quot;echo\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;echo&#x27;, &#x27;test&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;test&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;392ebf63-3673-46ab-b7c1-0709875cd2f6&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with \&quot;ERR\&quot; when echo command has no parameters&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond with \&quot;ERR\&quot; when echo command has no parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            // Note that &#x27;ReplyError:&#x27; is supplied by the redis parser, NOT by the code under test\n            const response = yield common_test_1.sendCommand(client, [&#x27;echo&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;echo\\&#x27; command&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84dfc01c-38d4-4da1-b85d-f1f732a4259d&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with \&quot;ERR\&quot; when echo command has two or more parameters&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond with \&quot;ERR\&quot; when echo command has two or more parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;echo&#x27;, &#x27;one&#x27;, &#x27;two&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;echo\\&#x27; command&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c8f51ac-191c-4639-88f4-9bf14a8f942a&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond to the \&quot;time\&quot; command with an array of two strings&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond to the \&quot;time\&quot; command with an array of two strings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Note: we use hrtime which should already do what we need so we don&#x27;t validate\ncommon_test_1.sendCommand(client, [&#x27;time&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.be.an(&#x27;array&#x27;);\n    chai_1.expect(response.length).to.equal(2);\n    chai_1.expect(parseInt(response[0], 10)).to.be.greaterThan(0);\n    chai_1.expect(parseInt(response[1], 10)).to.be.greaterThan(0);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cce874f-69b7-41c4-a558-ad9306e61041&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond with nulCommand when the command is not known&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond with nulCommand when the command is not known&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;felix&#x27;, &#x27;the&#x27;, &#x27;cat&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.match(/^ReplyError: ERR unknown command.*/);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b94689a-8e76-42dd-bd30-96cfb2491599&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement the info command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should implement the info command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield common_test_1.sendCommand(client, [&#x27;info&#x27;]);\n            chai_1.expect(response).to.match(/^# server\\r\\nredis_version:.*/im);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e7f8243-fcc1-4ba3-b963-6f9ae5cf0fee&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement the SET command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should implement the SET command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;SET&#x27;, &#x27;this&#x27;, &#x27;that&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    common_test_1.sendCommand(client, [&#x27;GET&#x27;, &#x27;this&#x27;])\n        .then((getresponse) =&gt; {\n        chai_1.expect(getresponse).to.equal(&#x27;that&#x27;);\n        done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc40bfd0-8d88-4bf7-99fd-af236a5877f6&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nil string when GET is invoked with unknown parameters&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should return nil string when GET is invoked with unknown parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;GET&#x27;, &#x27; &#x27;])\n    .then((getresponse) =&gt; {\n    chai_1.expect(getresponse).to.equal(null);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ab81ce6-0cf3-4ed9-b7c8-df4dacf6bc93&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should implement the info command with a known parameter&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should implement the info command with a known parameter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;common_test_1.sendCommand(client, [&#x27;info&#x27;, &#x27;memory&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.match(/^# memory.*/mi);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;328236dd-f2fc-4895-911c-df39c34abf0d&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not respond when info is called with an unknown paramter&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should not respond when info is called with an unknown paramter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield common_test_1.sendCommand(client, [&#x27;info&#x27;, &#x27;juicy&#x27;]);\n            // Don&#x27;t know how to send an empty - non-null string response yet\n            chai_1.expect(String(response).trim()).to.equal(&#x27;&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80f97446-7b20-4604-9bc6-7bda5e9f803e&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the number of keys in the current database&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should report the number of keys in the current database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n            chai_1.expect(response).to.be.greaterThan(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d394f560-51fe-4d88-bf7a-2aefd043ebca&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support the \&quot;select\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should support the \&quot;select\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;12&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;dbsize&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a35a867f-5dd9-4932-83fd-adaa1266ee71&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow us to select an invalid database&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should not allow us to select an invalid database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;one&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR invalid DB index&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;-12&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR DB index is out of range&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;22&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR DB index is out of range&#x27;);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a645dfd-583e-494c-8e8e-f226e45f0dcb&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respond properly to the \&quot;quit\&quot; command&quot;,&quot;fullTitle&quot;:&quot;resp-server test other server tests should respond properly to the \&quot;quit\&quot; command&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Note however that the server does not disconnect us.  That is the client&#x27;s job\ncommon_test_1.sendCommand(client, [&#x27;quit&#x27;])\n    .then((response) =&gt; {\n    chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd531493-f1e8-4333-8e60-6d7920eb9e0f&quot;,&quot;parentUUID&quot;:&quot;be860caf-ce7f-4a07-9b54-50b1afab5b7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42937e44-6d0f-4884-bcd3-45df03e3ac52&quot;,&quot;392ebf63-3673-46ab-b7c1-0709875cd2f6&quot;,&quot;84dfc01c-38d4-4da1-b85d-f1f732a4259d&quot;,&quot;8c8f51ac-191c-4639-88f4-9bf14a8f942a&quot;,&quot;4cce874f-69b7-41c4-a558-ad9306e61041&quot;,&quot;6b94689a-8e76-42dd-bd30-96cfb2491599&quot;,&quot;1e7f8243-fcc1-4ba3-b963-6f9ae5cf0fee&quot;,&quot;dc40bfd0-8d88-4bf7-99fd-af236a5877f6&quot;,&quot;4ab81ce6-0cf3-4ed9-b7c8-df4dacf6bc93&quot;,&quot;328236dd-f2fc-4895-911c-df39c34abf0d&quot;,&quot;80f97446-7b20-4604-9bc6-7bda5e9f803e&quot;,&quot;d394f560-51fe-4d88-bf7a-2aefd043ebca&quot;,&quot;a35a867f-5dd9-4932-83fd-adaa1266ee71&quot;,&quot;3a645dfd-583e-494c-8e8e-f226e45f0dcb&quot;,&quot;dd531493-f1e8-4333-8e60-6d7920eb9e0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;title&quot;:&quot;sdiff-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sdiff-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sdiff-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8453035-7e9a-4401-a1b3-8d3b160df5c8&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6c4ffda-a25e-4268-8846-c69e0114d60e&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;684a214a-024c-477c-bbc8-c217106037b8&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01ee2122-2f00-48e3-813c-f7f9643d25c7&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return EMPTY ARRAY when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should return EMPTY ARRAY when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc9abed5-83f2-4130-beb1-718f8ad5762d&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return all members of source set when the destination set does not exist&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should return all members of source set when the destination set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;key1&#x27;, &#x27;empty&#x27;]);\n        // REDIS does not guarantee order of the set\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f874068-0c44-462f-9ec0-97656c8a867d&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a proper DIFF of one or more sets&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should return a proper DIFF of one or more sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key3&#x27;, &#x27;a&#x27;, &#x27;c&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;b&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b84e49b-99ca-420b-8289-69fc3d906c74&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore non-list keys&quot;,&quot;fullTitle&quot;:&quot;sdiff-command test should ignore non-list keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;list&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sdiff&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;b&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3db44bf4-639c-4dde-b034-6080cd62724c&quot;,&quot;parentUUID&quot;:&quot;6ad45969-6305-40cd-ad1e-06693b806e4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc9abed5-83f2-4130-beb1-718f8ad5762d&quot;,&quot;2f874068-0c44-462f-9ec0-97656c8a867d&quot;,&quot;8b84e49b-99ca-420b-8289-69fc3d906c74&quot;,&quot;3db44bf4-639c-4dde-b034-6080cd62724c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;title&quot;:&quot;set commands test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/set-commands.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/set-commands.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd86190c-76a2-4b2e-98f9-850b42ed2981&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db03da32-b640-4ea3-8ab9-c66c4d7b5ddd&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3845a60c-46ce-42d1-b482-55740ec71d42&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set commands test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;059078ac-f251-48c2-a9f4-00be1254b895&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ZERO when certain commands are applied against key that doesn&#x27;t exist&quot;,&quot;fullTitle&quot;:&quot;set commands test should return ZERO when certain commands are applied against key that doesn&#x27;t exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;scard&#x27;, &#x27;doesnotexist&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;doesnotexist&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;704f9e6d-4a8b-4d31-a415-4af049a824ef&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an appropriate error when a \&quot;set\&quot; command is applied to a non-set key&quot;,&quot;fullTitle&quot;:&quot;set commands test should throw an appropriate error when a \&quot;set\&quot; command is applied to a non-set key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;wrongtype&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;wrongtype&#x27;, &#x27;set&#x27;]);\n        chai_1.expect(response).to.equal(WRONG_TYPE);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6a25326-0d87-42c9-acef-06c9934d503c&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a new key when sadd is called correctly&quot;,&quot;fullTitle&quot;:&quot;set commands test should create a new key when sadd is called correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;skey&#x27;, &#x27;untest&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;skey&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab9f2e26-d0ac-4520-95d9-90f0a68ca0c5&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only report the number of added keys&quot;,&quot;fullTitle&quot;:&quot;set commands test should only report the number of added keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;skey&#x27;, &#x27;untest&#x27;, &#x27;test2&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;skey&#x27;]);\n        chai_1.expect(response).to.be.an(&#x27;array&#x27;);\n        // Keys are returned in reverse order? - No.\n        // smembers can return a list in any order\n        chai_1.expect(response.length).to.equal(2);\n        chai_1.expect(response.indexOf(&#x27;test2&#x27;)).to.be.greaterThan(-1);\n        chai_1.expect(response.indexOf(&#x27;untest&#x27;)).to.be.greaterThan(-1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b436d21-d226-4d90-976a-45c24e709458&quot;,&quot;parentUUID&quot;:&quot;d694dc54-112f-4612-9223-69d3e54c266d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a33bb316-f6a3-4177-9f69-6faec93fe78e&quot;,&quot;title&quot;:&quot;smove, sismember, and scard tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/set-commands.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/set-commands.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should do nothing when smove is called with a source key that does not exist&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should do nothing when smove is called with a source key that does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;smove&#x27;, &#x27;fromskey&#x27;, &#x27;toskey&#x27;, &#x27;nothing&#x27;]);\n            chai_1.expect(response).to.equal(0);\n            response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;fromskey&#x27;, &#x27;toskey&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4a59bbd-0d2f-4d8c-b403-6e1f99dc06ce&quot;,&quot;parentUUID&quot;:&quot;a33bb316-f6a3-4177-9f69-6faec93fe78e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should move a key from one set to another (and create the target if necessary)&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should move a key from one set to another (and create the target if necessary)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.equal(0);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.eql([]);\n            response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, uniqueKey, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(3);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, uniqueKey]);\n            // key order is undefined in redis\n            chai_1.expect(response.length).to.equal(3);\n            chai_1.expect(response.indexOf(&#x27;key3&#x27;)).to.be.greaterThan(-1);\n            chai_1.expect(response.indexOf(&#x27;key2&#x27;)).to.be.greaterThan(-1);\n            chai_1.expect(response.indexOf(&#x27;key1&#x27;)).to.be.greaterThan(-1);\n            response = yield common_test_1.sendCommand(client, [&#x27;smove&#x27;, uniqueKey, &#x27;tonewskey&#x27;, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;tonewskey&#x27;, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, uniqueKey]);\n            // key order, again\n            chai_1.expect(response.length).to.equal(2);\n            chai_1.expect(response.indexOf(&#x27;key3&#x27;)).to.be.greaterThan(-1);\n            chai_1.expect(response.indexOf(&#x27;key1&#x27;)).to.be.greaterThan(-1);\n            response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.eql([&#x27;key2&#x27;]);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;117fd55c-2202-4b01-b822-5a385bec1713&quot;,&quot;parentUUID&quot;:&quot;a33bb316-f6a3-4177-9f69-6faec93fe78e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report cardinality of a set&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should report cardinality of a set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;scard&#x27;, uniqueKey]);\n            chai_1.expect(response).to.equal(2);\n            response = yield common_test_1.sendCommand(client, [&#x27;scard&#x27;, &#x27;tonewskey&#x27;]);\n            chai_1.expect(response).to.equal(1);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f18e09e2-d9dd-4c3a-acea-6bc183d05806&quot;,&quot;parentUUID&quot;:&quot;a33bb316-f6a3-4177-9f69-6faec93fe78e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report ismember true/false&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should report ismember true/false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            let response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;tonewskey&#x27;, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, &#x27;tonewskey&#x27;, &#x27;key1&#x27;]);\n            chai_1.expect(response).to.equal(0);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, uniqueKey, &#x27;key1&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, uniqueKey, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, uniqueKey, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;166be3fe-d0e3-4565-a360-dfc1fd1d0085&quot;,&quot;parentUUID&quot;:&quot;a33bb316-f6a3-4177-9f69-6faec93fe78e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only remove the source element if the destination element already exists&quot;,&quot;fullTitle&quot;:&quot;set commands test smove, sismember, and scard tests should only remove the source element if the destination element already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n            const newkey = `move-unique-${new Date().getTime()}`;\n            const newToKey = `move-new-to-key`;\n            let response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, newkey, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(3);\n            response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, newToKey, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n            chai_1.expect(response).to.equal(3);\n            response = yield common_test_1.sendCommand(client, [&#x27;smove&#x27;, newkey, newToKey, &#x27;key2&#x27;]);\n            // Inconsistent with redis documentation?\n            chai_1.expect(response).to.equal(1);\n            response = yield common_test_1.sendCommand(client, [&#x27;sismember&#x27;, newkey, &#x27;key2&#x27;]);\n            chai_1.expect(response).to.equal(0);\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c459fd81-1b19-4d9e-abd7-d42df464f998&quot;,&quot;parentUUID&quot;:&quot;a33bb316-f6a3-4177-9f69-6faec93fe78e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4a59bbd-0d2f-4d8c-b403-6e1f99dc06ce&quot;,&quot;117fd55c-2202-4b01-b822-5a385bec1713&quot;,&quot;f18e09e2-d9dd-4c3a-acea-6bc183d05806&quot;,&quot;166be3fe-d0e3-4565-a360-dfc1fd1d0085&quot;,&quot;c459fd81-1b19-4d9e-abd7-d42df464f998&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:35,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;704f9e6d-4a8b-4d31-a415-4af049a824ef&quot;,&quot;a6a25326-0d87-42c9-acef-06c9934d503c&quot;,&quot;ab9f2e26-d0ac-4520-95d9-90f0a68ca0c5&quot;,&quot;3b436d21-d226-4d90-976a-45c24e709458&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;title&quot;:&quot;sinter-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sinter-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sinter-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86fd6ee1-18b5-45e2-92f3-c18c3caf06d9&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a84a93d4-c3b9-44b2-85df-2f0ee2b3edfb&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab1b684f-2734-470e-8207-b60b25262e34&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinter-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67448095-cc66-4692-9d5d-7fd842f6f1ec&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return EMPTY SET when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should return EMPTY SET when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a6ec835-d72c-4442-8961-58dc7906a9c1&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return EMPTY SET when any other set does not exist&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should return EMPTY SET when any other set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;empty&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3b41f6b-f7a3-47db-ac04-2e39d5e82862&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when one of the keys is not a set&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should fail when one of the keys is not a set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;skey1&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;skey1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56e7c3f7-bc33-4ea2-a38f-11eb5fba6e2b&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the intersection of one or more sets&quot;,&quot;fullTitle&quot;:&quot;sinter-command test should return the intersection of one or more sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key3&#x27;, &#x27;a&#x27;, &#x27;c&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;a&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinter&#x27;, &#x27;key2&#x27;, &#x27;key1&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.length).to.equal(2);\n        // Redis does not guarantee the order of a set\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;c&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25a8e0a6-60d5-419b-8158-84f51efc9fe3&quot;,&quot;parentUUID&quot;:&quot;b8f34900-4d24-4e83-9f5d-e6692114ff23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a6ec835-d72c-4442-8961-58dc7906a9c1&quot;,&quot;f3b41f6b-f7a3-47db-ac04-2e39d5e82862&quot;,&quot;56e7c3f7-bc33-4ea2-a38f-11eb5fba6e2b&quot;,&quot;25a8e0a6-60d5-419b-8158-84f51efc9fe3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;title&quot;:&quot;sinterstore-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sinterstore-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sinterstore-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8b121e2-1805-44aa-a102-5b444da63557&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4289d76d-da33-485e-a8e9-b2bcad31c60e&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;506d7d67-6012-45ac-8ed8-38df249ab689&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1127dec2-58d7-4238-be6c-266d6517610b&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require a minimum of two parameters&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should require a minimum of two parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.match(/ERR wrong number of arguments for \\&#x27;sinterstore\\&#x27; command/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef9cc1c5-3756-448b-a355-0e4a90563b98&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return ZERO when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should return ZERO when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;dest&#x27;, &#x27;src&#x27;]);\n        chai_1.expect(response).to.eql(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa51f3ff-ea1a-4445-b628-abe6462e6cc2&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overwrite the destination and return the number of keys copied&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should overwrite the destination and return the number of keys copied&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key3&#x27;, &#x27;some text value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;key3&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;c&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ce0794a-5f68-41ac-8a4c-e911a97c06b4&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when one of the keys is not a set&quot;,&quot;fullTitle&quot;:&quot;sinterstore-command test should fail when one of the keys is not a set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;1&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;key1&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;skey1&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sinterstore&#x27;, &#x27;key1&#x27;, &#x27;skey1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89a6f66c-c20f-4ecd-b3d4-fec3aab1b6c0&quot;,&quot;parentUUID&quot;:&quot;aa5667d7-c6e4-44e2-8ec6-a5d662715978&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef9cc1c5-3756-448b-a355-0e4a90563b98&quot;,&quot;aa51f3ff-ea1a-4445-b628-abe6462e6cc2&quot;,&quot;4ce0794a-5f68-41ac-8a4c-e911a97c06b4&quot;,&quot;89a6f66c-c20f-4ecd-b3d4-fec3aab1b6c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;title&quot;:&quot;srem-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/srem-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/srem-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0b88599-cc58-45ed-a5cd-abc1f6248aee&quot;,&quot;parentUUID&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f394b685-b73a-434e-8c08-8e29c5ee8f97&quot;,&quot;parentUUID&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b08f363-d25a-4247-bbd2-01b44a41cec0&quot;,&quot;parentUUID&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;srem-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2959d97e-27d6-4630-8b56-4b37ea7a193c&quot;,&quot;parentUUID&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 0 when the set does not exist&quot;,&quot;fullTitle&quot;:&quot;srem-command test should return 0 when the set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;srem&#x27;, &#x27;set&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3affa36c-7091-4952-8255-80a757b0778d&quot;,&quot;parentUUID&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return only the number of existing keys that are removed&quot;,&quot;fullTitle&quot;:&quot;srem-command test should return only the number of existing keys that are removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;set&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;, &#x27;key4&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;srem&#x27;, &#x27;set&#x27;, &#x27;key2&#x27;, &#x27;not&#x27;, &#x27;here&#x27;, &#x27;today&#x27;, &#x27;key4&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;set&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;key1&#x27;, &#x27;key3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93c6541d-98ed-4fca-aee4-305a3f58711f&quot;,&quot;parentUUID&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove an empty set when all members are removed&quot;,&quot;fullTitle&quot;:&quot;srem-command test should remove an empty set when all members are removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;srem&#x27;, &#x27;set&#x27;, &#x27;key1&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;set&#x27;]);\n        chai_1.expect(response).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2426b0b1-c161-48f6-9d67-535ad09d6c0d&quot;,&quot;parentUUID&quot;:&quot;012d6103-49be-40e3-b6ed-f0f5e47d9460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3affa36c-7091-4952-8255-80a757b0778d&quot;,&quot;93c6541d-98ed-4fca-aee4-305a3f58711f&quot;,&quot;2426b0b1-c161-48f6-9d67-535ad09d6c0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;title&quot;:&quot;sunion-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sunion-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sunion-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6388e4f2-5177-4fa3-97ab-0f464cfa6cab&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6274a6d9-b1bc-4fec-a2c8-e0641a3f7a6f&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f989bc16-465b-4fd4-b66f-b32a442b993a&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunion-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f392fc1-6c04-4305-bf3c-3006db7640b4&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return EMPTY SET when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should return EMPTY SET when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;352bce0b-f746-4471-b360-261eb37c99b5&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the union of a single set&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should return the union of a single set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n        chai_1.expect(response).to.equal(4);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;key1&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4624b2aa-4f19-412f-81ad-516ece759ede&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail when sunion requested againt non-set keys&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should fail when sunion requested againt non-set keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;string-key&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;key1&#x27;, &#x27;string-key&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed49e0b6-40a0-4a1e-b430-77fd6b3e55d2&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the union of multiple sets&quot;,&quot;fullTitle&quot;:&quot;sunion-command test should return the union of multiple sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key3&#x27;, &#x27;a&#x27;, &#x27;c&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunion&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7e272ee-8c5b-4c39-bd47-5a97d62695f9&quot;,&quot;parentUUID&quot;:&quot;c26e00cf-f837-444f-ac1a-fbe1eb19ffe6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;352bce0b-f746-4471-b360-261eb37c99b5&quot;,&quot;4624b2aa-4f19-412f-81ad-516ece759ede&quot;,&quot;ed49e0b6-40a0-4a1e-b430-77fd6b3e55d2&quot;,&quot;a7e272ee-8c5b-4c39-bd47-5a97d62695f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;title&quot;:&quot;sunionstore-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/set/sunionstore-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/set/sunionstore-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fde576a7-2a8f-47ad-b5a7-f48219517325&quot;,&quot;parentUUID&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e09fc5d2-9b9a-4532-b62a-add0bfb3243f&quot;,&quot;parentUUID&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97e64e46-0348-4925-aa1f-26bef9382e03&quot;,&quot;parentUUID&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e77bd97-b06d-4773-97fd-eb7adb5253ac&quot;,&quot;parentUUID&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require a minimum of two parameters&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test should require a minimum of two parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sunionstore&#x27;, &#x27;ary&#x27;]);\n        chai_1.expect(response).to.match(/ERR wrong number of arguments for \\&#x27;sunionstore\\&#x27; command/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;866fd7b5-f880-4a76-a328-1898d407a90d&quot;,&quot;parentUUID&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return ZERO when the source set does not exist&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test should return ZERO when the source set does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;sunionstore&#x27;, &#x27;dest&#x27;, &#x27;src&#x27;]);\n        chai_1.expect(response).to.eql(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02202fe5-ea24-4e54-92e0-efcf52c52e38&quot;,&quot;parentUUID&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overwrite the destination and return the number of keys copied&quot;,&quot;fullTitle&quot;:&quot;sunionstore-command test should overwrite the destination and return the number of keys copied&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key1&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;sadd&#x27;, &#x27;key2&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;key3&#x27;, &#x27;some text value&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;sunionstore&#x27;, &#x27;key3&#x27;, &#x27;key1&#x27;, &#x27;key2&#x27;]);\n        chai_1.expect(response).to.equal(5);\n        response = yield common_test_1.sendCommand(client, [&#x27;smembers&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response.sort()).to.eql([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29754a27-bac1-4582-bd8d-dfc0936feb21&quot;,&quot;parentUUID&quot;:&quot;ffa52480-a5bb-475b-abc4-15fae4c35c35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;866fd7b5-f880-4a76-a328-1898d407a90d&quot;,&quot;02202fe5-ea24-4e54-92e0-efcf52c52e38&quot;,&quot;29754a27-bac1-4582-bd8d-dfc0936feb21&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;65b49b15-27cc-4111-9e63-0ef7aec88652&quot;,&quot;title&quot;:&quot;z-command tests&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/z-commands.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/z-commands.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39a0f2b8-e383-4e0c-b36a-36714c667f0d&quot;,&quot;parentUUID&quot;:&quot;65b49b15-27cc-4111-9e63-0ef7aec88652&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0ab93ce-cfa2-40fc-9d44-837359c22f70&quot;,&quot;parentUUID&quot;:&quot;65b49b15-27cc-4111-9e63-0ef7aec88652&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ee4a9b4-8ade-47ab-a15b-36aa557c7a12&quot;,&quot;parentUUID&quot;:&quot;65b49b15-27cc-4111-9e63-0ef7aec88652&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;z-command tests \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bec83cc9-0912-4e04-b304-0ba86a0a2c7e&quot;,&quot;parentUUID&quot;:&quot;65b49b15-27cc-4111-9e63-0ef7aec88652&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;z-command tests should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueZkey = `key${new Date().getTime()}`;\n        let response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;testkey&#x27;, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER)]);\n        chai_1.expect(response).to.eql([]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;testkey&#x27;, &#x27;14&#x27;, &#x27;__proto__&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;8&#x27;, &#x27;5a600e16&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;9&#x27;, &#x27;5a600e17&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;10&#x27;, &#x27;5a600e18&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcard&#x27;, uniqueZkey]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;5a600e16&#x27;, &#x27;8&#x27;,\n            &#x27;5a600e17&#x27;, &#x27;9&#x27;,\n            &#x27;5a600e18&#x27;, &#x27;10&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;12&#x27;, &#x27;5a600e17&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcount&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER)]);\n        chai_1.expect(response).to.equal(3);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER)]);\n        chai_1.expect(response.length).to.equal(3);\n        chai_1.expect(response).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;5a600e16&#x27;, &#x27;8&#x27;, &#x27;5a600e18&#x27;, &#x27;10&#x27;, &#x27;5a600e17&#x27;, &#x27;12&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;type&#x27;, uniqueZkey]);\n        chai_1.expect(response).to.equal(&#x27;zset&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcount&#x27;, uniqueZkey, &#x27;-Infinity&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;zcount&#x27;, uniqueZkey, &#x27;Negative One&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR min or max is not a float&#x27;);\n        // report syntax error\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;with Scores&#x27;]);\n        chai_1.expect(response).to.eql(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(&#x27;Number.MIN_SAFE_INTEGER&#x27;), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql(&#x27;ReplyError: ERR value is not an integer or out of range&#x27;);\n        // Remove members without removing keys\n        response = yield common_test_1.sendCommand(client, [&#x27;zrem&#x27;, uniqueZkey, &#x27;does not exist&#x27;, &#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        // Unexpectedly, redis removes the key when the last element is removed\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, uniqueZkey]);\n        console.log(`searched for ${uniqueZkey}`);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9821f533-c7a3-4723-8457-5806ce1d4ef2&quot;,&quot;parentUUID&quot;:&quot;65b49b15-27cc-4111-9e63-0ef7aec88652&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;z-command tests should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueZkey = `incrkey${new Date().getTime()}`;\n        let response;\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;1&#x27;, &#x27;first&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;2&#x27;, &#x27;second&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;3&#x27;, &#x27;third&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, uniqueZkey, &#x27;4&#x27;, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.eql(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, &#x27;2&#x27;, &#x27;first&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;3&#x27;);\n        // Validate zscore\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;first&#x27;]);\n        // expect(response).to.equal(&#x27;3&#x27;);\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;second&#x27;]);\n        // expect(response).to.equal(&#x27;2&#x27;);\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;third&#x27;]);\n        // expect(response).to.equal(&#x27;3&#x27;);\n        // response = await sendCommand(client, [&#x27;zscore&#x27;, uniqueZkey, &#x27;fourth&#x27;]);\n        // expect(response).to.equal(&#x27;4&#x27;);\n        //\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;first&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;second&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;third&#x27;]);\n        chai_1.expect(response).to.equal(2);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, uniqueZkey, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.equal(3);\n        // expect(response).to.match(/^ReplyError: ERR unknown command.*/);\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, &#x27;-20&#x27;, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;-16&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, `-${Number.MIN_SAFE_INTEGER + 1}.${Number.MAX_SAFE_INTEGER}`, &#x27;fourth&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not a valid float&#x27;);\n        // Should create a key if it doesn&#x27;t exist\n        response = yield common_test_1.sendCommand(client, [&#x27;zincrby&#x27;, uniqueZkey, &#x27;-20&#x27;, &#x27;fifth&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;-20&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, uniqueZkey, String(Number.MIN_SAFE_INTEGER), String(Number.MAX_SAFE_INTEGER), &#x27;withScores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;fifth&#x27;, &#x27;-20&#x27;, &#x27;fourth&#x27;, &#x27;-16&#x27;, &#x27;second&#x27;, &#x27;2&#x27;, &#x27;first&#x27;, &#x27;3&#x27;, &#x27;third&#x27;, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;601ebee6-32d4-467a-adfb-4599f06496c7&quot;,&quot;parentUUID&quot;:&quot;65b49b15-27cc-4111-9e63-0ef7aec88652&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9821f533-c7a3-4723-8457-5806ce1d4ef2&quot;,&quot;601ebee6-32d4-467a-adfb-4599f06496c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;title&quot;:&quot;zadd command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zadd-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zadd-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79cb0dfb-9359-4097-8ff6-488d84112e4c&quot;,&quot;parentUUID&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b9a91db-ade3-4077-9ae5-75e279c78ec3&quot;,&quot;parentUUID&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb07749a-7549-4c48-930c-9a56144cbf8e&quot;,&quot;parentUUID&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zadd command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f7d40aa-5f7a-49aa-89de-e3a92d84fa6b&quot;,&quot;parentUUID&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require at least 3 parameters&quot;,&quot;fullTitle&quot;:&quot;zadd command test should require at least 3 parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;zadd\\&#x27; command&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;zadd\\&#x27; command&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR wrong number of arguments for \\&#x27;zadd\\&#x27; command&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ceaafab-c9af-4f09-9087-f219aa1a8651&quot;,&quot;parentUUID&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject even parameter counts&quot;,&quot;fullTitle&quot;:&quot;zadd command test should reject even parameter counts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;, &#x27;456&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;, &#x27;456&#x27;, &#x27;another&#x27;, &#x27;765&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;123&#x27;, &#x27;something&#x27;, &#x27;456&#x27;, &#x27;another&#x27;, &#x27;765&#x27;, &#x27;test&#x27;]);\n        // The \&quot;something\&quot; key should already exist so we only count 2 new fields\n        chai_1.expect(response).to.equal(2);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3fa46d4-4b80-4b3c-b404-fc0943a73205&quot;,&quot;parentUUID&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject an attempt to store non-floatish rankings&quot;,&quot;fullTitle&quot;:&quot;zadd command test should reject an attempt to store non-floatish rankings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zkey&#x27;, &#x27;__data__&#x27;, &#x27;something&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR value is not a valid float&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e10855f-898d-460b-b76d-41745235ef9e&quot;,&quot;parentUUID&quot;:&quot;a4293b8c-3a1e-454e-81e4-101d50cf5bb9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ceaafab-c9af-4f09-9087-f219aa1a8651&quot;,&quot;f3fa46d4-4b80-4b3c-b404-fc0943a73205&quot;,&quot;1e10855f-898d-460b-b76d-41745235ef9e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;8468de25-7132-48eb-8ea8-e1d46bcaf293&quot;,&quot;title&quot;:&quot;zrange-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zrange-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zrange-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f492b4cd-840d-4e75-aa52-9e842cc74a33&quot;,&quot;parentUUID&quot;:&quot;8468de25-7132-48eb-8ea8-e1d46bcaf293&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76d6679e-e27c-4c63-9f62-1e800e9e39ba&quot;,&quot;parentUUID&quot;:&quot;8468de25-7132-48eb-8ea8-e1d46bcaf293&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0194969a-ab7d-45f8-8ef3-d8a34da27b41&quot;,&quot;parentUUID&quot;:&quot;8468de25-7132-48eb-8ea8-e1d46bcaf293&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrange-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5eaae830-fd44-455f-a274-ccc4f3b8aebe&quot;,&quot;parentUUID&quot;:&quot;8468de25-7132-48eb-8ea8-e1d46bcaf293&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should reproduce the redis documentation examples&quot;,&quot;fullTitle&quot;:&quot;zrange-command test should reproduce the redis documentation examples&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;3&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;three&#x27;]);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;-2&#x27;, &#x27;-1&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;two&#x27;, &#x27;three&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91818be1-06e8-4663-a93c-64cec48f919a&quot;,&quot;parentUUID&quot;:&quot;8468de25-7132-48eb-8ea8-e1d46bcaf293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also reproduce the second documented example&quot;,&quot;fullTitle&quot;:&quot;zrange-command test should also reproduce the second documented example&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;0&#x27;, &#x27;1&#x27;, &#x27;withscores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;1&#x27;, &#x27;two&#x27;, &#x27;2&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;693774c0-404f-40b5-99a9-49ca0d01e687&quot;,&quot;parentUUID&quot;:&quot;8468de25-7132-48eb-8ea8-e1d46bcaf293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91818be1-06e8-4663-a93c-64cec48f919a&quot;,&quot;693774c0-404f-40b5-99a9-49ca0d01e687&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;89d0f9a3-3c77-4f3b-b68a-ec944d978ce5&quot;,&quot;title&quot;:&quot;zrank-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zrank-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zrank-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9d5fe29-a590-4e6b-beaa-fdccbab11c34&quot;,&quot;parentUUID&quot;:&quot;89d0f9a3-3c77-4f3b-b68a-ec944d978ce5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;965127ba-dd27-4304-ba0b-95aa77469826&quot;,&quot;parentUUID&quot;:&quot;89d0f9a3-3c77-4f3b-b68a-ec944d978ce5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e1c7ec6-25b7-40f2-a83f-3d955dc1aa0c&quot;,&quot;parentUUID&quot;:&quot;89d0f9a3-3c77-4f3b-b68a-ec944d978ce5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrank-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbb8db78-a98f-4b45-91a2-2e5770403d80&quot;,&quot;parentUUID&quot;:&quot;89d0f9a3-3c77-4f3b-b68a-ec944d978ce5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when the ZSET does not exist&quot;,&quot;fullTitle&quot;:&quot;zrank-command test should return NIL when the ZSET does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, &#x27;zset&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2ac26b1-9c07-48cd-a642-ae0865de2405&quot;,&quot;parentUUID&quot;:&quot;89d0f9a3-3c77-4f3b-b68a-ec944d978ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return NIL when the ZSET exists but the key does not&quot;,&quot;fullTitle&quot;:&quot;zrank-command test should return NIL when the ZSET exists but the key does not&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;23.3&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrank&#x27;, &#x27;zset&#x27;, &#x27;membre&#x27;]);\n        chai_1.expect(response).to.equal(null);\n        response = yield common_test_1.sendCommand(client, [&#x27;exists&#x27;, &#x27;zset&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0121fa5-04a5-4112-a83e-0fea20b5b728&quot;,&quot;parentUUID&quot;:&quot;89d0f9a3-3c77-4f3b-b68a-ec944d978ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b2ac26b1-9c07-48cd-a642-ae0865de2405&quot;,&quot;a0121fa5-04a5-4112-a83e-0fea20b5b728&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;9ee3226f-9921-492c-b868-07f271321669&quot;,&quot;title&quot;:&quot;zrem-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/sset/zrem-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/sset/zrem-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c0a350f-0ee1-47e1-a896-08c31a8a01d8&quot;,&quot;parentUUID&quot;:&quot;9ee3226f-9921-492c-b868-07f271321669&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35b5209e-6786-4e16-a640-b0c1820a5d06&quot;,&quot;parentUUID&quot;:&quot;9ee3226f-9921-492c-b868-07f271321669&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1204313-7bf7-4ab4-aeae-e20df5838920&quot;,&quot;parentUUID&quot;:&quot;9ee3226f-9921-492c-b868-07f271321669&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;zrem-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;473f7dcb-d238-406b-a9c8-75e22250ffce&quot;,&quot;parentUUID&quot;:&quot;9ee3226f-9921-492c-b868-07f271321669&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a key from a sorted set&quot;,&quot;fullTitle&quot;:&quot;zrem-command test should remove a key from a sorted set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;one&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;2&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;3&#x27;, &#x27;three&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrem&#x27;, &#x27;zset&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;zrange&#x27;, &#x27;zset&#x27;, &#x27;0&#x27;, &#x27;-1&#x27;, &#x27;withscores&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;one&#x27;, &#x27;1&#x27;, &#x27;three&#x27;, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87172f3e-4505-483a-b152-f3c763b42f83&quot;,&quot;parentUUID&quot;:&quot;9ee3226f-9921-492c-b868-07f271321669&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;87172f3e-4505-483a-b152-f3c763b42f83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6cd78613-4fc9-4a41-b6fb-ca3aa85aeb46&quot;,&quot;title&quot;:&quot;getset-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/getset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/getset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9d82dfb-20b0-44de-8878-0667816b12ad&quot;,&quot;parentUUID&quot;:&quot;6cd78613-4fc9-4a41-b6fb-ca3aa85aeb46&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ab3752a-6298-40ea-9714-b206805e17fd&quot;,&quot;parentUUID&quot;:&quot;6cd78613-4fc9-4a41-b6fb-ca3aa85aeb46&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34e6a93b-1c2b-4404-8537-3e74b5076835&quot;,&quot;parentUUID&quot;:&quot;6cd78613-4fc9-4a41-b6fb-ca3aa85aeb46&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;getset-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02cf69b2-fc86-4ea3-95c9-4170f6e6fedb&quot;,&quot;parentUUID&quot;:&quot;6cd78613-4fc9-4a41-b6fb-ca3aa85aeb46&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report NIL when the original key does not exist&quot;,&quot;fullTitle&quot;:&quot;getset-command test should report NIL when the original key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;getset&#x27;, uniqueKey, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;180f8c92-0cd1-4a9d-a79d-727597d88a7b&quot;,&quot;parentUUID&quot;:&quot;6cd78613-4fc9-4a41-b6fb-ca3aa85aeb46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the previous value of the key&quot;,&quot;fullTitle&quot;:&quot;getset-command test should report the previous value of the key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;getset&#x27;, uniqueKey, &#x27;ninety nine&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;0&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;getset&#x27;, uniqueKey, &#x27;nothing&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ninety nine&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e2cd5c6-fac7-4780-8356-ab20729ee4c6&quot;,&quot;parentUUID&quot;:&quot;6cd78613-4fc9-4a41-b6fb-ca3aa85aeb46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;180f8c92-0cd1-4a9d-a79d-727597d88a7b&quot;,&quot;4e2cd5c6-fac7-4780-8356-ab20729ee4c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;title&quot;:&quot;incr/decr command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/incr-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/incr-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a millisecond TTL to validate incr respects TTL\n    common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;, &#x27;3&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c8de4f9-63cf-4a9f-bf34-d7a5a1b9def0&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;197398db-9911-43dc-becc-d158f6ad60e7&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddbdac0d-29dd-46b6-81d7-a542bb05b362&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af8cf190-5c68-4a84-8e0c-2f471462fa58&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report ONE when incr called against unknown key&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should report ONE when incr called against unknown key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, &#x27;incr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97730dfc-f7c7-4d9a-85d2-1ffb3b24c2d7&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;get&#x27;, &#x27;incr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;1&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97cc9f29-aa95-4a8f-911a-76c47255e917&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;incr-key&#x27;, &#x27;9007199254740990&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, &#x27;incr-key&#x27;]);\n            chai_1.expect(response).to.equal(Number.MAX_SAFE_INTEGER);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, &#x27;incr-key&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f2fd9b3-2830-47c8-9993-24e512c6387b&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report -1 when decr called against unknown key&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should report -1 when decr called against unknown key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;decr&#x27;, &#x27;decr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(-1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cffcf1d-4ce1-4a78-a3d2-30147c336573&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;get&#x27;, &#x27;decr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;-1&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a7344ad-243e-47ab-be45-f3163e366d68&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;set&#x27;, &#x27;decr-key&#x27;, &#x27;-9007199254740990&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;decr&#x27;, &#x27;decr-key&#x27;]);\n            chai_1.expect(response).to.equal(Number.MIN_SAFE_INTEGER);\n            response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;decr&#x27;, &#x27;decr-key&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a251f49e-026f-48dd-835d-ba75af7fdb8a&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect TTL&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should respect TTL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;get&#x27;, &#x27;ttlkey&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6069a9b3-6b59-4eac-a87c-55124ef114a5&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to increment a HASH value&quot;,&quot;fullTitle&quot;:&quot;incr/decr command test should fail to increment a HASH value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `test-incr-${new Date().getTime()}`;\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;incr&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d23a9505-0e88-488e-9bfd-f627df626990&quot;,&quot;parentUUID&quot;:&quot;0fe7ec08-93c5-42d3-8a51-c0acbf5f8458&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97730dfc-f7c7-4d9a-85d2-1ffb3b24c2d7&quot;,&quot;97cc9f29-aa95-4a8f-911a-76c47255e917&quot;,&quot;5f2fd9b3-2830-47c8-9993-24e512c6387b&quot;,&quot;4cffcf1d-4ce1-4a78-a3d2-30147c336573&quot;,&quot;5a7344ad-243e-47ab-be45-f3163e366d68&quot;,&quot;a251f49e-026f-48dd-835d-ba75af7fdb8a&quot;,&quot;6069a9b3-6b59-4eac-a87c-55124ef114a5&quot;,&quot;d23a9505-0e88-488e-9bfd-f627df626990&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:44,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;title&quot;:&quot;incrby/decrby command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/incrby-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/incrby-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    // Set a key with a millisecond TTL to validate incrby respects TTL\n    common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;ttlkey&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;, &#x27;3&#x27;])\n        .then(() =&gt; {\n        done();\n    });\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39de5f03-e3c7-4086-9452-e956ee8d849f&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3a29804-3c26-4e0f-b7f9-e9118add9bb8&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9fa15ea-b3a6-4b7a-b0dc-0d9412bbfad8&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30279559-2cd5-46a6-8edb-c1a194235385&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should report the INCREMENT when incrby called against non-existing key&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should report the INCREMENT when incrby called against non-existing key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;incr-key&#x27;, &#x27;10&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        // This is how redis behaves\n        chai_1.expect(response).to.equal(10);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;627433d9-833f-4bfb-8f2c-2db4dc72c99f&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;incr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;10&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a68168d5-1fcf-476c-95a2-abbbb9addcf8&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;incr-key&#x27;, &#x27;9007199254740981&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;incr-key&#x27;, &#x27;10&#x27;]);\n            chai_1.expect(response).to.equal(Number.MAX_SAFE_INTEGER);\n            response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;incr-key&#x27;, &#x27;110&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;ReplyError: ERR increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f769cb9a-247b-4aac-b75a-8a9d6b2be990&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should report the NEGATIVE increment when decrby called against unknown key&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should report the NEGATIVE increment when decrby called against unknown key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;decrby&#x27;, &#x27;decr-key&#x27;, &#x27;12&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(-12);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c69d0d1-661f-455d-9b33-8731b777329a&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support negative increment and positive decrement&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should support negative increment and positive decrement&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, &#x27;negincr&#x27;, &#x27;-12&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;number&#x27;);\n        chai_1.expect(response).to.equal(-12);\n        response = yield common_test_1.sendCommand(client, [&#x27;decrby&#x27;, &#x27;negincr&#x27;, &#x27;-24&#x27;]);\n        chai_1.expect(response).to.equal(12);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b4abe73-8788-40cc-a3db-96eb5888c323&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have created the key from the previous test&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should have created the key from the previous test&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;decr-key&#x27;]);\n        chai_1.expect(response).to.be.a(&#x27;string&#x27;);\n        chai_1.expect(response).to.equal(&#x27;-12&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ff955a4-a655-4f63-a62d-2eee9cafcd8a&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should overflow after 53 bits&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should overflow after 53 bits&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        let response = yield common_test_1.sendCommand(new net.Socket(), [&#x27;info&#x27;, &#x27;server&#x27;]);\n        // Only run the remaining tests if this is NOT unit-redis-ness\n        if (!/redis_version:5/gim.test(response)) {\n            response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;decr-key&#x27;, &#x27;-9007199254740981&#x27;]);\n            chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n            response = yield common_test_1.sendCommand(client, [&#x27;decrby&#x27;, &#x27;decr-key&#x27;, &#x27;10&#x27;]);\n            chai_1.expect(response).to.equal(Number.MIN_SAFE_INTEGER);\n            // This does not seem to be exact\n            // response = await sendCommand(client, [&#x27;decrby&#x27;, &#x27;decr-key&#x27;, String(Number.MAX_SAFE_INTEGER)]);\n            // expect(response).to.equal(&#x27;ReplyError: Error: increment or decrement would overflow&#x27;);\n        }\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9365e87e-5b9a-4ab0-89d5-e50ef916498e&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should respect TTL&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should respect TTL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;ttlkey&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d019a404-f6a1-4785-9618-933cb7aa63d9&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to increment a HASH value&quot;,&quot;fullTitle&quot;:&quot;incrby/decrby command test should fail to increment a HASH value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `test-incr-${new Date().getTime()}`;\n        let response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, uniqueKey, &#x27;one&#x27;, &#x27;two&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;incrby&#x27;, uniqueKey, &#x27;12&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: WRONGTYPE Operation against a key holding the wrong kind of value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6d36e15-da3e-4573-85b9-0299acc2f58c&quot;,&quot;parentUUID&quot;:&quot;f207cee7-6e2a-4f7f-9eb9-ce694d75770f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;627433d9-833f-4bfb-8f2c-2db4dc72c99f&quot;,&quot;a68168d5-1fcf-476c-95a2-abbbb9addcf8&quot;,&quot;f769cb9a-247b-4aac-b75a-8a9d6b2be990&quot;,&quot;7c69d0d1-661f-455d-9b33-8731b777329a&quot;,&quot;2b4abe73-8788-40cc-a3db-96eb5888c323&quot;,&quot;3ff955a4-a655-4f63-a62d-2eee9cafcd8a&quot;,&quot;9365e87e-5b9a-4ab0-89d5-e50ef916498e&quot;,&quot;d019a404-f6a1-4785-9618-933cb7aa63d9&quot;,&quot;e6d36e15-da3e-4573-85b9-0299acc2f58c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;title&quot;:&quot;mget-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/mget-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/mget-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95e1b9d7-6330-42d1-ba45-03c2e81d69fd&quot;,&quot;parentUUID&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7252634e-1e22-4e07-bc0c-d7d5c6f62ff2&quot;,&quot;parentUUID&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c2ac443-e096-4f14-9b1f-3243bebb7212&quot;,&quot;parentUUID&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mget-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2f5c9a2-7f39-46d4-a6f4-f9fbb196a4e0&quot;,&quot;parentUUID&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return NIL when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;mget-command test should return NIL when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mget&#x27;, &#x27;zset&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.eql([null, null]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d39cf1ae-bead-46b3-b416-69d77136c977&quot;,&quot;parentUUID&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return multiple values for string keys as requested&quot;,&quot;fullTitle&quot;:&quot;mget-command test should return multiple values for string keys as requested&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mset&#x27;, &#x27;key1&#x27;, &#x27;1&#x27;, &#x27;key2&#x27;, &#x27;2&#x27;, &#x27;key3&#x27;, &#x27;3&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;mget&#x27;, &#x27;key2&#x27;, &#x27;key1&#x27;, &#x27;noneya&#x27;, &#x27;key3&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;2&#x27;, &#x27;1&#x27;, null, &#x27;3&#x27;]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30a94c03-e7d8-4cc4-88cd-0d531c954b44&quot;,&quot;parentUUID&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return NIL for ZSET, LIST, and HASH types as well&quot;,&quot;fullTitle&quot;:&quot;mget-command test should return NIL for ZSET, LIST, and HASH types as well&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;zadd&#x27;, &#x27;zset&#x27;, &#x27;1&#x27;, &#x27;member&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;rpush&#x27;, &#x27;list&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;hset&#x27;, &#x27;hash&#x27;, &#x27;field&#x27;, &#x27;value&#x27;]);\n        chai_1.expect(response).to.equal(1);\n        response = yield common_test_1.sendCommand(client, [&#x27;mget&#x27;, &#x27;key2&#x27;, &#x27;key1&#x27;, &#x27;list&#x27;, &#x27;key3&#x27;, &#x27;hash&#x27;, &#x27;zset&#x27;]);\n        chai_1.expect(response).to.eql([&#x27;2&#x27;, &#x27;1&#x27;, null, &#x27;3&#x27;, null, null]);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c468c0dd-30d7-4991-a22c-25243a62af35&quot;,&quot;parentUUID&quot;:&quot;e820e5bb-edd7-4d16-aa5c-59e35ca56b24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d39cf1ae-bead-46b3-b416-69d77136c977&quot;,&quot;30a94c03-e7d8-4cc4-88cd-0d531c954b44&quot;,&quot;c468c0dd-30d7-4991-a22c-25243a62af35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;8df34572-890b-43ac-8855-2cf89008c66a&quot;,&quot;title&quot;:&quot;mset-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/mset-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/mset-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; {\n    done();\n});\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e96f2dd-6d4c-4033-8a7a-323b2bc2258e&quot;,&quot;parentUUID&quot;:&quot;8df34572-890b-43ac-8855-2cf89008c66a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26b3d8ee-d488-46ef-b854-28f54d3b9b84&quot;,&quot;parentUUID&quot;:&quot;8df34572-890b-43ac-8855-2cf89008c66a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7a2eb2a-b904-44d8-a548-5657074fdbf6&quot;,&quot;parentUUID&quot;:&quot;8df34572-890b-43ac-8855-2cf89008c66a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;mset-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;472e98b4-2ccb-4570-9ea6-c883dd43b88e&quot;,&quot;parentUUID&quot;:&quot;8df34572-890b-43ac-8855-2cf89008c66a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create multiple keys at once&quot;,&quot;fullTitle&quot;:&quot;mset-command test should create multiple keys at once&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;mset&#x27;, &#x27;key1&#x27;, &#x27;Hello&#x27;, &#x27;key2&#x27;, &#x27;world&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;key1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;Hello&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;key2&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;world&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57ded181-4f19-4b75-baec-4fc4fdc8c97e&quot;,&quot;parentUUID&quot;:&quot;8df34572-890b-43ac-8855-2cf89008c66a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only accept an even number of parameters&quot;,&quot;fullTitle&quot;:&quot;mset-command test should only accept an even number of parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;msEt&#x27;, &#x27;wrong&#x27;, &#x27;number&#x27;, &#x27;of&#x27;]);\n        chai_1.expect(response).to.match(/ReplyError: ERR wrong number of arguments for MSET/i);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;694fd7f4-4ec6-4cd3-b360-bf593ad9aba9&quot;,&quot;parentUUID&quot;:&quot;8df34572-890b-43ac-8855-2cf89008c66a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57ded181-4f19-4b75-baec-4fc4fdc8c97e&quot;,&quot;694fd7f4-4ec6-4cd3-b360-bf593ad9aba9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;title&quot;:&quot;set-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/set-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/set-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa607c60-28b8-42e4-9ced-338c267a171c&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78e305c8-b4c1-4e01-8da4-b4361931df3d&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f5f3bb1-541d-4623-a369-6666b7d899ee&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;set-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d57e91b5-69ed-473d-a9d6-86f43e834f48&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow us to set a several second ttl&quot;,&quot;fullTitle&quot;:&quot;set-command test should allow us to set a several second ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // During local testing there are 8 milliseconds from put to get\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;TTLtest&#x27;, &#x27;key&#x27;, &#x27;EX&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1230e95-c2e8-40f8-8a0c-31dc7f523e02&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke NX after XX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke NX after XX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;XX&#x27;, &#x27;NX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edf68c79-9145-4a19-a6fd-b0a6e33e2f2c&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke XX after NX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke XX after NX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;NX&#x27;, &#x27;XX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95df5f1f-c93e-4877-b95b-52d9098fc3cc&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nil when SET invoked with XX on a key that doesn&#x27;t exist&quot;,&quot;fullTitle&quot;:&quot;set-command test should return nil when SET invoked with XX on a key that doesn&#x27;t exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `TEST${new Date().getTime()}`;\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;key&#x27;, &#x27;XX&#x27;]);\n        chai_1.expect(response).to.equal(null);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d198ea6b-3fc6-418a-85d1-23c53772bc10&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return OK when SET invoked with XX on a key that DOES exist&quot;,&quot;fullTitle&quot;:&quot;set-command test should return OK when SET invoked with XX on a key that DOES exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        const uniqueKey = `TEST${new Date().getTime()}`;\n        // set the key with NX first to validate that functionality\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;key&#x27;, &#x27;NX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, uniqueKey, &#x27;new value&#x27;, &#x27;XX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n        // Now validate that the key is what we said last\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, uniqueKey]);\n        chai_1.expect(response).to.equal(&#x27;new value&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b563145-ec0f-40e1-aa51-1f732de9f3a9&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke EX and PX simultaneously&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke EX and PX simultaneously&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // Note: Our behavior is different from redis.  This error is &#x27;wrong number of args&#x27;\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;EX&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;, &#x27;100&#x27;]);\n        chai_1.expect(response).to.match(/^ReplyError: ERR syntax error/);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1426a42f-32aa-4025-8742-ea27c94fac75&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow us to set a millisecond ttl&quot;,&quot;fullTitle&quot;:&quot;set-command test should allow us to set a millisecond ttl&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        // During local teseting there are 8 milliseconds from put to get\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;MILLItest&#x27;, &#x27;key&#x27;, &#x27;PX&#x27;, &#x27;1&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;OK&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be2570f1-e0c5-4237-ab19-e56553cf1ce3&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should prove that the one second TTL has expired&quot;,&quot;fullTitle&quot;:&quot;set-command test should prove that the one second TTL has expired&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1004,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(() =&gt; {\n    common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;TTLtest&#x27;])\n        .then((responseGet) =&gt; {\n        chai_1.expect(responseGet).to.equal(null);\n        done();\n    });\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a8eb85c-8b48-4dad-958c-9cb3c7a58ed1&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept unknown parameters&quot;,&quot;fullTitle&quot;:&quot;set-command test should not accept unknown parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;Q&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39ddc3f8-f351-4128-92bd-1ce2017f041d&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke PX after EX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke PX after EX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;EX&#x27;, &#x27;100&#x27;, &#x27;PX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7c4090a-9b72-4761-a488-97bbc126cf3d&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT allow SET to invoke EX after PX&quot;,&quot;fullTitle&quot;:&quot;set-command test should NOT allow SET to invoke EX after PX&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;test&#x27;, &#x27;key&#x27;, &#x27;PX&#x27;, &#x27;100&#x27;, &#x27;EX&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR syntax error&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1ea6866-2375-4371-86f8-2bf33c3f32c4&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a TTL less than 1ms&quot;,&quot;fullTitle&quot;:&quot;set-command test should not allow a TTL less than 1ms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;set&#x27;, &#x27;MILLItest&#x27;, &#x27;key&#x27;, &#x27;PX&#x27;, &#x27;0&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;ReplyError: ERR invalid expire time in set&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccb7f200-e375-4b94-9ea6-226eee184b6d&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should prove that the millisecond TTL has expired&quot;,&quot;fullTitle&quot;:&quot;set-command test should prove that the millisecond TTL has expired&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(() =&gt; {\n    common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;MILLItest&#x27;])\n        .then((responseGet) =&gt; {\n        chai_1.expect(responseGet).to.equal(null);\n        done();\n    });\n}, 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46918b24-834c-4a6a-acf6-ff2fa448563e&quot;,&quot;parentUUID&quot;:&quot;a5e83962-a3b8-48a1-8b60-cae0a6018113&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b1230e95-c2e8-40f8-8a0c-31dc7f523e02&quot;,&quot;edf68c79-9145-4a19-a6fd-b0a6e33e2f2c&quot;,&quot;95df5f1f-c93e-4877-b95b-52d9098fc3cc&quot;,&quot;d198ea6b-3fc6-418a-85d1-23c53772bc10&quot;,&quot;8b563145-ec0f-40e1-aa51-1f732de9f3a9&quot;,&quot;1426a42f-32aa-4025-8742-ea27c94fac75&quot;,&quot;be2570f1-e0c5-4237-ab19-e56553cf1ce3&quot;,&quot;5a8eb85c-8b48-4dad-958c-9cb3c7a58ed1&quot;,&quot;39ddc3f8-f351-4128-92bd-1ce2017f041d&quot;,&quot;c7c4090a-9b72-4761-a488-97bbc126cf3d&quot;,&quot;f1ea6866-2375-4371-86f8-2bf33c3f32c4&quot;,&quot;ccb7f200-e375-4b94-9ea6-226eee184b6d&quot;,&quot;46918b24-834c-4a6a-acf6-ff2fa448563e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1047,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d2d93428-f134-443f-84e2-531c7b32bc1c&quot;,&quot;title&quot;:&quot;setnx-command test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/command/string/setnx-command.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/command/string/setnx-command.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;respServer = new resp_server_1.RespServer();\nrespServer.on(&#x27;ready&#x27;, () =&gt; __awaiter(void 0, void 0, void 0, function* () {\n    yield common_test_1.sendCommand(client, [&#x27;flushall&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;select&#x27;, &#x27;0&#x27;]);\n    yield common_test_1.sendCommand(client, [&#x27;script&#x27;, &#x27;flush&#x27;]);\n    done();\n}));\nrespServer.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b3280d3-d9ff-44f3-b3a5-850e9660870b&quot;,&quot;parentUUID&quot;:&quot;d2d93428-f134-443f-84e2-531c7b32bc1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ded730aa-7145-4d51-8780-5f93d1499d5e&quot;,&quot;parentUUID&quot;:&quot;d2d93428-f134-443f-84e2-531c7b32bc1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        yield respServer.stop();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d9b8304-68c6-4e96-ad91-cccbb6f60a36&quot;,&quot;parentUUID&quot;:&quot;d2d93428-f134-443f-84e2-531c7b32bc1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;setnx-command test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27eddcac-65e4-40e3-aacc-c82a077b9e36&quot;,&quot;parentUUID&quot;:&quot;d2d93428-f134-443f-84e2-531c7b32bc1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 1 when the key does not exist&quot;,&quot;fullTitle&quot;:&quot;setnx-command test should return 1 when the key does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;setnx&#x27;, &#x27;test&#x27;, &#x27;key&#x27;]);\n        chai_1.expect(response).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a99b1a16-0bab-4fd0-8a90-089739ceb98d&quot;,&quot;parentUUID&quot;:&quot;d2d93428-f134-443f-84e2-531c7b32bc1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 when the key already exists&quot;,&quot;fullTitle&quot;:&quot;setnx-command test should return 0 when the key already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        response = yield common_test_1.sendCommand(client, [&#x27;setnx&#x27;, &#x27;test&#x27;, &#x27;other&#x27;]);\n        chai_1.expect(response).to.equal(0);\n        response = yield common_test_1.sendCommand(client, [&#x27;get&#x27;, &#x27;test&#x27;]);\n        chai_1.expect(response).to.equal(&#x27;key&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c686f26-5c13-4b7c-afef-dc851cfb2bb5&quot;,&quot;parentUUID&quot;:&quot;d2d93428-f134-443f-84e2-531c7b32bc1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a99b1a16-0bab-4fd0-8a90-089739ceb98d&quot;,&quot;5c686f26-5c13-4b7c-afef-dc851cfb2bb5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a5cae214-6556-4858-a5b0-c955097f8dba&quot;,&quot;title&quot;:&quot;data-type test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/data-type.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/data-type.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fe4f804-8814-41da-b269-f2d08ffbc80f&quot;,&quot;parentUUID&quot;:&quot;a5cae214-6556-4858-a5b0-c955097f8dba&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b85eddc1-7a32-4b28-b4b5-702ea4991fa6&quot;,&quot;parentUUID&quot;:&quot;a5cae214-6556-4858-a5b0-c955097f8dba&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;data-type test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6d70e85-3b40-4fdb-91e5-a349849620fc&quot;,&quot;parentUUID&quot;:&quot;a5cae214-6556-4858-a5b0-c955097f8dba&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should enumerate data-types&quot;,&quot;fullTitle&quot;:&quot;data-type test should enumerate data-types&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        chai_1.expect(data_type_1.DataType.NONE).to.equal(&#x27;none&#x27;);\n        chai_1.expect(data_type_1.DataType.STRING).to.equal(&#x27;string&#x27;);\n        chai_1.expect(data_type_1.DataType.LIST).to.equal(&#x27;list&#x27;);\n        chai_1.expect(data_type_1.DataType.SET).to.equal(&#x27;set&#x27;);\n        chai_1.expect(data_type_1.DataType.ZSET).to.equal(&#x27;zset&#x27;);\n        chai_1.expect(data_type_1.DataType.HASH).to.equal(&#x27;hash&#x27;);\n        chai_1.expect(Object.keys(data_type_1.DataType).length).to.equal(6);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f90f6788-269e-4be4-9f69-00301571e6ba&quot;,&quot;parentUUID&quot;:&quot;a5cae214-6556-4858-a5b0-c955097f8dba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f90f6788-269e-4be4-9f69-00301571e6ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;title&quot;:&quot;sorted-set test&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.createSandbox();\nss = new sorted_set_1.SortedSet();\nz = new Z();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7ad8052-54c8-4386-af1d-68d5f1255101&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a83ac8f5-21cd-4be8-b3cc-4e110f11e2ba&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;sorted-set test \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c2621cc-1c9c-462a-b2f9-6f726bb03c1a&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should instantiate&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should instantiate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        chai_1.expect(z.constructor.name).to.equal(&#x27;Z&#x27;);\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(ss.constructor.name).to.equal(&#x27;SortedSet&#x27;);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0134d7d2-fc5a-4048-a5c9-bce26d106ba1&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add, get, and delete an entry&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should add, get, and delete an entry&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, 1);\n        chai_1.expect(added).to.equal(null);\n        added = ss.add(&#x27;test&#x27;, 1);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(z.keys().length).to.equal(1);\n        chai_1.expect(ss.keys().length).to.equal(1);\n        let item = z.get(&#x27;test&#x27;);\n        chai_1.expect(item.constructor.name).to.equal(&#x27;Number&#x27;);\n        item = ss.get(&#x27;test&#x27;);\n        chai_1.expect(item.constructor.name).to.equal(&#x27;Number&#x27;);\n        z.del(&#x27;test&#x27;);\n        chai_1.expect(z.keys().length).to.equal(0);\n        ss.del(&#x27;test&#x27;);\n        chai_1.expect(ss.keys().length).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a59a370-1de1-4010-b937-8fd8af332693&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw when attempting to add __proto__ key&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should throw when attempting to add __proto__ key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(() =&gt; {\n            z.add(&#x27;__proto__&#x27;, 0);\n        }).to.throw();\n        // expect(() =&gt; {\n        //   ss.add(&#x27;__proto__&#x27;, 0)\n        // }).to.throw();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86c07628-93eb-45de-87d9-39203f8155e0&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not add an undefined or null score&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should not add an undefined or null score&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, null);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(z.keys().length).to.equal(0);\n        added = z.add(&#x27;test&#x27;, undefined);\n        chai_1.expect(z.keys().length).to.equal(0);\n        // Typescript prevents adding null\n        // added = ss.add(&#x27;test&#x27;, null);\n        // expect(added).to.equal(null);\n        // expect(ss.keys().length).to.equal(0);\n        // added = ss.add(&#x27;test&#x27;, undefined);\n        // expect(z.keys().length).to.equal(0);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56e15e5a-4f5d-4a6a-9270-c4571e23b5fa&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not duplicate key/value pairs&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should not duplicate key/value pairs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null); // This is weird\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = z.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(123); // and weirder\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = ss.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null); // This is weird\n        chai_1.expect(ss.keys().length).to.equal(1);\n        added = ss.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(123); // and weirder\n        chai_1.expect(ss.keys().length).to.equal(1);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4953fd20-23dc-40b9-a95c-b6d68a25dcc7&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the old rank when replacing a key&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should return the old rank when replacing a key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        let added = z.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = z.add(&#x27;test&#x27;, 321);\n        chai_1.expect(added).to.equal(123);\n        chai_1.expect(z.keys().length).to.equal(1);\n        added = z.get(&#x27;test&#x27;);\n        chai_1.expect(added).to.equal(321);\n        added = ss.add(&#x27;test&#x27;, 123);\n        chai_1.expect(added).to.equal(null);\n        chai_1.expect(ss.keys().length).to.equal(1);\n        added = ss.add(&#x27;test&#x27;, 321);\n        chai_1.expect(added).to.equal(123);\n        chai_1.expect(ss.keys().length).to.equal(1);\n        added = ss.get(&#x27;test&#x27;);\n        chai_1.expect(added).to.equal(321);\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;751aa671-2a2e-488a-b46e-5dfee5734535&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a value when adding at least 32 values (I think - it is difficult to tell)&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should return a value when adding at least 32 values (I think - it is difficult to tell)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16f4e4f1-2cba-4a5c-b20d-669b24c1a567&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;fullTitle&quot;:&quot;sorted-set test should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(z.add(&#x27;Terminator&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(z.add(&#x27;District 9&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(z.add(&#x27;Ex Machina&#x27;, 0.7)).to.equal(null); // =&gt; null\n        chai_1.expect(z.add(&#x27;Ex Machina&#x27;, 7.7)).to.equal(0.7); // =&gt; 0.7\n        // alias\n        chai_1.expect(z.set(&#x27;The Matrix&#x27;, 8.7)).to.equal(null); // =&gt; null\n        // average O(1)\n        chai_1.expect(z.has(&#x27;Terminator&#x27;)).to.equal(true); // =&gt; true\n        chai_1.expect(z.has(&#x27;Blade Runner&#x27;)).to.equal(false); // =&gt; false\n        // average O(1)\n        chai_1.expect(z.score(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        chai_1.expect(z.score(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(z.get(&#x27;The Matrix&#x27;)).to.equal(8.7); // =&gt; 8.7\n        // average O(log(N))\n        chai_1.expect(z.rem(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        // average O(1)\n        chai_1.expect(z.rem(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(z.del(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M is the number of elements between min and max\n        // This is not working as expected\n        chai_1.expect(z.rangeByScore(7, 8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        chai_1.expect(z.rangeByScore(8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]); // [8.0-∞)\n        // =&gt; [&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]\n        chai_1.expect(z.rangeByScore(8, null, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]\n        // average O(log(N)+log(M)) where M as in rangeByScore\n        // Again - not as expected\n        chai_1.expect(z.count(7, 8)).to.equal(2); // =&gt; 3\n        // average O(log(N))\n        // Not working as expected\n        chai_1.expect(z.rank(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; 0\n        // Not working as expected\n        chai_1.expect(z.rank(&#x27;Terminator&#x27;)).to.equal(1); // =&gt; 2\n        chai_1.expect(z.rank(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M as in range\n        // Not working as expected\n        chai_1.expect(z.range(0, 2)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Not working as expected\n        chai_1.expect(z.range(0, 2, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8], [&#x27;Terminator&#x27;, 8], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;Ex Machina&#x27;, 7.7],\n        //     [&#x27;District 9&#x27;, 8],\n        //     [&#x27;Terminator&#x27;, 8]]\n        chai_1.expect(z.range(-1)).to.eql([&#x27;The Matrix&#x27;]); // =&gt; [&#x27;The Matrix&#x27;]\n        // almost alias\n        // Not working as expected\n        chai_1.expect(z.slice(0, 3)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Set cardinality (number of elements)\n        // average O(1)\n        // Not working as expected\n        chai_1.expect(z.card()).to.equal(3); // =&gt; 4\n        // alias\n        // Not working as expected\n        chai_1.expect(z.length).to.equal(3); // =&gt; 4\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ae16aec-b43c-42dc-83c4-f53e481bfd47&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;the rewrite should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;fullTitle&quot;:&quot;sorted-set test the rewrite should do what the documentation says here: https://www.npmjs.com/package/redis-sorted-set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;__awaiter(void 0, void 0, void 0, function* () {\n        z = new Z();\n        ss = new sorted_set_1.SortedSet();\n        chai_1.expect(ss.add(&#x27;Terminator&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(ss.add(&#x27;District 9&#x27;, 8.0)).to.equal(null); // =&gt; null\n        chai_1.expect(ss.add(&#x27;Ex Machina&#x27;, 0.7)).to.equal(null); // =&gt; null\n        chai_1.expect(ss.add(&#x27;Ex Machina&#x27;, 7.7)).to.equal(0.7); // =&gt; 0.7\n        // alias\n        chai_1.expect(ss.set(&#x27;The Matrix&#x27;, 8.7)).to.equal(null); // =&gt; null\n        // average O(1)\n        chai_1.expect(ss.has(&#x27;Terminator&#x27;)).to.equal(true); // =&gt; true\n        chai_1.expect(ss.has(&#x27;Blade Runner&#x27;)).to.equal(false); // =&gt; false\n        // average O(1)\n        chai_1.expect(ss.score(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        chai_1.expect(ss.score(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(ss.get(&#x27;The Matrix&#x27;)).to.equal(8.7); // =&gt; 8.7\n        // average O(log(N))\n        chai_1.expect(ss.rem(&#x27;Ex Machina&#x27;)).to.equal(7.7); // =&gt; 7.7\n        // average O(1)\n        chai_1.expect(ss.rem(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // alias\n        chai_1.expect(ss.del(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M is the number of elements between min and max\n        // This is not working as expected\n        chai_1.expect(ss.rangeByScore(7, 8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        chai_1.expect(ss.rangeByScore(8)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]); // [8.0-∞)\n        // =&gt; [&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]\n        chai_1.expect(ss.rangeByScore(8, null, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;District 9&#x27;, 8.0], [&#x27;Terminator&#x27;, 8.0], [&#x27;The Matrix&#x27;, 8.7]]\n        // average O(log(N)+log(M)) where M as in rangeByScore\n        // Again - not as expected\n        chai_1.expect(ss.count(7, 8)).to.equal(2); // =&gt; 3\n        // average O(log(N))\n        // Not working as expected\n        chai_1.expect(ss.rank(&#x27;Ex Machina&#x27;)).to.equal(null); // =&gt; 0\n        // Not working as expected\n        chai_1.expect(ss.rank(&#x27;Terminator&#x27;)).to.equal(1); // =&gt; 2\n        chai_1.expect(ss.rank(&#x27;Blade Runner&#x27;)).to.equal(null); // =&gt; null\n        // average O(log(N)+M) where M as in range\n        // Not working as expected\n        chai_1.expect(ss.range(0, 2)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Not working as expected\n        chai_1.expect(ss.range(0, 2, { withScores: true })).to.eql([[&#x27;District 9&#x27;, 8], [&#x27;Terminator&#x27;, 8], [&#x27;The Matrix&#x27;, 8.7]]);\n        // =&gt; [[&#x27;Ex Machina&#x27;, 7.7],\n        //     [&#x27;District 9&#x27;, 8],\n        //     [&#x27;Terminator&#x27;, 8]]\n        chai_1.expect(ss.range(-1)).to.eql([&#x27;The Matrix&#x27;]); // =&gt; [&#x27;The Matrix&#x27;]\n        // almost alias\n        // Not working as expected\n        chai_1.expect(ss.slice(0, 3)).to.eql([&#x27;District 9&#x27;, &#x27;Terminator&#x27;, &#x27;The Matrix&#x27;]);\n        // =&gt; [&#x27;Ex Machina&#x27;, &#x27;District 9&#x27;, &#x27;Terminator&#x27;]\n        // Set cardinality (number of elements)\n        // average O(1)\n        // Not working as expected\n        chai_1.expect(ss.card()).to.equal(3); // =&gt; 4\n        // alias\n        // Not working as expected\n        chai_1.expect(ss.length).to.equal(3); // =&gt; 4\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be0c7ffc-7f0a-4fdb-98e0-5a00aaf43948&quot;,&quot;parentUUID&quot;:&quot;855a656c-896d-43ee-9cb3-3a9b0f963a53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2b1dea32-3e50-4404-95e5-52f7685d4d13&quot;,&quot;title&quot;:&quot;skip map&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);\nchai_1.expect(z.range()).to.eql([]);\nchai_1.expect(z.rangeByScore()).to.eql([]);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;__proto__&#x27;, 14);\n}).to.throw();\nz.add(&#x27;5a600e16&#x27;, 8);\nz.add(&#x27;5a600e17&#x27;, 9);\nchai_1.expect(z.add(&#x27;5a600e18&#x27;, 10)).to.equal(null);\nchai_1.expect(z.add(&#x27;5a600e17&#x27;, 12)).to.equal(9);\nchai_1.expect(z).to.have.length(3);\nchai_1.expect(z.toArray()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(z.toArray()).to.eql(z.range(0, -1));\nchai_1.expect(z.toArray()).to.eql(z.rangeByScore());\nchai_1.expect(z.has(&#x27;5a600e16&#x27;)).to.be.ok;\nchai_1.expect(z.has(&#x27;5a600e17&#x27;)).to.be.ok;\nchai_1.expect(z.has(&#x27;5a600e18&#x27;)).to.be.ok;\nchai_1.expect(z.has(&#x27;5a600e19&#x27;)).to.not.be.ok;\nchai_1.expect(z.score(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(z.score(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(z.score(&#x27;5a600e18&#x27;)).to.equal(10);\nchai_1.expect(z.score(&#x27;5a600e19&#x27;)).to.equal(null);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(z).to.have.length(2);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(null);\nchai_1.expect(z).to.have.length(2);\nchai_1.expect(z.has(&#x27;5a600e16&#x27;)).to.not.be.ok;\nchai_1.expect(z.toArray()).to.eql([&#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(z.toArray({ withScores: true }))\n    .to.eql(z.range(0, -1, { withScores: true }));\nchai_1.expect(z.toArray()).to.eql(z.rangeByScore());\nz.add(&#x27;5a600e16&#x27;, 10);\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nchai_1.expect(z).to.have.length(9);\n// no change, so should be O(1)\nz.add(&#x27;5a600e17&#x27;, 12);\nchai_1.expect(z.rank(&#x27;5a600e17&#x27;)).to.equal(4);\nchai_1.expect(z).to.have.length(9);\nchai_1.expect(z.toArray()).to.eql([\n    &#x27;5a600e16&#x27;,\n    &#x27;5a600e11&#x27;,\n    &#x27;5a600e18&#x27;,\n    &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;,\n    &#x27;5a600e14&#x27;,\n    &#x27;5a600e10&#x27;,\n    &#x27;5a600e12&#x27;,\n    &#x27;5a600e15&#x27;,\n]);\nchai_1.expect(z.toArray()).to.eql(z.range(0, -1));\nchai_1.expect(z.toArray()).to.eql(z.rangeByScore());\nchai_1.expect(z.rangeByScore(14, 16, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b46cf1cb-5287-4c87-9992-1a4f8917ea16&quot;,&quot;parentUUID&quot;:&quot;2b1dea32-3e50-4404-95e5-52f7685d4d13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;254588da-9f88-4e69-8cf2-138aa8ecf1ff&quot;,&quot;title&quot;:&quot;#add&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should implicitly delete&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #add should implicitly delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.add(&#x27;5a600e14&#x27;, null)).to.equal(14);\nchai_1.expect(z.add(&#x27;5a600e19&#x27;, null)).to.equal(null);\nchai_1.expect(z).to.have.length(8);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15c9e7e0-2f2f-4484-9065-257b984d55af&quot;,&quot;parentUUID&quot;:&quot;254588da-9f88-4e69-8cf2-138aa8ecf1ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;15c9e7e0-2f2f-4484-9065-257b984d55af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;dacd6017-188d-4462-be53-1d5a62fedf75&quot;,&quot;title&quot;:&quot;#empty&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #empty should remove all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nz.empty();\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47c34f59-6e69-4b95-a612-88f041de61be&quot;,&quot;parentUUID&quot;:&quot;dacd6017-188d-4462-be53-1d5a62fedf75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47c34f59-6e69-4b95-a612-88f041de61be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;055e26df-869a-4ccd-890e-5eb71b99133e&quot;,&quot;title&quot;:&quot;#incrBy(increment, key)&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #incrBy(increment, key) should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.add(&#x27;second&#x27;, 2);\nz.add(&#x27;third&#x27;, 3);\nz.add(&#x27;fourth&#x27;, 4);\nchai_1.expect(z.incrBy(2, &#x27;first&#x27;)).to.equal(3);\nchai_1.expect(z.rank(&#x27;first&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd2c40f9-b65b-425e-88f6-0d970edf34e8&quot;,&quot;parentUUID&quot;:&quot;055e26df-869a-4ccd-890e-5eb71b99133e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create if not found&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #incrBy(increment, key) should create if not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.incrBy(2, &#x27;second&#x27;);\nchai_1.expect(z.card()).to.equal(2);\nchai_1.expect(z.rank(&#x27;second&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42502a3f-ecd0-4801-a039-531d763932e4&quot;,&quot;parentUUID&quot;:&quot;055e26df-869a-4ccd-890e-5eb71b99133e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd2c40f9-b65b-425e-88f6-0d970edf34e8&quot;,&quot;42502a3f-ecd0-4801-a039-531d763932e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;9434723c-7618-4e22-8a4a-105c252af41b&quot;,&quot;title&quot;:&quot;#keys&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the keys&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #keys should return the keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.keys()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e11&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e14&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e12&#x27;, &#x27;5a600e15&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;812852ca-0a2a-4934-ad63-36e9cdd7171c&quot;,&quot;parentUUID&quot;:&quot;9434723c-7618-4e22-8a4a-105c252af41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;812852ca-0a2a-4934-ad63-36e9cdd7171c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;8cdcce24-1722-4436-82f0-9632a1a9498f&quot;,&quot;title&quot;:&quot;#rangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rangeByScore should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rangeByScore(14, null, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);\nchai_1.expect(z.rangeByScore(null, 10, { withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n]);\nchai_1.expect(z.rangeByScore(-Infinity, Infinity)).to.eql(z.toArray());\nchai_1.expect(z.rangeByScore(null, null)).to.eql(z.toArray());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;358a6935-972e-4e66-a08c-7c476a5f6551&quot;,&quot;parentUUID&quot;:&quot;8cdcce24-1722-4436-82f0-9632a1a9498f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;358a6935-972e-4e66-a08c-7c476a5f6551&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6cf06230-d2cd-42b5-a422-66ed6ebc9e77&quot;,&quot;title&quot;:&quot;#count&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should count elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #count should count elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nchai_1.expect(z.count()).to.equal(0);\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nz.add(&#x27;5a600e19&#x27;, 14);\nz.add(&#x27;5a600f00&#x27;, 30.0);\nz.add(&#x27;5a600f01&#x27;, 30.5);\nz.add(&#x27;5a600f02&#x27;, 31.0);\nz.add(&#x27;5a600f03&#x27;, 31.5);\nz.add(&#x27;5a600f04&#x27;, 32.0);\nz.add(&#x27;5a600f05&#x27;, 32.0);\nz.add(&#x27;5a600f06&#x27;, 32.0);\nchai_1.expect(z.count()).to.eql(z.rangeByScore().length);\nchai_1.expect(z.count(8)).to.eql(z.rangeByScore(8).length);\nchai_1.expect(z.count(3, 7)).to.eql(z.rangeByScore(3, 7).length);\nchai_1.expect(z.count(5, 14)).to.eql(z.rangeByScore(5, 14).length);\nchai_1.expect(z.count(5, 5)).to.eql(z.rangeByScore(5, 5).length);\nchai_1.expect(z.count(5, 0)).to.eql(z.rangeByScore(5, 0).length);\nchai_1.expect(z.count(30, 32)).to.eql(z.rangeByScore(30, 32).length);\nchai_1.expect(z.count(40)).to.eql(z.rangeByScore(40).length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5130270d-42a4-4c72-a354-78d23a742c5d&quot;,&quot;parentUUID&quot;:&quot;6cf06230-d2cd-42b5-a422-66ed6ebc9e77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5130270d-42a4-4c72-a354-78d23a742c5d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;5e163bf2-fae5-41b2-af70-1c165e631472&quot;,&quot;title&quot;:&quot;#range&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #range should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.add(&#x27;second&#x27;, 2);\nz.add(&#x27;third&#x27;, 3);\nz.add(&#x27;fourth&#x27;, 4);\nvar array = [&#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;, &#x27;fourth&#x27;];\nchai_1.expect(z.range()).to.eql(array);\nchai_1.expect(z.range(2)).to.eql(array.slice(2));\nchai_1.expect(z.range(8)).to.eql(array.slice(8));\nchai_1.expect(z.range(0, 2)).to.eql(array.slice(0, 3));\nchai_1.expect(z.range(-1)).to.eql([&#x27;fourth&#x27;]);\nchai_1.expect(z.range(-4)).to.eql(array);\nchai_1.expect(z.range(-4, -2)).to.eql(array.slice(0, 3));\nchai_1.expect(z.range(-4, z.length + 1000))\n    .to.eql(array.slice(-4, z.length + 1000));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68f9f5ed-2f12-48ab-9ba1-317ed17e76b7&quot;,&quot;parentUUID&quot;:&quot;5e163bf2-fae5-41b2-af70-1c165e631472&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support withScores&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #range should support withScores&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, 1);\nz.add(&#x27;second&#x27;, 2);\nchai_1.expect(z.range(0, 0, { withScores: true }))\n    .to.eql([[&#x27;first&#x27;, 1]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dff234a-84a9-49c8-8956-e84296f7b1f1&quot;,&quot;parentUUID&quot;:&quot;5e163bf2-fae5-41b2-af70-1c165e631472&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68f9f5ed-2f12-48ab-9ba1-317ed17e76b7&quot;,&quot;2dff234a-84a9-49c8-8956-e84296f7b1f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;74b2d232-c54d-4ecd-b26f-661e11b3dd9e&quot;,&quot;title&quot;:&quot;#intersect&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should intersect two sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect two sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var a = new Z(), b = new Z();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nchai_1.expect(Z.intersect(a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e1b&#x27;]);\nchai_1.expect(Z.intersect(b, a)).to.eql([&#x27;5a600e1b&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e17&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;745b3a5c-5832-439d-994e-549dee6b5ce0&quot;,&quot;parentUUID&quot;:&quot;74b2d232-c54d-4ecd-b26f-661e11b3dd9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect three sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect three sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var a = new Z(), b = new Z(), c = new Z();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nchai_1.expect(Z.intersect(c, a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\nchai_1.expect(Z.intersect(c, a, b)).to.eql(c.intersect(a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3a0bb89-ac31-45bd-9977-6da9ae553c03&quot;,&quot;parentUUID&quot;:&quot;74b2d232-c54d-4ecd-b26f-661e11b3dd9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect four sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #intersect should intersect four sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var a = new Z();\nvar b = new Z();\nvar c = new Z();\nvar d = new Z();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nd.add(&#x27;5a600e1c&#x27;, 400);\nd.add(&#x27;5a600e17&#x27;, 500);\nd.add(&#x27;5a600e1f&#x27;, 600);\nd.add(&#x27;5a600e20&#x27;, 700);\nchai_1.expect(Z.intersect(d, c, a, b)).to.eql([&#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\nchai_1.expect(Z.intersect(d, c, a, b)).to.eql(d.intersect(c, a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c6b7d15-4adf-4c71-8f60-cc9bcd22df65&quot;,&quot;parentUUID&quot;:&quot;74b2d232-c54d-4ecd-b26f-661e11b3dd9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;745b3a5c-5832-439d-994e-549dee6b5ce0&quot;,&quot;c3a0bb89-ac31-45bd-9977-6da9ae553c03&quot;,&quot;6c6b7d15-4adf-4c71-8f60-cc9bcd22df65&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;8ca74f78-ba0c-4d9a-9773-54a0756f07d6&quot;,&quot;title&quot;:&quot;#rank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the correct rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rank should get the correct rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rank(&#x27;5a600e12&#x27;)).to.equal(7);\nchai_1.expect(z.rank(&#x27;5a600e13&#x27;)).to.equal(3);\nchai_1.expect(z.rank(&#x27;5a600e16&#x27;)).to.equal(0);\nchai_1.expect(z.rank(&#x27;5a600e15&#x27;)).to.equal(8);\nchai_1.expect(z.rank(&#x27;not in set&#x27;)).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;419d805b-3c02-4427-992d-56efa7a69631&quot;,&quot;parentUUID&quot;:&quot;8ca74f78-ba0c-4d9a-9773-54a0756f07d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;419d805b-3c02-4427-992d-56efa7a69631&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;561b73be-25e6-4d0f-ae1e-af7e03a30fd5&quot;,&quot;title&quot;:&quot;#rem&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete special elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rem should delete special elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(z).to.have.length(8);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(z).to.have.length(7);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78c985e0-320e-4220-ac0b-a3f04ac5573a&quot;,&quot;parentUUID&quot;:&quot;561b73be-25e6-4d0f-ae1e-af7e03a30fd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete many elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #rem should delete many elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.rem(&#x27;5a600e11&#x27;)).to.equal(6);\nchai_1.expect(z.rem(&#x27;5a600e13&#x27;)).to.equal(11);\nchai_1.expect(z.rem(&#x27;5a600e14&#x27;)).to.equal(14);\nchai_1.expect(z.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(z.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(z.rem(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(z.length).to.equal(3);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a05b74ee-853a-4983-9712-3e2b733a56a8&quot;,&quot;parentUUID&quot;:&quot;561b73be-25e6-4d0f-ae1e-af7e03a30fd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78c985e0-320e-4220-ac0b-a3f04ac5573a&quot;,&quot;a05b74ee-853a-4983-9712-3e2b733a56a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7cea9724-dd6b-4e70-8615-e5ac42c8d000&quot;,&quot;title&quot;:&quot;#remRangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a range of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByScore should strip out a range of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByScore(4, 14)).to.equal(5);\nchai_1.expect(z).to.have.length(4);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67eda7d2-c988-4e81-bb1b-2f0e54e66e63&quot;,&quot;parentUUID&quot;:&quot;7cea9724-dd6b-4e70-8615-e5ac42c8d000&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all the elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByScore should strip out all the elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByScore(3, 19)).to.equal(9);\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdcd8a1b-770b-4cb4-b729-3b3512b92d7f&quot;,&quot;parentUUID&quot;:&quot;7cea9724-dd6b-4e70-8615-e5ac42c8d000&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;67eda7d2-c988-4e81-bb1b-2f0e54e66e63&quot;,&quot;fdcd8a1b-770b-4cb4-b729-3b3512b92d7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;a6a7c67d-86ac-4e72-beeb-45328bcc17f9&quot;,&quot;title&quot;:&quot;#remRangeByRank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a slice of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByRank should strip out a slice of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByRank(1, 6)).to.equal(5);\nchai_1.expect(z).to.have.length(4);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a20d23c-718f-48fb-8ca0-9e814239b64f&quot;,&quot;parentUUID&quot;:&quot;a6a7c67d-86ac-4e72-beeb-45328bcc17f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #remRangeByRank should strip out all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(z.remRangeByRank(0, 9)).to.equal(9);\nchai_1.expect(z).to.have.length(0);\nchai_1.expect(z.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93a27dd7-5af5-400f-ab56-8cf4562280b5&quot;,&quot;parentUUID&quot;:&quot;a6a7c67d-86ac-4e72-beeb-45328bcc17f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a20d23c-718f-48fb-8ca0-9e814239b64f&quot;,&quot;93a27dd7-5af5-400f-ab56-8cf4562280b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;eb58a9b6-dc1f-405e-9b97-dc04bea8c296&quot;,&quot;title&quot;:&quot;#values&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the values&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map #values should return the values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z();\nz.add(&#x27;first&#x27;, -1);\nz.add(&#x27;third&#x27;, 5);\nz.add(&#x27;second&#x27;, 3);\nchai_1.expect(z.values()).to.eql([-1, 3, 5]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c59feaad-1528-4e88-aef5-df0d15516877&quot;,&quot;parentUUID&quot;:&quot;eb58a9b6-dc1f-405e-9b97-dc04bea8c296&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c59feaad-1528-4e88-aef5-df0d15516877&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;7f4776da-5e88-4db2-9107-25725955461f&quot;,&quot;title&quot;:&quot;unique&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should ensure values are unique&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map unique should ensure values are unique&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z({ unique: true });\nassert.equal(z.keys().length, 0, &#x27;Expected an empty SortedSet&#x27;);\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600e19&#x27;, 11);\n}).to.throw(/unique/);\n// quick exit test\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600dff&#x27;, z._head.next[z._level - 1].next.value);\n}).to.throw(/unique/);\n// this test ensures the key &lt; key check doesn&#x27;t come into play\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600dff&#x27;, 11);\n}).to.throw(/unique/);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600e18&#x27;, 10);\n}).to.not.throw();\nchai_1.expect(z).to.have.length(9);\nchai_1.expect(z.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eabc955d-f082-4a7f-8d72-571a9fe73104&quot;,&quot;parentUUID&quot;:&quot;7f4776da-5e88-4db2-9107-25725955461f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert keys if constraint broken during update&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map unique should revert keys if constraint broken during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var z = new Z({ unique: true });\nz.add(&#x27;5a600e10&#x27;, 16);\nz.add(&#x27;5a600e11&#x27;, 6);\nz.add(&#x27;5a600e12&#x27;, 17);\nz.add(&#x27;5a600e13&#x27;, 11);\nz.add(&#x27;5a600e14&#x27;, 14);\nz.add(&#x27;5a600e15&#x27;, 19);\nz.add(&#x27;5a600e16&#x27;, 3);\nz.add(&#x27;5a600e17&#x27;, 12);\nz.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    z.add(&#x27;5a600e13&#x27;, 14);\n}).to.throw(/unique/);\nchai_1.expect(z).to.have.length(9);\nchai_1.expect(z.score(&#x27;5a600e13&#x27;)).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bfa7a09-ad48-4ccd-805c-c5c0359247f4&quot;,&quot;parentUUID&quot;:&quot;7f4776da-5e88-4db2-9107-25725955461f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eabc955d-f082-4a7f-8d72-571a9fe73104&quot;,&quot;3bfa7a09-ad48-4ccd-805c-c5c0359247f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;b46cf1cb-5287-4c87-9992-1a4f8917ea16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;5002c3f5-3c46-4168-9701-2a4eb1fb3ce5&quot;,&quot;title&quot;:&quot;skip map rewrite&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support basic operations&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite should support basic operations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);\nchai_1.expect(ss.range()).to.eql([]);\nchai_1.expect(ss.rangeByScore()).to.eql([]);\n// expect(() =&gt; {\n//   ss.add(&#x27;__proto__&#x27;, 14);\n// }).to.throw();\nss.add(&#x27;5a600e16&#x27;, 8);\nss.add(&#x27;5a600e17&#x27;, 9);\nchai_1.expect(ss.add(&#x27;5a600e18&#x27;, 10)).to.equal(null);\nchai_1.expect(ss.add(&#x27;5a600e17&#x27;, 12)).to.equal(9);\nchai_1.expect(ss).to.have.length(3);\nchai_1.expect(ss.toArray()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(ss.toArray()).to.eql(ss.range(0, -1));\nchai_1.expect(ss.toArray()).to.eql(ss.rangeByScore());\nchai_1.expect(ss.has(&#x27;5a600e16&#x27;)).to.be.ok;\nchai_1.expect(ss.has(&#x27;5a600e17&#x27;)).to.be.ok;\nchai_1.expect(ss.has(&#x27;5a600e18&#x27;)).to.be.ok;\nchai_1.expect(ss.has(&#x27;5a600e19&#x27;)).to.not.be.ok;\nchai_1.expect(ss.score(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(ss.score(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(ss.score(&#x27;5a600e18&#x27;)).to.equal(10);\nchai_1.expect(ss.score(&#x27;5a600e19&#x27;)).to.equal(null);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(8);\nchai_1.expect(ss).to.have.length(2);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(null);\nchai_1.expect(ss).to.have.length(2);\nchai_1.expect(ss.has(&#x27;5a600e16&#x27;)).to.not.be.ok;\nchai_1.expect(ss.toArray()).to.eql([&#x27;5a600e18&#x27;, &#x27;5a600e17&#x27;]);\nchai_1.expect(ss.toArray({ withScores: true }))\n    .to.eql(ss.range(0, -1, { withScores: true }));\nchai_1.expect(ss.toArray()).to.eql(ss.rangeByScore());\nss.add(&#x27;5a600e16&#x27;, 10);\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nchai_1.expect(ss).to.have.length(9);\n// no change, so should be O(1)\nss.add(&#x27;5a600e17&#x27;, 12);\nchai_1.expect(ss.rank(&#x27;5a600e17&#x27;)).to.equal(4);\nchai_1.expect(ss).to.have.length(9);\nchai_1.expect(ss.toArray()).to.eql([\n    &#x27;5a600e16&#x27;,\n    &#x27;5a600e11&#x27;,\n    &#x27;5a600e18&#x27;,\n    &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;,\n    &#x27;5a600e14&#x27;,\n    &#x27;5a600e10&#x27;,\n    &#x27;5a600e12&#x27;,\n    &#x27;5a600e15&#x27;,\n]);\nchai_1.expect(ss.toArray()).to.eql(ss.range(0, -1));\nchai_1.expect(ss.toArray()).to.eql(ss.rangeByScore());\nchai_1.expect(ss.rangeByScore(14, 16, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;707ef306-8649-44f7-8c7c-30606c0dcdf1&quot;,&quot;parentUUID&quot;:&quot;5002c3f5-3c46-4168-9701-2a4eb1fb3ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;37310eaf-c89f-4325-8a55-a13b5638045d&quot;,&quot;title&quot;:&quot;#add&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should implicitly delete&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #add should implicitly delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.add(&#x27;5a600e14&#x27;, null)).to.equal(14);\nchai_1.expect(ss.add(&#x27;5a600e19&#x27;, null)).to.equal(null);\nchai_1.expect(ss).to.have.length(8);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd4cfc8e-12dd-48b5-9dfd-97cfa9b05950&quot;,&quot;parentUUID&quot;:&quot;37310eaf-c89f-4325-8a55-a13b5638045d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd4cfc8e-12dd-48b5-9dfd-97cfa9b05950&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e8199351-db22-4b2f-85c6-526d8d920635&quot;,&quot;title&quot;:&quot;#empty&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #empty should remove all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nss.empty();\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d9a38bd-20fa-428e-8b60-c48e28f910e2&quot;,&quot;parentUUID&quot;:&quot;e8199351-db22-4b2f-85c6-526d8d920635&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d9a38bd-20fa-428e-8b60-c48e28f910e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ab558437-36d8-4900-b6b0-5f85f5149edd&quot;,&quot;title&quot;:&quot;#incrBy(increment, key)&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should increase rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #incrBy(increment, key) should increase rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.add(&#x27;second&#x27;, 2);\nss.add(&#x27;third&#x27;, 3);\nss.add(&#x27;fourth&#x27;, 4);\nchai_1.expect(ss.incrBy(2, &#x27;first&#x27;)).to.equal(3);\nchai_1.expect(ss.rank(&#x27;first&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e93f58ba-1ee6-4df8-b45f-6bb65549ae7b&quot;,&quot;parentUUID&quot;:&quot;ab558437-36d8-4900-b6b0-5f85f5149edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create if not found&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #incrBy(increment, key) should create if not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.incrBy(2, &#x27;second&#x27;);\nchai_1.expect(ss.card()).to.equal(2);\nchai_1.expect(ss.rank(&#x27;second&#x27;)).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97e6d181-ed2d-48ad-828e-2c8d044d6f75&quot;,&quot;parentUUID&quot;:&quot;ab558437-36d8-4900-b6b0-5f85f5149edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e93f58ba-1ee6-4df8-b45f-6bb65549ae7b&quot;,&quot;97e6d181-ed2d-48ad-828e-2c8d044d6f75&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;3ef00810-c726-44dd-aec5-b07aedece273&quot;,&quot;title&quot;:&quot;#keys&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the keys&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #keys should return the keys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.keys()).to.eql([&#x27;5a600e16&#x27;, &#x27;5a600e11&#x27;, &#x27;5a600e18&#x27;, &#x27;5a600e13&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e14&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e12&#x27;, &#x27;5a600e15&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9449cd7-e4b7-42b8-9b82-04d67d9fe03f&quot;,&quot;parentUUID&quot;:&quot;3ef00810-c726-44dd-aec5-b07aedece273&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a9449cd7-e4b7-42b8-9b82-04d67d9fe03f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;ddf0c815-3bf4-4b55-a356-48d5f0929999&quot;,&quot;title&quot;:&quot;#rangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rangeByScore should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rangeByScore(14, null, { withScores: true })).to.eql([\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);\nchai_1.expect(ss.rangeByScore(null, 10, { withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n]);\nchai_1.expect(ss.rangeByScore(-Infinity, Infinity)).to.eql(ss.toArray());\nchai_1.expect(ss.rangeByScore(null, null)).to.eql(ss.toArray());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92fd9e57-a36c-40d4-bba3-5e9c0191ba4d&quot;,&quot;parentUUID&quot;:&quot;ddf0c815-3bf4-4b55-a356-48d5f0929999&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92fd9e57-a36c-40d4-bba3-5e9c0191ba4d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d9e80de7-f1df-4129-91f4-f5ac6045828a&quot;,&quot;title&quot;:&quot;#count&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should count elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #count should count elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nchai_1.expect(ss.count()).to.equal(0);\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nss.add(&#x27;5a600e19&#x27;, 14);\nss.add(&#x27;5a600f00&#x27;, 30.0);\nss.add(&#x27;5a600f01&#x27;, 30.5);\nss.add(&#x27;5a600f02&#x27;, 31.0);\nss.add(&#x27;5a600f03&#x27;, 31.5);\nss.add(&#x27;5a600f04&#x27;, 32.0);\nss.add(&#x27;5a600f05&#x27;, 32.0);\nss.add(&#x27;5a600f06&#x27;, 32.0);\nchai_1.expect(ss.count()).to.eql(ss.rangeByScore().length);\nchai_1.expect(ss.count(8)).to.eql(ss.rangeByScore(8).length);\nchai_1.expect(ss.count(3, 7)).to.eql(ss.rangeByScore(3, 7).length);\nchai_1.expect(ss.count(5, 14)).to.eql(ss.rangeByScore(5, 14).length);\nchai_1.expect(ss.count(5, 5)).to.eql(ss.rangeByScore(5, 5).length);\nchai_1.expect(ss.count(5, 0)).to.eql(ss.rangeByScore(5, 0).length);\nchai_1.expect(ss.count(30, 32)).to.eql(ss.rangeByScore(30, 32).length);\nchai_1.expect(ss.count(40)).to.eql(ss.rangeByScore(40).length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10b0889f-4ac1-4c43-ba8a-afb5bc14a10a&quot;,&quot;parentUUID&quot;:&quot;d9e80de7-f1df-4129-91f4-f5ac6045828a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10b0889f-4ac1-4c43-ba8a-afb5bc14a10a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;d5661a6c-42ca-4759-9f1b-91bf0782cdaf&quot;,&quot;title&quot;:&quot;#range&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should support special ranges&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #range should support special ranges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.add(&#x27;second&#x27;, 2);\nss.add(&#x27;third&#x27;, 3);\nss.add(&#x27;fourth&#x27;, 4);\nlet array = [&#x27;first&#x27;, &#x27;second&#x27;, &#x27;third&#x27;, &#x27;fourth&#x27;];\nchai_1.expect(ss.range()).to.eql(array);\nchai_1.expect(ss.range(2)).to.eql(array.slice(2));\nchai_1.expect(ss.range(8)).to.eql(array.slice(8));\nchai_1.expect(ss.range(0, 2)).to.eql(array.slice(0, 3));\nchai_1.expect(ss.range(-1)).to.eql([&#x27;fourth&#x27;]);\nchai_1.expect(ss.range(-4)).to.eql(array);\nchai_1.expect(ss.range(-4, -2)).to.eql(array.slice(0, 3));\nchai_1.expect(ss.range(-4, ss.length + 1000))\n    .to.eql(array.slice(-4, ss.length + 1000));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47d2f205-fad0-45fc-a1bc-db75eab4096c&quot;,&quot;parentUUID&quot;:&quot;d5661a6c-42ca-4759-9f1b-91bf0782cdaf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should support withScores&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #range should support withScores&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, 1);\nss.add(&#x27;second&#x27;, 2);\nchai_1.expect(ss.range(0, 0, { withScores: true }))\n    .to.eql([[&#x27;first&#x27;, 1]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d38c8c1-eaee-4c40-ae37-e67105ed47bf&quot;,&quot;parentUUID&quot;:&quot;d5661a6c-42ca-4759-9f1b-91bf0782cdaf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47d2f205-fad0-45fc-a1bc-db75eab4096c&quot;,&quot;7d38c8c1-eaee-4c40-ae37-e67105ed47bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;579ce667-b0a2-460b-8ccc-7615ec7638f8&quot;,&quot;title&quot;:&quot;#intersect&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should intersect two sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect two sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let a = new sorted_set_1.SortedSet(), b = new sorted_set_1.SortedSet();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nchai_1.expect(sorted_set_1.SortedSet.intersect(a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e1b&#x27;]);\nchai_1.expect(sorted_set_1.SortedSet.intersect(b, a)).to.eql([&#x27;5a600e1b&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e1c&#x27;, &#x27;5a600e15&#x27;, &#x27;5a600e19&#x27;, &#x27;5a600e10&#x27;, &#x27;5a600e17&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a212f6d3-4a3d-46dd-af53-9406d4febfa4&quot;,&quot;parentUUID&quot;:&quot;579ce667-b0a2-460b-8ccc-7615ec7638f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect three sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect three sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let a = new sorted_set_1.SortedSet(), b = new sorted_set_1.SortedSet(), c = new sorted_set_1.SortedSet();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nchai_1.expect(sorted_set_1.SortedSet.intersect(c, a, b)).to.eql([&#x27;5a600e10&#x27;, &#x27;5a600e14&#x27;,\n    &#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\n// expect(SortedSet.intersect(c, a, b)).to.eql(c.intersect(a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aae9ad6b-3b57-4363-b103-fef659a280d0&quot;,&quot;parentUUID&quot;:&quot;579ce667-b0a2-460b-8ccc-7615ec7638f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should intersect four sets&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #intersect should intersect four sets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let a = new sorted_set_1.SortedSet();\nlet b = new sorted_set_1.SortedSet();\nlet c = new sorted_set_1.SortedSet();\nlet d = new sorted_set_1.SortedSet();\na.add(&#x27;5a600e10&#x27;, 16);\na.add(&#x27;5a600e12&#x27;, 10);\na.add(&#x27;5a600e14&#x27;, 9);\na.add(&#x27;5a600e15&#x27;, 14);\na.add(&#x27;5a600e17&#x27;, 20);\na.add(&#x27;5a600e18&#x27;, 13);\na.add(&#x27;5a600e19&#x27;, 15);\na.add(&#x27;5a600e1a&#x27;, 19);\na.add(&#x27;5a600e1b&#x27;, 7);\na.add(&#x27;5a600e1c&#x27;, 13);\na.add(&#x27;5a600e1e&#x27;, 10);\nb.add(&#x27;5a600e10&#x27;, 0);\nb.add(&#x27;5a600e11&#x27;, 15);\nb.add(&#x27;5a600e13&#x27;, 5);\nb.add(&#x27;5a600e14&#x27;, 3);\nb.add(&#x27;5a600e15&#x27;, 14);\nb.add(&#x27;5a600e17&#x27;, 12);\nb.add(&#x27;5a600e19&#x27;, 12);\nb.add(&#x27;5a600e1b&#x27;, 16);\nb.add(&#x27;5a600e1c&#x27;, 12);\nb.add(&#x27;5a600e1d&#x27;, 17);\nb.add(&#x27;5a600e1f&#x27;, 3);\nc.add(&#x27;5a600e10&#x27;, 7);\nc.add(&#x27;5a600e12&#x27;, 20);\nc.add(&#x27;5a600e13&#x27;, 9);\nc.add(&#x27;5a600e14&#x27;, 19);\nc.add(&#x27;5a600e16&#x27;, 19);\nc.add(&#x27;5a600e17&#x27;, 1);\nc.add(&#x27;5a600e18&#x27;, 18);\nc.add(&#x27;5a600e1a&#x27;, 6);\nc.add(&#x27;5a600e1c&#x27;, 15);\nc.add(&#x27;5a600e1f&#x27;, 4);\nd.add(&#x27;5a600e1c&#x27;, 400);\nd.add(&#x27;5a600e17&#x27;, 500);\nd.add(&#x27;5a600e1f&#x27;, 600);\nd.add(&#x27;5a600e20&#x27;, 700);\nchai_1.expect(sorted_set_1.SortedSet.intersect(d, c, a, b)).to.eql([&#x27;5a600e17&#x27;, &#x27;5a600e1c&#x27;]);\n// expect(SortedSet.intersect(d, c, a, b)).to.eql(d.intersect(c, a, b));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29747296-8ddd-46fc-906d-86dc166be2f5&quot;,&quot;parentUUID&quot;:&quot;579ce667-b0a2-460b-8ccc-7615ec7638f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a212f6d3-4a3d-46dd-af53-9406d4febfa4&quot;,&quot;aae9ad6b-3b57-4363-b103-fef659a280d0&quot;,&quot;29747296-8ddd-46fc-906d-86dc166be2f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;484d4de1-7d23-4aa5-bf19-40bf006e9c3f&quot;,&quot;title&quot;:&quot;#rank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the correct rank&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rank should get the correct rank&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rank(&#x27;5a600e12&#x27;)).to.equal(7);\nchai_1.expect(ss.rank(&#x27;5a600e13&#x27;)).to.equal(3);\nchai_1.expect(ss.rank(&#x27;5a600e16&#x27;)).to.equal(0);\nchai_1.expect(ss.rank(&#x27;5a600e15&#x27;)).to.equal(8);\nchai_1.expect(ss.rank(&#x27;not in set&#x27;)).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8826351d-f09e-473a-9f89-89fe46fa2d7e&quot;,&quot;parentUUID&quot;:&quot;484d4de1-7d23-4aa5-bf19-40bf006e9c3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8826351d-f09e-473a-9f89-89fe46fa2d7e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;33650b4e-54a1-4482-ac72-43616118a5d1&quot;,&quot;title&quot;:&quot;#rem&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete special elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rem should delete special elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(ss).to.have.length(8);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(ss).to.have.length(7);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8b9a9c3-a6bf-4f81-919a-ca7c8e7f3fe1&quot;,&quot;parentUUID&quot;:&quot;33650b4e-54a1-4482-ac72-43616118a5d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete many elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #rem should delete many elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.rem(&#x27;5a600e11&#x27;)).to.equal(6);\nchai_1.expect(ss.rem(&#x27;5a600e13&#x27;)).to.equal(11);\nchai_1.expect(ss.rem(&#x27;5a600e14&#x27;)).to.equal(14);\nchai_1.expect(ss.rem(&#x27;5a600e15&#x27;)).to.equal(19);\nchai_1.expect(ss.rem(&#x27;5a600e16&#x27;)).to.equal(3);\nchai_1.expect(ss.rem(&#x27;5a600e17&#x27;)).to.equal(12);\nchai_1.expect(ss.length).to.equal(3);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d795aa10-bfb3-4281-8e38-666ecee1db64&quot;,&quot;parentUUID&quot;:&quot;33650b4e-54a1-4482-ac72-43616118a5d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8b9a9c3-a6bf-4f81-919a-ca7c8e7f3fe1&quot;,&quot;d795aa10-bfb3-4281-8e38-666ecee1db64&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;b65ddeb5-915d-47e5-b5db-6001d97990dc&quot;,&quot;title&quot;:&quot;#remRangeByScore&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a range of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByScore should strip out a range of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByScore(4, 14)).to.equal(5);\nchai_1.expect(ss).to.have.length(4);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba08f96f-0039-419d-906e-76d7fe464624&quot;,&quot;parentUUID&quot;:&quot;b65ddeb5-915d-47e5-b5db-6001d97990dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all the elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByScore should strip out all the elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByScore(3, 19)).to.equal(9);\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cf126e8-85a8-4c6a-83b0-499630590569&quot;,&quot;parentUUID&quot;:&quot;b65ddeb5-915d-47e5-b5db-6001d97990dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba08f96f-0039-419d-906e-76d7fe464624&quot;,&quot;7cf126e8-85a8-4c6a-83b0-499630590569&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;f905483f-5098-4f8c-8963-32725bb078a0&quot;,&quot;title&quot;:&quot;#remRangeByRank&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should strip out a slice of elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByRank should strip out a slice of elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByRank(1, 6)).to.equal(5);\nchai_1.expect(ss).to.have.length(4);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f0c24b4-9a2a-43e0-8abe-5df33540d483&quot;,&quot;parentUUID&quot;:&quot;f905483f-5098-4f8c-8963-32725bb078a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should strip out all elements&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #remRangeByRank should strip out all elements&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(ss.remRangeByRank(0, 9)).to.equal(9);\nchai_1.expect(ss).to.have.length(0);\nchai_1.expect(ss.toArray()).to.eql([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b1a4a87-c2a1-4003-8e7c-7b2398e030ed&quot;,&quot;parentUUID&quot;:&quot;f905483f-5098-4f8c-8963-32725bb078a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f0c24b4-9a2a-43e0-8abe-5df33540d483&quot;,&quot;1b1a4a87-c2a1-4003-8e7c-7b2398e030ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;4138cb3c-49ec-473a-a9c7-dca22b20bb6c&quot;,&quot;title&quot;:&quot;#values&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the values&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite #values should return the values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet();\nss.add(&#x27;first&#x27;, -1);\nss.add(&#x27;third&#x27;, 5);\nss.add(&#x27;second&#x27;, 3);\nchai_1.expect(ss.values()).to.eql([-1, 3, 5]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f423193-7b7a-4aa6-bd62-52aa9cfc4ac7&quot;,&quot;parentUUID&quot;:&quot;4138cb3c-49ec-473a-a9c7-dca22b20bb6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f423193-7b7a-4aa6-bd62-52aa9cfc4ac7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;c2d80e86-6480-49c1-aca9-6bfdd138fa20&quot;,&quot;title&quot;:&quot;unique rewrite&quot;,&quot;fullFile&quot;:&quot;/home/lane/git/redis/test/resp/data/sorted-set.test.ts&quot;,&quot;file&quot;:&quot;/test/resp/data/sorted-set.test.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should ensure values are unique&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite unique rewrite should ensure values are unique&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = { unique: true };\nlet ss = new sorted_set_1.SortedSet(options);\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600e19&#x27;, 11);\n}).to.throw(/unique/);\n// quick exit test\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600dff&#x27;, ss._head.next[ss._level - 1].next.value);\n}).to.throw(/unique/);\n// this test ensures the key &lt; key check doesn&#x27;t come into play\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600dff&#x27;, 11);\n}).to.throw(/unique/);\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600e18&#x27;, 10);\n}).to.not.throw();\nchai_1.expect(ss).to.have.length(9);\nchai_1.expect(ss.toArray({ withScores: true })).to.eql([\n    [&#x27;5a600e16&#x27;, 3],\n    [&#x27;5a600e11&#x27;, 6],\n    [&#x27;5a600e18&#x27;, 10],\n    [&#x27;5a600e13&#x27;, 11],\n    [&#x27;5a600e17&#x27;, 12],\n    [&#x27;5a600e14&#x27;, 14],\n    [&#x27;5a600e10&#x27;, 16],\n    [&#x27;5a600e12&#x27;, 17],\n    [&#x27;5a600e15&#x27;, 19],\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71a026a8-56cb-4919-a304-282f8f463f2d&quot;,&quot;parentUUID&quot;:&quot;c2d80e86-6480-49c1-aca9-6bfdd138fa20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should revert keys if constraint broken during update&quot;,&quot;fullTitle&quot;:&quot;sorted-set test skip map rewrite unique rewrite should revert keys if constraint broken during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ss = new sorted_set_1.SortedSet({ unique: true });\nss.add(&#x27;5a600e10&#x27;, 16);\nss.add(&#x27;5a600e11&#x27;, 6);\nss.add(&#x27;5a600e12&#x27;, 17);\nss.add(&#x27;5a600e13&#x27;, 11);\nss.add(&#x27;5a600e14&#x27;, 14);\nss.add(&#x27;5a600e15&#x27;, 19);\nss.add(&#x27;5a600e16&#x27;, 3);\nss.add(&#x27;5a600e17&#x27;, 12);\nss.add(&#x27;5a600e18&#x27;, 10);\nchai_1.expect(() =&gt; {\n    ss.add(&#x27;5a600e13&#x27;, 14);\n}).to.throw(/unique/);\nchai_1.expect(ss).to.have.length(9);\nchai_1.expect(ss.score(&#x27;5a600e13&#x27;)).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f2bbd4d-3f5d-48a7-ba74-ee01cca14f87&quot;,&quot;parentUUID&quot;:&quot;c2d80e86-6480-49c1-aca9-6bfdd138fa20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;71a026a8-56cb-4919-a304-282f8f463f2d&quot;,&quot;8f2bbd4d-3f5d-48a7-ba74-ee01cca14f87&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;707ef306-8649-44f7-8c7c-30606c0dcdf1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[&quot;0134d7d2-fc5a-4048-a5c9-bce26d106ba1&quot;,&quot;0a59a370-1de1-4010-b937-8fd8af332693&quot;,&quot;86c07628-93eb-45de-87d9-39203f8155e0&quot;,&quot;56e15e5a-4f5d-4a6a-9270-c4571e23b5fa&quot;,&quot;4953fd20-23dc-40b9-a95c-b6d68a25dcc7&quot;,&quot;751aa671-2a2e-488a-b46e-5dfee5734535&quot;,&quot;0ae16aec-b43c-42dc-83c4-f53e481bfd47&quot;,&quot;be0c7ffc-7f0a-4fdb-98e0-5a00aaf43948&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;16f4e4f1-2cba-4a5c-b20d-669b24c1a567&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:5000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;6.2.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;docs/mochawesome&quot;},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;docs/mochawesome&quot;,&quot;reportTitle&quot;:&quot;redis&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;docs/mochawesome/assets&quot;,&quot;jsonFile&quot;:&quot;/home/lane/git/redis/docs/mochawesome/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/lane/git/redis/docs/mochawesome/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>